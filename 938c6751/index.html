<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/JavaReadingNotes/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/JavaReadingNotes/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/JavaReadingNotes/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/JavaReadingNotes/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/JavaReadingNotes/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lanlan2017.github.io","root":"/JavaReadingNotes/","images":"/JavaReadingNotes/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/JavaReadingNotes/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/JavaReadingNotes/js/config.js"></script>
<meta name="description" content="25.4 剖析常见表达式本节来讨论和分析一些常用的正则表达式，具体包括：  邮编。 电话号码，包括手机号码和固定电话号码。 日期和时间。 身份证号。 IP地址。 URL。 Email地址。 中文字符。  对于同一个目的，正则表达式往往有多种写法，大多没有唯一正确的写法，本节的写法主要是示例。此外，写一个正则表达式，匹配希望匹配的内容往往比较容易，但让它不匹配不希望匹配的内容则往往比较困难，也就是说">
<meta property="og:type" content="article">
<meta property="og:title" content="25.4 剖析常见表达式">
<meta property="og:url" content="https://lanlan2017.github.io/JavaReadingNotes/938c6751/index.html">
<meta property="og:site_name" content="蓝蓝站点">
<meta property="og:description" content="25.4 剖析常见表达式本节来讨论和分析一些常用的正则表达式，具体包括：  邮编。 电话号码，包括手机号码和固定电话号码。 日期和时间。 身份证号。 IP地址。 URL。 Email地址。 中文字符。  对于同一个目的，正则表达式往往有多种写法，大多没有唯一正确的写法，本节的写法主要是示例。此外，写一个正则表达式，匹配希望匹配的内容往往比较容易，但让它不匹配不希望匹配的内容则往往比较困难，也就是说">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-12-08T04:34:35.000Z">
<meta property="article:modified_time" content="2021-12-08T04:34:35.000Z">
<meta property="article:author" content="蓝蓝">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lanlan2017.github.io/JavaReadingNotes/938c6751/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://lanlan2017.github.io/JavaReadingNotes/938c6751/","path":"/938c6751/","title":"25.4 剖析常见表达式"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>25.4 剖析常见表达式 | 蓝蓝站点</title>
  

  <script src="/JavaReadingNotes/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?dadeb188eb14ccde0b25a19230c429b5"></script>


<link rel="dns-prefetch" href="https://waline-test-mzjszagu6-lanlan2017.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/JavaReadingNotes/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/JavaReadingNotes/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">蓝蓝站点</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Java读书笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/JavaReadingNotes/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-dir"><a href="/JavaReadingNotes/dir/" rel="section"><i class="fa fa-sitemap fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-categories"><a href="/JavaReadingNotes/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/JavaReadingNotes/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-tags"><a href="/JavaReadingNotes/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#25-4-%E5%89%96%E6%9E%90%E5%B8%B8%E8%A7%81%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">25.4 剖析常见表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1%EF%BC%8E%E9%82%AE%E7%BC%96"><span class="nav-text">1．邮编</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2%EF%BC%8E%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81"><span class="nav-text">2．手机号码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%EF%BC%8E%E5%9B%BA%E5%AE%9A%E7%94%B5%E8%AF%9D%E5%8F%B7%E7%A0%81"><span class="nav-text">3．固定电话号码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4%EF%BC%8E%E6%97%A5%E6%9C%9F"><span class="nav-text">4．日期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5%EF%BC%8E%E6%97%B6%E9%97%B4"><span class="nav-text">5．时间</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6%EF%BC%8E%E8%BA%AB%E4%BB%BD%E8%AF%81%E5%8F%B7"><span class="nav-text">6．身份证号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-IP%E5%9C%B0%E5%9D%80"><span class="nav-text">7. IP地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-URL"><span class="nav-text">8. URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-Email%E5%9C%B0%E5%9D%80"><span class="nav-text">9. Email地址</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10%EF%BC%8E%E4%B8%AD%E6%96%87%E5%AD%97%E7%AC%A6"><span class="nav-text">10．中文字符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11%EF%BC%8E%E5%B0%8F%E7%BB%93"><span class="nav-text">11．小结</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="蓝蓝"
      src="/JavaReadingNotes/images/avatar.gif">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description">好好学习，天天向上</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/JavaReadingNotes/archives/">
          <span class="site-state-item-count">1871</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/JavaReadingNotes/categories/">
        <span class="site-state-item-count">626</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/todo/" title="todo → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;todo&#x2F;"><i class="fa fa-check-square fa-fw"></i>todo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/links/" title="links → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;links&#x2F;"><i class="fa fa-link fa-fw"></i>links</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/938c6751/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          25.4 剖析常见表达式
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-12-08 12:34:35" itemprop="dateCreated datePublished" datetime="2021-12-08T12:34:35+08:00">2021-12-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/9-Java%E7%BC%96%E7%A8%8B%E7%9A%84%E9%80%BB%E8%BE%91/" itemprop="url" rel="index"><span itemprop="name">9 Java编程的逻辑</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/9-Java%E7%BC%96%E7%A8%8B%E7%9A%84%E9%80%BB%E8%BE%91/6%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E5%8A%A8%E6%80%81%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">6第六部分 动态与函数式编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/9-Java%E7%BC%96%E7%A8%8B%E7%9A%84%E9%80%BB%E8%BE%91/6%E7%AC%AC%E5%85%AD%E9%83%A8%E5%88%86-%E5%8A%A8%E6%80%81%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/%E7%AC%AC25%E7%AB%A0-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url" rel="index"><span itemprop="name">第25章 正则表达式</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/938c6751/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/938c6751/" data-xid="/JavaReadingNotes/938c6751/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="25-4-剖析常见表达式"><a href="#25-4-剖析常见表达式" class="headerlink" title="25.4 剖析常见表达式"></a>25.4 剖析常见表达式</h1><p>本节来讨论和分析一些常用的正则表达式，具体包括：</p>
<ul>
<li>邮编。</li>
<li>电话号码，包括手机号码和固定电话号码。</li>
<li>日期和时间。</li>
<li>身份证号。</li>
<li>IP地址。</li>
<li>URL。</li>
<li>Email地址。</li>
<li>中文字符。</li>
</ul>
<p>对于同一个目的，正则表达式往往有多种写法，大多没有唯一正确的写法，本节的写法主要是示例。此外，写一个正则表达式，匹配希望匹配的内容往往比较容易，但让它不匹配不希望匹配的内容则往往比较困难，也就是说，保证精确性经常是很难的，不过，很多时候，也没有必要写完全精确的表达式，需要写到多精确与需要处理的文本和需求有关。另外，正则表达式难以表达的，可以通过写程序进一步处理。这么描述可能比较抽象，下面，我们会具体讨论分析。</p>
<h2 id="1．邮编"><a href="#1．邮编" class="headerlink" title="1．邮编"></a>1．邮编</h2><p>邮编比较简单，就是6位数字，所以表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9]&#123;6&#125;</span><br></pre></td></tr></table></figure>

<p>这个表达式可以用于验证输入是否为邮编，比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern ZIP_CODE_PATTERN = Pattern.compile(<span class="string">&quot;[0-9]&#123;6&#125;&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isZipCode</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ZIP_CODE_PATTERN.matcher(text).matches();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但如果用于查找，这个表达式是不够的，看个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">findZipCode</span><span class="params">(String text)</span> </span>&#123;</span><br><span class="line">    Matcher matcher = ZIP_CODE_PATTERN.matcher(text);</span><br><span class="line">    <span class="keyword">while</span> (matcher.find()) &#123;</span><br><span class="line">        System.out.println(matcher.group());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    findZipCode(<span class="string">&quot;邮编 100013，电话18612345678&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>文本中只有一个邮编，但输出却为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">100013</span><br><span class="line">186123</span><br></pre></td></tr></table></figure>

<p>这怎么办呢？可以使用环视边界匹配，对于左边界，它前面的字符不能是数字，环视表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;![0-9])</span><br></pre></td></tr></table></figure>

<p>对于右边界，它右边的字符不能是数字，环视表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?![0-9])</span><br></pre></td></tr></table></figure>

<p>所以，完整的表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?&lt;![0-9])[0-9]&#123;6&#125;(?![0-9])</span><br></pre></td></tr></table></figure>

<p>使用这个表达式，将ZIP_CODE_PATTERN改为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern ZIP_CODE_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;[0-9]&#123;6&#125;&quot;</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<p>就可以输出期望的结果了。6位数字就一定是邮编吗？答案当然是否定的，所以，这个表达式也不是精确的，如果需要更精确的验证，可以写程序进一步检查。</p>
<h2 id="2．手机号码"><a href="#2．手机号码" class="headerlink" title="2．手机号码"></a>2．手机号码</h2><p>中国的手机号码都是11位数字，所以，最简单的表达式就是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9]&#123;11&#125;</span><br></pre></td></tr></table></figure>

<p>不过，目前手机号第1位都是1，第2位取值为3、4、5、7、8之一，所以更精确的表达式是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[34578][0-9]&#123;9&#125;</span><br></pre></td></tr></table></figure>

<p>为方便表达手机号，手机号中间经常有连字符（即减号’-‘），形如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">186-1234-5678</span><br></pre></td></tr></table></figure>

<p>为表达这种可选的连字符，表达式可以改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[34578][0-9]-? [0-9]&#123;4&#125;-? [0-9]&#123;4&#125;</span><br></pre></td></tr></table></figure>

<p>在手机号前面，可能还有0、+86或0086，和手机号码之间可能还有一个空格，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">018612345678</span><br><span class="line">+86 18612345678</span><br><span class="line">0086 18612345678</span><br></pre></td></tr></table></figure>

<p>为表达这种形式，可以在号码前加如下表达式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">((0|\+86|0086)\s? )?</span><br></pre></td></tr></table></figure>

<p>和邮编类似，如果为了抽取，也要在左右加环视边界匹配，左右不能是数字。所以，完整的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(? &lt;! [0-9])((0|\+86|0086)\s? )?1[34578][0-9]-? [0-9]&#123;4&#125;-? [0-9]&#123;4&#125;(? ! [0-9])</span><br></pre></td></tr></table></figure>

<p>用Java表示的代码为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern MOBILE_PHONE_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;((0|\\+86|0086)\\s? )? &quot;</span> <span class="comment">// 0 +86 0086</span></span><br><span class="line">        + <span class="string">&quot;1[34578][0-9]-? [0-9]&#123;4&#125;-? [0-9]&#123;4&#125;&quot;</span> <span class="comment">// 186-1234-5678</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<h2 id="3．固定电话号码"><a href="#3．固定电话号码" class="headerlink" title="3．固定电话号码"></a>3．固定电话号码</h2><p>不考虑分机，中国的固定电话一般由两部分组成：区号和市内号码，区号是3到4位，市内号码是7到8位。区号以0开头，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0[0-9]&#123;2,3&#125;</span><br></pre></td></tr></table></figure>

<p>市内号码表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9]&#123;7,8&#125;</span><br></pre></td></tr></table></figure>

<p>区号可能用括号包含，区号与市内号码之间可能有连字符，如以下形式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">010-62265678</span><br><span class="line">(010)62265678</span><br></pre></td></tr></table></figure>

<p>整个区号是可选的，所以整个表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\(?0[0-9]&#123;2,3&#125;\)?-?)?[0-9]&#123;7,8&#125;</span><br></pre></td></tr></table></figure>

<p>再加上左右边界环视，完整的Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern FIXED_PHONE_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;(\\(?0[0-9]&#123;2,3&#125;\\)? -? )? &quot;</span> <span class="comment">//区号</span></span><br><span class="line">        + <span class="string">&quot;[0-9]&#123;7,8&#125;&quot;</span><span class="comment">//市内号码</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<h2 id="4．日期"><a href="#4．日期" class="headerlink" title="4．日期"></a>4．日期</h2><p>日期的表示方式有很多种，我们只看一种，形如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2017-06-21</span><br><span class="line">2016-11-1</span><br></pre></td></tr></table></figure>

<p>年月日之间用连字符分隔，月和日可能只有一位。最简单的正则表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span><br></pre></td></tr></table></figure>

<p>年一般没有限制，但月只能取值1～12，日只能取值1～31，怎么表达这种限制呢？</p>
<p>对于月，有两种情况，1月到9月，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0?[1-9]</span><br></pre></td></tr></table></figure>

<p>10月到12月，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[0-2]</span><br></pre></td></tr></table></figure>

<p>所以，月的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(0?[1-9]|1[0-2])</span><br></pre></td></tr></table></figure>

<p>对于日，有三种情况：</p>
<ul>
<li>1到9号，表达式为：<code>0?[1-9]</code>。</li>
<li>10号到29号，表达式为：<code>[1-2][0-9]</code>。</li>
<li>30号和31号，表达式为：<code>3[01]</code>。</li>
</ul>
<p>所以，整个表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\d&#123;4&#125;-(0?[1-9]|1[0-2])-(0?[1-9]|[1-2][0-9]|3[01])</span><br></pre></td></tr></table></figure>

<p>加上左右边界环视，完整的Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern DATE_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;\\d&#123;4&#125;-&quot;</span> <span class="comment">//年</span></span><br><span class="line">        + <span class="string">&quot;(0? [1-9]|1[0-2])-&quot;</span> <span class="comment">//月</span></span><br><span class="line">        + <span class="string">&quot;(0? [1-9]|[1-2][0-9]|3[01])&quot;</span><span class="comment">//日</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<h2 id="5．时间"><a href="#5．时间" class="headerlink" title="5．时间"></a>5．时间</h2><p>考虑24小时制，只考虑小时和分钟，小时和分钟都用固定两位表示，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10:57</span><br></pre></td></tr></table></figure>

<p>基本表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\d&#123;2&#125;:\d&#123;2&#125;</span><br></pre></td></tr></table></figure>

<p>小时取值范围为0～23，更精确的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([0-1][0-9]|2[0-3])</span><br></pre></td></tr></table></figure>

<p>分钟取值范围为0～59，更精确的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-5][0-9]</span><br></pre></td></tr></table></figure>

<p>所以，整个表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([0-1][0-9]|2[0-3]):[0-5][0-9]</span><br></pre></td></tr></table></figure>

<p>加上左右边界环视，完整的Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern TIME_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">// 左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;([0-1][0-9]|2[0-3])&quot;</span> <span class="comment">// 小时</span></span><br><span class="line">        + <span class="string">&quot;:&quot;</span> + <span class="string">&quot;[0-5][0-9]&quot;</span><span class="comment">// 分钟</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">// 右边不能有数字</span></span><br></pre></td></tr></table></figure>

<h2 id="6．身份证号"><a href="#6．身份证号" class="headerlink" title="6．身份证号"></a>6．身份证号</h2><p>身份证有一代和二代之分，一代身份证号是15位数字，二代身份证号是18位数字，都不能以0开头。对于二代身份证号，最后一位可能为x或X，其他是数字。一代身份证号表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1-9][0-9]&#123;14&#125;</span><br></pre></td></tr></table></figure>

<p>二代身份证号表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1-9][0-9]&#123;16&#125;[0-9xX]</span><br></pre></td></tr></table></figure>

<p>这两个表达式的前面部分是相同的，二代身份证号表达式多了如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9]&#123;2&#125;[0-9xX]</span><br></pre></td></tr></table></figure>

<p>所以，它们可以合并为一个表达式，即：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[1-9][0-9]&#123;14&#125;([0-9]&#123;2&#125;[0-9xX])?</span><br></pre></td></tr></table></figure>

<p>加上左右边界环视，完整的Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern ID_CARD_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;[1-9][0-9]&#123;14&#125;&quot;</span> <span class="comment">//一代身份证</span></span><br><span class="line">        + <span class="string">&quot;([0-9]&#123;2&#125;[0-9xX])? &quot;</span> <span class="comment">//二代身份证多出的部分</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<p>符合这个要求的就一定是身份证号吗？当然不是，身份证号还有一些更为具体的要求，本书就不探讨了。</p>
<h2 id="7-IP地址"><a href="#7-IP地址" class="headerlink" title="7. IP地址"></a>7. IP地址</h2><p>IP地址示例如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">192.168.3.5</span><br></pre></td></tr></table></figure>

<p>点号分隔，4段数字，每个数字范围是0～255。最简单的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1-3&#125;</span><br></pre></td></tr></table></figure>

<p><code>\d&#123;1,3&#125;</code>太简单，没有满足0～255之间的约束，要满足这个约束，需要分多种情况考虑。</p>
<p>值是1位数，前面可能有0～2个0，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0&#123;0,2&#125;[0-9]</span><br></pre></td></tr></table></figure>

<p>值是两位数，前面可能有一个0，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0?[0-9]&#123;2&#125;</span><br></pre></td></tr></table></figure>

<p>值是三位数，又要分为多种情况。以1开头的，后两位没有限制，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1[0-9]&#123;2&#125;</span><br></pre></td></tr></table></figure>

<p>以2开头的，如果第二位是0到4，则第三位没有限制，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2[0-4][0-9]</span><br></pre></td></tr></table></figure>

<p>如果第二位是5，则第三位取值为0到5，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">25[0-5]</span><br></pre></td></tr></table></figure>

<p>所以，\d{1,3}更为精确的表示为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(0&#123;0,2&#125;[0-9]|0? [0-9]&#123;2&#125;|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])</span><br></pre></td></tr></table></figure>

<p>所以，加上左右边界环视，IP地址的完整Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern IP_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;(? &lt;! [0-9])&quot;</span> <span class="comment">//左边不能有数字</span></span><br><span class="line">        + <span class="string">&quot;((0&#123;0,2&#125;[0-9]|0? [0-9]&#123;2&#125;|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])\\.)&#123;3&#125;&quot;</span></span><br><span class="line">        + <span class="string">&quot;(0&#123;0,2&#125;[0-9]|0? [0-9]&#123;2&#125;|1[0-9]&#123;2&#125;|2[0-4][0-9]|25[0-5])&quot;</span></span><br><span class="line">        + <span class="string">&quot;(? ! [0-9])&quot;</span>); <span class="comment">//右边不能有数字</span></span><br></pre></td></tr></table></figure>

<h2 id="8-URL"><a href="#8-URL" class="headerlink" title="8. URL"></a>8. URL</h2><p>URL的格式比较复杂，其规范定义在<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc1738%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AA%E8%80%83%E8%99%91HTTP%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%85%B6%E9%80%9A%E7%94%A8%E6%A0%BC%E5%BC%8F%E6%98%AF%EF%BC%9A">https://tools.ietf.org/html/rfc1738，我们只考虑HTTP协议，其通用格式是：</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://&lt;host&gt;:&lt;port&gt;/&lt;path&gt;? &lt;searchpart&gt;</span><br></pre></td></tr></table></figure>

<p>开始是<code>http://</code>，接着是主机名，主机名之后是可选的端口，再之后是可选的路径，路径后是可选的查询字符串，以？开头。看一些例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://www.example.com</span><br><span class="line">http://www.example.com/ab/c/def.html</span><br><span class="line">http://www.example.com:8080/ab/c/def? q1=abc&amp;q2=def</span><br></pre></td></tr></table></figure>

<p>主机名中的字符可以是字母、数字、减号和点号，所以表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[-0-9a-zA-Z.]+</span><br></pre></td></tr></table></figure>

<p>端口部分可以写为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(:\d+)?</span><br></pre></td></tr></table></figure>

<p>路径由多个子路径组成，每个子路径以/开头，后跟零个或多个非/的字符，简单地说，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(/[^/]＊)＊</span><br></pre></td></tr></table></figure>

<p>更精确地说，把所有允许的字符列出来，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(/[-\w$.+! ＊&#x27;(), %; :@&amp;=]＊)＊</span><br></pre></td></tr></table></figure>

<p>对于查询字符串，简单地说，由非空字符串组成，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\?[\S]＊</span><br></pre></td></tr></table></figure>

<p>更精确的，把所有允许的字符列出来，表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\?[-\w$.+!＊&#x27;(),%;:@&amp;=]＊</span><br></pre></td></tr></table></figure>

<p>路径和查询字符串是可选的，且查询字符串只有在至少存在一个路径的情况下才能出现，其模式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(/&lt;sub_path&gt;(/&lt;sub_path&gt;)＊(\?&lt;search&gt;)?)?</span><br></pre></td></tr></table></figure>

<p>所以，路径和查询部分的简单表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(/[^/]＊(/[^/]＊)＊(\? [\S]＊)?)?</span><br></pre></td></tr></table></figure>

<p>精确表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(/[-\w$.+!＊&#x27;(),%;:@&amp;=]＊(/[-\w$.+!＊&#x27;(),%;:@&amp;=]＊)＊(\?[-\w$.+!＊&#x27;(),%;:@&amp;=]＊)?)?</span><br></pre></td></tr></table></figure>

<p>HTTP的完整Java表达式为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern HTTP_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;http://&quot;</span> + <span class="string">&quot;[-0-9a-zA-Z.]+&quot;</span> <span class="comment">//主机名</span></span><br><span class="line">        + <span class="string">&quot;(:\\d+)? &quot;</span> <span class="comment">//端口</span></span><br><span class="line">        + <span class="string">&quot;(&quot;</span> <span class="comment">//可选的路径和查询 - 开始</span></span><br><span class="line">            + <span class="string">&quot;/[-\\w$.+! ＊&#x27;(), %; :@&amp;=]＊&quot;</span> <span class="comment">//第一层路径</span></span><br><span class="line">            + <span class="string">&quot;(/[-\\w$.+! ＊&#x27;(), %; :@&amp;=]＊)＊&quot;</span> <span class="comment">//可选的其他层路径</span></span><br><span class="line">            + <span class="string">&quot;(\\? [-\\w$.+! ＊&#x27;(), %; :@&amp;=]＊)? &quot;</span> <span class="comment">//可选的查询字符串</span></span><br><span class="line">        + <span class="string">&quot;)? &quot;</span>); <span class="comment">//可选的路径和查询 - 结束</span></span><br></pre></td></tr></table></figure>

<h2 id="9-Email地址"><a href="#9-Email地址" class="headerlink" title="9. Email地址"></a>9. Email地址</h2><p>完整的Email规范比较复杂，定义在<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc822%EF%BC%8C%E6%88%91%E4%BB%AC%E5%85%88%E7%9C%8B%E4%B8%80%E4%BA%9B%E5%AE%9E%E9%99%85%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E3%80%82%E6%AF%94%E5%A6%82%E6%96%B0%E6%B5%AA%E9%82%AE%E7%AE%B1%EF%BC%9A">https://tools.ietf.org/html/rfc822，我们先看一些实际中常用的。比如新浪邮箱：</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abc@sina.com</span><br></pre></td></tr></table></figure>

<p>对于用户名部分，它的要求是：4～16个字符，可使用英文小写、数字、下画线，但下画线不能在首尾。怎么验证用户名呢？可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[a-z0-9][a-z0-9_]&#123;2,14&#125;[a-z0-9]</span><br></pre></td></tr></table></figure>

<p>新浪邮箱的完整Java表达式为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern SINA_EMAIL_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;[a-z0-9]&quot;</span></span><br><span class="line">        + <span class="string">&quot;[a-z0-9_]&#123;2,14&#125;&quot;</span></span><br><span class="line">        + <span class="string">&quot;[a-z0-9]@sina\\.com&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>我们再来看QQ邮箱，它对于用户名的要求为：</p>
<p>1）3～18个字符，可使用英文、数字、减号、点或下画线；<br>2）必须以英文字母开头，必须以英文字母或数字结尾；<br>3）点、减号、下画线不能连续出现两次或两次以上。</p>
<p>如果只有第1条，可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[-0-9a-zA-Z._]&#123;3,18&#125;</span><br></pre></td></tr></table></figure>

<p>为满足第2条，可以改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[a-zA-Z][-0-9a-zA-Z._]&#123;1,16&#125;[a-zA-Z0-9]</span><br></pre></td></tr></table></figure>

<p>怎么满足第3条呢？可以使用边界环视，左边加如下表达式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?![-0-9a-zA-Z._]＊(--|\.\.|__))</span><br></pre></td></tr></table></figure>

<p>完整表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(?![-0-9a-zA-Z._]＊(--|\.\.|__))[a-zA-Z][-0-9a-zA-Z._]&#123;1,16&#125;[a-zA-Z0-9]</span><br></pre></td></tr></table></figure>

<p>QQ邮箱的完整Java表达式为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern QQ_EMAIL_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="comment">//点、减号、下画线不能连续出现两次或两次以上</span></span><br><span class="line">        <span class="string">&quot;(? ! [-0-9a-zA-Z._]＊(--|\\.\\.|__))&quot;</span></span><br><span class="line">        + <span class="string">&quot;[a-zA-Z]&quot;</span> <span class="comment">//必须以英文字母开头</span></span><br><span class="line">        + <span class="string">&quot;[-0-9a-zA-Z._]&#123;1,16&#125;&quot;</span> <span class="comment">//3～18位 英文、数字、减号、点、下画线组成</span></span><br><span class="line">        + <span class="string">&quot;[a-zA-Z0-9]@qq\\.com&quot;</span>); <span class="comment">//由英文字母、数字结尾</span></span><br></pre></td></tr></table></figure>

<p>以上都是特定邮箱服务商的要求，一般的邮箱是什么规则呢？一般而言，以@作为分隔符，前面是用户名，后面是域名。用户名的一般规则是：</p>
<ul>
<li>由英文字母、数字、下画线、减号、点号组成；</li>
<li>至少1位，不超过64位；</li>
<li>开头不能是减号、点号和下画线。</li>
</ul>
<p>比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">h_llo-abc.good@example.com</span><br></pre></td></tr></table></figure>

<p>这个表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9a-zA-Z][-._0-9a-zA-Z]&#123;0,63&#125;</span><br></pre></td></tr></table></figure>

<p>域名部分以点号分隔为多个部分，至少有两个部分。最后一部分是顶级域名，由2～3个英文字母组成，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[a-zA-Z]&#123;2,3&#125;</span><br></pre></td></tr></table></figure>

<p>对于域名的其他点号分隔的部分，每个部分一般由字母、数字、减号组成，但减号不能在开头，长度不能超过63个字符，表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0-9a-zA-Z][-0-9a-zA-Z]&#123;0,62&#125;</span><br></pre></td></tr></table></figure>

<p>所以，域名部分的表达式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">([0-9a-zA-Z][-0-9a-zA-Z]&#123;0,62&#125;\.)+[a-zA-Z]&#123;2,3&#125;</span><br></pre></td></tr></table></figure>

<p>完整的Java表示为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern GENERAL_EMAIL_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;[0-9a-zA-Z][-._0-9a-zA-Z]&#123;0,63&#125;&quot;</span> <span class="comment">//用户名</span></span><br><span class="line">        + <span class="string">&quot;@&quot;</span></span><br><span class="line">        + <span class="string">&quot;([0-9a-zA-Z][-0-9a-zA-Z]&#123;0,62&#125;\\.)+&quot;</span> <span class="comment">//域名部分</span></span><br><span class="line">        + <span class="string">&quot;[a-zA-Z]&#123;2,3&#125;&quot;</span>); <span class="comment">//顶级域名</span></span><br></pre></td></tr></table></figure>

<h2 id="10．中文字符"><a href="#10．中文字符" class="headerlink" title="10．中文字符"></a>10．中文字符</h2><p>中文字符的Unicode编号一般位于\u4e00～\u9fff之间，所以匹配任意一个中文字符的表达式可以为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[\u4e00-\u9fff]</span><br></pre></td></tr></table></figure>

<p>Java表达式为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Pattern CHINESE_PATTERN = Pattern.compile(</span><br><span class="line">        <span class="string">&quot;[\\u4e00-\\u9fff]&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="11．小结"><a href="#11．小结" class="headerlink" title="11．小结"></a>11．小结</h2><p>本节详细讨论和分析了一些常见的正则表达式。在实际开发中，有些可以直接使用，有些需要根据具体文本和需求进行调整。完整的代码在Github上，地址为<a target="_blank" rel="noopener" href="https://github.com/swiftma/program-logic">https://github.com/swiftma/program-logic</a> ，位于包shuo.laoma.regex.c90下。</p>
<p>至此，关于正则表达式就介绍完了。下一章，我们探讨Java 8中的函数式编程。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/JavaReadingNotes/images/wechatpay.png" alt="蓝蓝 微信">
        <span>微信</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>蓝蓝
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://lanlan2017.github.io/JavaReadingNotes/938c6751/" title="25.4 剖析常见表达式">https://lanlan2017.github.io/JavaReadingNotes/938c6751/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/JavaReadingNotes/19f3346f/" rel="prev" title="26.5 Java 8的日期和时间API">
                  <i class="fa fa-chevron-left"></i> 26.5 Java 8的日期和时间API
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/JavaReadingNotes/cb2401c5/" rel="next" title="25.3 模板引擎">
                  25.3 模板引擎 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments" id="waline-comments"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">5.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">88:01</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/comments.js"></script><script src="/JavaReadingNotes/js/utils.js"></script><script src="/JavaReadingNotes/js/motion.js"></script><script src="/JavaReadingNotes/js/next-boot.js"></script><script src="/JavaReadingNotes/js/bookmark.js"></script><script src="/JavaReadingNotes/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/third-party/search/local-search.js"></script>



  <script src="/JavaReadingNotes/js/third-party/fancybox.js"></script>

  <script src="/JavaReadingNotes/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/JavaReadingNotes/js/third-party/math/mathjax.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://lanlan2017.github.io/JavaReadingNotes/938c6751/"}</script>
  <script src="/JavaReadingNotes/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":null,"enable":true,"serverURL":"https://waline-test-mzjszagu6-lanlan2017.vercel.app","placeholder":"填写您的邮箱以便接收回复提醒,填写您个人网站地址以便为您增加访问量","avatar":"mm","pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"meta":["nick","mail","link"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/JavaReadingNotes/938c6751/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
</body>
</html>
