<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/JavaReadingNotes/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/JavaReadingNotes/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/JavaReadingNotes/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/JavaReadingNotes/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/JavaReadingNotes/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lanlan2017.github.io","root":"/JavaReadingNotes/","images":"/JavaReadingNotes/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/JavaReadingNotes/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/JavaReadingNotes/js/config.js"></script>
<meta name="description" content="好好学习，天天向上">
<meta property="og:type" content="website">
<meta property="og:title" content="蓝蓝站点">
<meta property="og:url" content="https://lanlan2017.github.io/JavaReadingNotes/page/73/index.html">
<meta property="og:site_name" content="蓝蓝站点">
<meta property="og:description" content="好好学习，天天向上">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="蓝蓝">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lanlan2017.github.io/JavaReadingNotes/page/73/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/73/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>蓝蓝站点</title>
  

  <script src="/JavaReadingNotes/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?dadeb188eb14ccde0b25a19230c429b5"></script>


<link rel="dns-prefetch" href="https://waline-test-mzjszagu6-lanlan2017.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/JavaReadingNotes/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/JavaReadingNotes/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蓝蓝站点</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Java读书笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/JavaReadingNotes/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-dir"><a href="/JavaReadingNotes/dir/" rel="section"><i class="fa fa-sitemap fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-categories"><a href="/JavaReadingNotes/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/JavaReadingNotes/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-tags"><a href="/JavaReadingNotes/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="蓝蓝"
      src="/JavaReadingNotes/images/avatar.gif">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description">好好学习，天天向上</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/JavaReadingNotes/archives/">
          <span class="site-state-item-count">1871</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/JavaReadingNotes/categories/">
        <span class="site-state-item-count">626</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/todo/" title="todo → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;todo&#x2F;"><i class="fa fa-check-square fa-fw"></i>todo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/links/" title="links → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;links&#x2F;"><i class="fa fa-link fa-fw"></i>links</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/6b5d7181/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/6b5d7181/" class="post-title-link" itemprop="url">12.11.2 TableModel和监听器</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-24 04:43:28" itemprop="dateCreated datePublished" datetime="2020-02-24T04:43:28+08:00">2020-02-24</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-11-%E4%BD%BF%E7%94%A8JTable%E5%92%8CTableModel%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%A0%BC/" itemprop="url" rel="index"><span itemprop="name">12.11 使用JTable和TableModel创建表格</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/6b5d7181/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/6b5d7181/" data-xid="/JavaReadingNotes/6b5d7181/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>2.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-11-2-TableModel和监听器"><a href="#12-11-2-TableModel和监听器" class="headerlink" title="12.11.2 TableModel和监听器"></a>12.11.2 TableModel和监听器</h1><p>与<code>JList</code>、<code>JTree</code>类似的是,<code>JTable</code>采用了<code>TableModel</code>来保存表格中的所有状态数据;与<code>ListModel</code>类似的是,<code>TableModel</code>也不强制保存该表格显示的数据。虽然在前面程序中看到的是<strong>直接利用一个二维数组来创建<code>JTable</code>对象</strong>,但<strong>也可以通过<code>TableModel</code>对象来创建表格</strong>。</p>
<h2 id="使用TableModel创建表格"><a href="#使用TableModel创建表格" class="headerlink" title="使用TableModel创建表格"></a>使用TableModel创建表格</h2><p>如果需要利用<code>TableModel</code>来创建表格对象,则可以利用<code>Swing</code>提供的<code>AbstractTableModel</code>抽象类,该抽象类已经实现了<code>TableModel</code>接口里的大部分方法,程序只需要为该抽象类实现如下三个抽象方法即可。</p>
<ul>
<li><code>getColumnCount()</code>:返回该<code>TableModel</code>对象的列数量。</li>
<li><code>getRowCount()</code>:返回该<code>TableModel</code>对象的行数量。</li>
<li><code>getValueAt()</code>:返回指定行、指定列的单元格值。</li>
</ul>
<p>重写这三个方法后只是告诉<code>JTable</code>生成该表格所需的基本信息,如果想指定<code>JTable</code>生成表格的列名,还需要重写<code>getColumnName(int c)</code>方法,该方法返回一个字符串,该字符串将作为第<code>c+1</code>列的列名</p>
<h3 id="设置单元格内容可修改"><a href="#设置单元格内容可修改" class="headerlink" title="设置单元格内容可修改"></a>设置单元格内容可修改</h3><p>在默认情况下,<code>AbstractTableModel</code>的<code>boolean isCellEditable(int rowIndex, int columnIndex)</code>方法返回<code>false</code>,表明该表格的单元格处于不可编辑状态,如果想让用户直接修改单元格的内容,则需要重写该方法,并让该方法返回<code>true</code>。重写该方法后,只实现了界面上单元格的可编辑,如果需要控制实际的编辑操作,还需要重写该类的<code>void setValueAt(Object aValue, int rowIndex, int columnIndex)</code>方法。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>boolean isCellEditable(int rowIndex, int columnIndex)</code></td>
<td align="left">Returns false.</td>
</tr>
<tr>
<td align="left"><code>void setValueAt(Object aValue, int rowIndex, int columnIndex)</code></td>
<td align="left">This empty implementation is provided so users don’t have to implement this method if their data model is not editable.</td>
</tr>
</tbody></table>
<h2 id="TableModel典型应用-封装JDBCResultset"><a href="#TableModel典型应用-封装JDBCResultset" class="headerlink" title="TableModel典型应用 封装JDBCResultset"></a>TableModel典型应用 封装JDBCResultset</h2><p>关于<code>TableModel</code>的典型应用就是用于封装<code>JDBC</code>编程里的<code>Resultset</code>,程序可以利用<code>TableModel</code>来封装数据库査询得到的结果集,然后使用<code>JTable</code>把该结果集显示岀来。还可以允许用户直接编辑表格的单元格,当用户编辑完成后,程序将用户所做的修改写入数据库。</p>
<h2 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h2><p>下面程序简单实现了这种功能一当用户选择了指定的数据表后,程序将显示该数据表中的全部数据,用户可以直接在该表格内修改数据表的记录</p>
<p>上面程序的关键在于①号粗体字代码所扩展的<code>ResultsetTableModel</code>类,该类继承了<code>AbstractTableModel</code>父类,根据其<code>Resultset</code>来重写<code>getColumnCount</code>、<code>getRowCount</code>和<code>getValueAt</code>三个方法,从而允许该表格可以将该<code>Resultset</code>里的所有记录显示出来。除此之外,该扩展类还重写了<code>isCellEditabled</code>方式用来实现允许用户编辑单元格的功能,重写了<code>setValueAt</code>两个方法用来实现当用户编辑单元格时将所做的修改同步到数据库的功能。<br>程序中的粗体字代码使用<code>Resultset</code>创建了一个<code>TableModel</code>对象,并为该<code>TableModel</code>添加事件监听器,然后把该<code>TableModel</code>使用<code>JTable</code>显示出来。当用户修改该<code>JTable</code>对应表格里单元格的内容时,该监听器会检测到这种修改,并将这种修改信息通过下面的文本域显示出来<br>运行上面程序,会看到如图12.50所示的界面。<br>从图12.50中可以看出,当修改指定单元格的记录时,添加在<code>TableModel</code>上的监听器就会被触发。当修改<code>JTable</code>单元格里的内容时,底层数据表里的记录也会做出相应的改变。</p>
<h2 id="DefaultTableModel"><a href="#DefaultTableModel" class="headerlink" title="DefaultTableModel"></a>DefaultTableModel</h2><p>不仅用户可以扩展<code>AbstractTableModel</code>抽象类,<code>Swing</code>本身也为<code>AbstractTableModel</code>提供了一个<code>DefaultTableModel</code>实现类,程序可以通过使用<code>DefaultTableModel</code>实现类来创建<code>Table</code>对象。<strong>通过<code>DefaultTableModel</code>对象创建<code>JTable</code>对象后,就可以调用它提供的方法来添加数据行、插入数据行、删除数据行和移动数据行</strong>。<br><code>DefaultTableModel</code>提供了如下几个方法来控制数据行操作。</p>
<table>
<thead>
<tr>
<th align="left"><code>DefaultTableModel</code>控制数据行的方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>addColumn()</code></td>
<td align="left">该方法用于为<code>TableModel</code>增加一列,该方法有三个重载的版本,实际上该方法只是将原来隐藏的数据列显示出来。</td>
</tr>
<tr>
<td align="left"><code>addRow()</code></td>
<td align="left">该方法用于为<code>TableModel</code>增加一行,该方法有两个重载的版本</td>
</tr>
<tr>
<td align="left"><code>insertRow()</code></td>
<td align="left">该方法用于在<code>TableModel</code>的指定位置插入一行,该方法有两个重载的版本。</td>
</tr>
<tr>
<td align="left"><code>removeRow(int start, int end,int to)</code></td>
<td align="left">该方法用于移动<code>TableModel</code>中指定范围的数据行</td>
</tr>
</tbody></table>
<p>通过<code>DefaultTableModel</code>提供的这样几个方法,程序就可以动态地改变表格里的数据行</p>
<p><code>Swing</code>为<code>TableModel</code>提供了两个实现类,其中一个是<code>DefaultTableModel</code>,另一个是<code>JTable</code>的匿名内部类。</p>
<ul>
<li>如果直接使用二维数组来创建<code>JTable</code>对象,维护该<code>JTable</code>状态信息的<code>model</code>对象就是<code>JTable</code>匿名内部类的实例;</li>
<li>当使用<code>Vector</code>来创建<code>JTable</code>对象时,维护该<code>JTable</code>状态信息的<code>modl</code>对象就是<code>DefaultTableModel</code>实例</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/1de07e76/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/1de07e76/" class="post-title-link" itemprop="url">12.10.6 实现TreeCellRenderer改变节点外观</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-23 10:49:43" itemprop="dateCreated datePublished" datetime="2020-02-23T10:49:43+08:00">2020-02-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/1de07e76/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/1de07e76/" data-xid="/JavaReadingNotes/1de07e76/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-6-实现TreeCellRenderer改变节点外观"><a href="#12-10-6-实现TreeCellRenderer改变节点外观" class="headerlink" title="12.10.6 实现TreeCellRenderer改变节点外观"></a>12.10.6 实现TreeCellRenderer改变节点外观</h1><p>这种方式是最灵活的方式,程序实现<code>TreeCellRenderer</code>接口时同样需要实现<code>getTreeCellRendererComponent()</code>方法,该方法可以返回任意类型的组件,该组件将作为<code>JTree</code>的节点。通过这种方式可以最大程度地改变<code>JTree</code>的节点外观。<br>与前面实现<code>ListCellRenderer</code>接口类似的是,本实例程序同样通过扩展<code>JPanel</code>来实现<code>TreeCellRenderer</code>,实现<code>TreeCellRenderer</code>的方式与前面实现<code>ListCellRenderer</code>的方式基本相似,所以读者将会看到一个完全不同的<code>JTree</code></p>
<h2 id="程序-实现TreeCellRenderer改变节点外观"><a href="#程序-实现TreeCellRenderer改变节点外观" class="headerlink" title="程序 实现TreeCellRenderer改变节点外观"></a>程序 实现TreeCellRenderer改变节点外观</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomTreeNode</span> </span>&#123;</span><br><span class="line">    JFrame jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;定制树的节点&quot;</span>);</span><br><span class="line">    JTree tree;</span><br><span class="line">    <span class="comment">// 定义几个初始节点</span></span><br><span class="line">    DefaultMutableTreeNode friends = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;我的好友&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode qingzhao = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;李清照&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode suge = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;苏格拉底&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode libai = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;李白&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode nongyu = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;弄玉&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode hutou = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;虎头&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 通过add()方法建立树节点之间的父子关系</span></span><br><span class="line">        friends.add(qingzhao);</span><br><span class="line">        friends.add(suge);</span><br><span class="line">        friends.add(libai);</span><br><span class="line">        friends.add(nongyu);</span><br><span class="line">        friends.add(hutou);</span><br><span class="line">        <span class="comment">// 以根节点创建树</span></span><br><span class="line">        tree = <span class="keyword">new</span> JTree(friends);</span><br><span class="line">        <span class="comment">// 设置是否显示根节点的“展开/折叠”图标,默认是false</span></span><br><span class="line">        tree.setShowsRootHandles(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置节点是否可见,默认是true</span></span><br><span class="line">        tree.setRootVisible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置使用定制的节点绘制器</span></span><br><span class="line">        tree.setCellRenderer(<span class="keyword">new</span> ImageCellRenderer());</span><br><span class="line">        jf.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> CustomTreeNode().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现自己的节点绘制器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageCellRenderer</span> <span class="keyword">extends</span> <span class="title">JPanel</span> <span class="keyword">implements</span> <span class="title">TreeCellRenderer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ImageIcon icon;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 定义绘制单元格时的背景色</span></span><br><span class="line">    <span class="keyword">private</span> Color background;</span><br><span class="line">    <span class="comment">// 定义绘制单元格时的前景色</span></span><br><span class="line">    <span class="keyword">private</span> Color foreground;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Component <span class="title">getTreeCellRendererComponent</span><span class="params">(JTree tree, Object value, <span class="keyword">boolean</span> sel, <span class="keyword">boolean</span> expanded, <span class="keyword">boolean</span> leaf,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="keyword">int</span> row, <span class="keyword">boolean</span> hasFocus)</span> </span>&#123;</span><br><span class="line">        icon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/&quot;</span> + value + <span class="string">&quot;.gif&quot;</span>);</span><br><span class="line">        name = value.toString();</span><br><span class="line">        background = hasFocus ? <span class="keyword">new</span> Color(<span class="number">140</span>, <span class="number">200</span>, <span class="number">235</span>) : <span class="keyword">new</span> Color(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">        foreground = hasFocus ? <span class="keyword">new</span> Color(<span class="number">255</span>, <span class="number">255</span>, <span class="number">3</span>) : <span class="keyword">new</span> Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 返回该JPanel对象作为单元格绘制器</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重写paintComponent方法，改变JPanel的外观</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paintComponent</span><span class="params">(Graphics g)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> imageWidth = icon.getImage().getWidth(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">int</span> imageHeight = icon.getImage().getHeight(<span class="keyword">null</span>);</span><br><span class="line">        g.setColor(background);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight());</span><br><span class="line">        g.setColor(foreground);</span><br><span class="line">        <span class="comment">// 绘制好友图标</span></span><br><span class="line">        g.drawImage(icon.getImage(), getWidth() / <span class="number">2</span> - imageWidth / <span class="number">2</span>, <span class="number">10</span>, <span class="keyword">null</span>);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;SansSerif&quot;</span>, Font.BOLD, <span class="number">18</span>));</span><br><span class="line">        <span class="comment">// 绘制好友用户名</span></span><br><span class="line">        g.drawString(name, getWidth() / <span class="number">2</span> - name.length() * <span class="number">10</span>, imageHeight + <span class="number">30</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 通过该方法来设置该ImageCellRenderer的最佳大小</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dimension <span class="title">getPreferredSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Dimension(<span class="number">80</span>, <span class="number">80</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中的粗体字代码设置<code>JTree</code>对象使用定制的节点绘制器:<code>ImageCellRenderer</code>,该节点绘制器实现了<code>TreeCellRenderer</code>接口的<code>getTreeCellRendererComponent()</code>方法,该方法返回<code>thi</code>,也就是一个特殊的<code>JPanel</code>对象,这个特殊的<code>JPanel</code>重写了<code>paintComponent()</code>方法,重新绘制了<code>JPanel</code>的外观—根据节点数据来绘制图标和文本。运行上面程序,会看到如图12.46所示的树。</p>
<!-- CrazyJavaHandout4/Chapter12/12.10.6/1 -->
<p><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.6/1.png"><br>这看上去似乎不太像一棵树,但可从每个节点前的连接线、表示节点的展开/折叠的图标中看出这依然是一棵树。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/808b6434/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/808b6434/" class="post-title-link" itemprop="url">12.10.5 扩展DefaultTreeCellRenderer改变节点外观</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-23 10:17:23" itemprop="dateCreated datePublished" datetime="2020-02-23T10:17:23+08:00">2020-02-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/808b6434/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/808b6434/" data-xid="/JavaReadingNotes/808b6434/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-5-扩展DefaultTreeCellRenderer改变节点外观"><a href="#12-10-5-扩展DefaultTreeCellRenderer改变节点外观" class="headerlink" title="12.10.5 扩展DefaultTreeCellRenderer改变节点外观"></a>12.10.5 扩展DefaultTreeCellRenderer改变节点外观</h1><p><code>DefaultTreeCellRenderer</code>实现类实现了<code>TreeCellRenderer</code>接口,该接口里只有一个负责绘制<code>JTree</code>节点的<br><code>getTreeCellRendererComponent()</code>方法:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded, boolean leaf, int row, boolean hasFocus)</code></td>
<td align="left">Sets the value of the current tree cell to value.</td>
</tr>
</tbody></table>
<p>如果读者还记得前面介绍的绘制<code>JList</code>的列表项外观的内容,应该对该方法非常熟悉,与<code>Listcellrenderer</code>接口类似的是,<code>getTreeCellRendererComponent()</code>方法返回一个<code>Component</code>对象,该对象就是<code>JTree</code>的节点组件。<br><code>DefaultTreeCellRenderer</code>类继承了<code>JLabel</code>,实现<code>getTreeCellRendererComponent</code>方法时返回<code>this</code>,即返回一个特殊的<code>JLabel</code>对象。如果需要根据节点内容来改变节点的外观,则可以再次扩展<code>DefaultTreeCellRenderer</code>类,并再次重写它提供的<code>getTreeCellRendererComponent</code>方法。</p>
<h2 id="程序-数据库对象导航树"><a href="#程序-数据库对象导航树" class="headerlink" title="程序 数据库对象导航树"></a>程序 数据库对象导航树</h2><p>下面程序模拟了一个数据库对象导航树,程序可以根据节点的类型来绘制节点的图标。在本程序中为了给每个节点指定节点类型,程序不再使用<code>String</code>作为节点数据,而是使用<code>NodeData</code>来封装节点数据,并重写了<code>NodeData</code>的<code>toString</code>方法。</p>
<p>使用<code>Object</code>类型的对象来创建<code>TreeNode</code>对象时,<code>DefaultTreeCellRenderer</code>默认使用该对象的<code>toString</code>方法返回的字符串作为该节点的标签。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtendsDefaultTreeCellRenderer</span> </span>&#123;</span><br><span class="line">    JFrame jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;根据节点类型定义图标&quot;</span>);</span><br><span class="line">    JTree tree;</span><br><span class="line">    <span class="comment">// 定义几个初始节点</span></span><br><span class="line">    DefaultMutableTreeNode root = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.ROOT, <span class="string">&quot;数据库导航&quot;</span>));</span><br><span class="line">    DefaultMutableTreeNode salaryDb = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.DATABASE, <span class="string">&quot;公司工资数据库&quot;</span>));</span><br><span class="line">    DefaultMutableTreeNode customerDb = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.DATABASE, <span class="string">&quot;公司客户数据库&quot;</span>));</span><br><span class="line">    <span class="comment">// 定义salaryDb的两个子节点</span></span><br><span class="line">    DefaultMutableTreeNode employee = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.TABLE, <span class="string">&quot;员工表&quot;</span>));</span><br><span class="line">    DefaultMutableTreeNode attend = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.TABLE, <span class="string">&quot;考勤表&quot;</span>));</span><br><span class="line">    <span class="comment">// 定义customerDb的一个子节点</span></span><br><span class="line">    DefaultMutableTreeNode contact = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.TABLE, <span class="string">&quot;联系方式表&quot;</span>));</span><br><span class="line">    <span class="comment">// 定义employee的三个子节点</span></span><br><span class="line">    DefaultMutableTreeNode id = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.INDEX, <span class="string">&quot;员工ID&quot;</span>));</span><br><span class="line">    DefaultMutableTreeNode name = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.COLUMN, <span class="string">&quot;姓名&quot;</span>));</span><br><span class="line">    DefaultMutableTreeNode gender = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="keyword">new</span> NodeData(DBObjectType.COLUMN, <span class="string">&quot;性别&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 通过add()方法建立树节点之间的父子关系</span></span><br><span class="line">        root.add(salaryDb);</span><br><span class="line">        root.add(customerDb);</span><br><span class="line">        salaryDb.add(employee);</span><br><span class="line">        salaryDb.add(attend);</span><br><span class="line">        customerDb.add(contact);</span><br><span class="line">        employee.add(id);</span><br><span class="line">        employee.add(name);</span><br><span class="line">        employee.add(gender);</span><br><span class="line">        <span class="comment">// 以根节点创建树</span></span><br><span class="line">        tree = <span class="keyword">new</span> JTree(root);</span><br><span class="line">        <span class="comment">// 设置该JTree使用自定义的节点绘制器</span></span><br><span class="line">        tree.setCellRenderer(<span class="keyword">new</span> MyRenderer());</span><br><span class="line">        <span class="comment">// 设置是否显示根节点的“展开/折叠”图标,默认是false</span></span><br><span class="line">        tree.setShowsRootHandles(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置节点是否可见,默认是true</span></span><br><span class="line">        tree.setRootVisible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 设置使用Windows风格外观</span></span><br><span class="line">            UIManager.setLookAndFeel(<span class="string">&quot;com.sun.java.swing.plaf.&quot;</span> + <span class="string">&quot;windows.WindowsLookAndFeel&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 更新JTree的UI外观</span></span><br><span class="line">        SwingUtilities.updateComponentTreeUI(tree);</span><br><span class="line">        jf.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ExtendsDefaultTreeCellRenderer().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个NodeData类，用于封装节点数据</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NodeData</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> nodeType;</span><br><span class="line">    <span class="keyword">public</span> String nodeData;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NodeData</span><span class="params">(<span class="keyword">int</span> nodeType, String nodeData)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.nodeType = nodeType;</span><br><span class="line">        <span class="keyword">this</span>.nodeData = nodeData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> nodeData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个接口，该接口里包含数据库对象类型的常量</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">DBObjectType</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ROOT = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> DATABASE = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> TABLE = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> COLUMN = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> INDEX = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRenderer</span> <span class="keyword">extends</span> <span class="title">DefaultTreeCellRenderer</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 初始化5个图标</span></span><br><span class="line">    ImageIcon rootIcon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/root.gif&quot;</span>);</span><br><span class="line">    ImageIcon databaseIcon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/database.gif&quot;</span>);</span><br><span class="line">    ImageIcon tableIcon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/table.gif&quot;</span>);</span><br><span class="line">    ImageIcon columnIcon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/column.gif&quot;</span>);</span><br><span class="line">    ImageIcon indexIcon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/index.gif&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Component <span class="title">getTreeCellRendererComponent</span><span class="params">(JTree tree, Object value, <span class="keyword">boolean</span> sel, <span class="keyword">boolean</span> expanded, <span class="keyword">boolean</span> leaf,</span></span></span><br><span class="line"><span class="params"><span class="function">            <span class="keyword">int</span> row, <span class="keyword">boolean</span> hasFocus)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 执行父类默认的节点绘制操作</span></span><br><span class="line">        <span class="keyword">super</span>.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);</span><br><span class="line">        DefaultMutableTreeNode node = (DefaultMutableTreeNode) value;</span><br><span class="line">        NodeData data = (NodeData) node.getUserObject();</span><br><span class="line">        <span class="comment">// 根据数据节点里的nodeType数据决定节点图标</span></span><br><span class="line">        ImageIcon icon = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (data.nodeType) &#123;</span><br><span class="line">            <span class="keyword">case</span> DBObjectType.ROOT:</span><br><span class="line">                icon = rootIcon;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DBObjectType.DATABASE:</span><br><span class="line">                icon = databaseIcon;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DBObjectType.TABLE:</span><br><span class="line">                icon = tableIcon;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DBObjectType.COLUMN:</span><br><span class="line">                icon = columnIcon;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DBObjectType.INDEX:</span><br><span class="line">                icon = indexIcon;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 改变图标</span></span><br><span class="line">        <span class="keyword">this</span>.setIcon(icon);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面的程序中码强制<code>JTree</code>使用自定义的节点绘制器:<code>MyRenderer</code>,该节点绘制器继承了<code>DefaultTreeCellRenderer</code>类,并重写了<code>getTreeCellRendererComponent()</code>方法。该节点绘制器重写该节点时根据节点的<code>nodeType</code>属性改变其图标。运行上面程序,会看到如图12.45所示的效果。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.5/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.10.5/1 -->
<p>从图12.45中可以看出,<code>JTree</code>中表示节点展开、折叠的图标已经改为了“+”和“-”,这是因为本程序强制<code>JTree</code>使用了<code>Windows</code>风格。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/f80836b6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/f80836b6/" class="post-title-link" itemprop="url">12.10.4 使用DefaultTreeCellRenderer改变节点外观</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-17 07:26:16" itemprop="dateCreated datePublished" datetime="2020-02-17T07:26:16+08:00">2020-02-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/f80836b6/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/f80836b6/" data-xid="/JavaReadingNotes/f80836b6/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-4-使用DefaultTreeCellRenderer改变节点外观"><a href="#12-10-4-使用DefaultTreeCellRenderer改变节点外观" class="headerlink" title="12.10.4 使用DefaultTreeCellRenderer改变节点外观"></a>12.10.4 使用DefaultTreeCellRenderer改变节点外观</h1><p>对比图12.38和图12.41所示的两棵树,不难发现图12.38所示的树更美观,因为图12.38所示的树节点的图标非常丰富,而图12.41所示的树节点的图标太过于单一<br>实际上,<code>JTree</code>也可以改变树节点的外观,包括改变节点的图标、字体等,甚至可以自由绘制节点外观。为了改变树节点的外观,可以通过为树指定自己的<code>CellRenderer</code>来实现,<code>JTree</code>默认使用<code>DefaultTreeCelIRenderer</code>来绘制每个节点。<code>DefaultTreeCellRenderer</code>是<code>JLabel</code>的子类,该<code>JLabel</code>包含了该节点的图标和文本。</p>
<h2 id="如何改变树节点的外观样式"><a href="#如何改变树节点的外观样式" class="headerlink" title="如何改变树节点的外观样式"></a>如何改变树节点的外观样式</h2><p>改变树节点的外观样式,可以有如下三种方式。</p>
<ol>
<li>使用<code>DefaultTreeCellRenderer</code>直接改变节点的外观,这种方式可以改变整棵树所有节点的字体颜色和图标</li>
<li>为<code>JTree</code>指定<code>DefaultTreeCellRenderer</code>的扩展类对象作为<code>JTree</code>的节点绘制器,该绘制器负责为不同节点使用不同的字体、颜色和图标。通常使用这种方式来改变节点的外观。</li>
<li>为<code>JTree</code>指定一个实现<code>TreeCellRenderer</code>接口的节点绘制器,该绘制器可以为不同的节点自由绘制任意内容,这是最复杂但最灵活的节点绘制器。</li>
</ol>
<h3 id="使用DefaultTreeCellRenderer直接改变节点的外观"><a href="#使用DefaultTreeCellRenderer直接改变节点的外观" class="headerlink" title="使用DefaultTreeCellRenderer直接改变节点的外观"></a>使用<code>DefaultTreeCellRenderer</code>直接改变节点的外观</h3><p>第一种方式最简单,但灵活性最差,因为它会改变整棵树所有节点的外观。在这种情况下,<code>JTree</code>的所有节点依然使用相同的图标,相当于整体替换了<code>JTree</code>中节点的所有默认图标。用户指定的节点图标未必就比<code>JTree</code>默认的图标美观。</p>
<p><code>DefaultTreeCellRenderer</code>提供了如下几个方法来修改节点的外观</p>
<ul>
<li><code>setBackgroundNonSelectionColor(ColorNewColor</code>:设置用于非选定节点的背景颜色。</li>
<li><code>setBackgroundSelection Color( Color new Color)</code>:设置节点在选中状态下的背景颜色。</li>
<li><code>set Selection Color( Color newColor)</code>:设置选中状态下节点的边框颜色。</li>
<li><code>setclosedIcon( Icon newIcon)</code>:设置处于折叠状态下非叶子节点的图标。</li>
<li><code>setFont( Font font)</code>:设置节点文本的字体。</li>
<li><code>setleaficon( Icon newSon)</code>:设置叶子节点的图标。</li>
<li><code>setOpenIcon( con newson)</code>:设置处于展开状态下非叶子节点的图标。</li>
<li><code>settextNon Selection color( Color new Color)</code>:设置绘制非选中状态下节点文本的颜色</li>
<li><code>set TextSelection Color( Color new Color)</code>:设置绘制选中状态下节点文本的颜色</li>
</ul>
<h2 id="程序-直接使用DefaultTreeCellRenderer来改变树节点的外观"><a href="#程序-直接使用DefaultTreeCellRenderer来改变树节点的外观" class="headerlink" title="程序 直接使用DefaultTreeCellRenderer来改变树节点的外观"></a>程序 直接使用<code>DefaultTreeCellRenderer</code>来改变树节点的外观</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChangeAllCellRender</span> </span>&#123;</span><br><span class="line">    JFrame jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;改变所有节点的外观&quot;</span>);</span><br><span class="line">    JTree tree;</span><br><span class="line">    <span class="comment">// 定义几个初始节点</span></span><br><span class="line">    DefaultMutableTreeNode root = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangdong = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangxi = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广西&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode foshan = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;佛山&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode shantou = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;汕头&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guilin = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;桂林&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode nanning = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;南宁&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 通过add()方法建立树节点之间的父子关系</span></span><br><span class="line">        guangdong.add(foshan);</span><br><span class="line">        guangdong.add(shantou);</span><br><span class="line">        guangxi.add(guilin);</span><br><span class="line">        guangxi.add(nanning);</span><br><span class="line">        root.add(guangdong);</span><br><span class="line">        root.add(guangxi);</span><br><span class="line">        <span class="comment">// 以根节点创建树</span></span><br><span class="line">        tree = <span class="keyword">new</span> JTree(root);</span><br><span class="line">        <span class="comment">// 创建一个DefaultTreeCellRender对象</span></span><br><span class="line">        DefaultTreeCellRenderer cellRender = <span class="keyword">new</span> DefaultTreeCellRenderer();</span><br><span class="line">        <span class="comment">// 设置非选定节点的背景色。</span></span><br><span class="line">        cellRender.setBackgroundNonSelectionColor(<span class="keyword">new</span> Color(<span class="number">220</span>, <span class="number">220</span>, <span class="number">220</span>));</span><br><span class="line">        <span class="comment">// 设置节点在选中状态下的背景颜色。</span></span><br><span class="line">        cellRender.setBackgroundSelectionColor(<span class="keyword">new</span> Color(<span class="number">140</span>, <span class="number">140</span>, <span class="number">140</span>));</span><br><span class="line">        <span class="comment">// 设置选中状态下节点的边框颜色。</span></span><br><span class="line">        cellRender.setBorderSelectionColor(Color.BLACK);</span><br><span class="line">        <span class="comment">// 设置处于折叠状态下非叶子节点的图标。</span></span><br><span class="line">        cellRender.setClosedIcon(<span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/close.gif&quot;</span>));</span><br><span class="line">        <span class="comment">// 设置节点文本的字体。</span></span><br><span class="line">        cellRender.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;SansSerif&quot;</span>, Font.BOLD, <span class="number">16</span>));</span><br><span class="line">        <span class="comment">// 设置叶子节点的图标。</span></span><br><span class="line">        cellRender.setLeafIcon(<span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/leaf.png&quot;</span>));</span><br><span class="line">        <span class="comment">// 设置处于展开状态下非叶子节点的图标。</span></span><br><span class="line">        cellRender.setOpenIcon(<span class="keyword">new</span> ImageIcon(<span class="string">&quot;icon/open.gif&quot;</span>));</span><br><span class="line">        <span class="comment">// 设置绘制非选中状态下节点文本的颜色。</span></span><br><span class="line">        cellRender.setTextNonSelectionColor(<span class="keyword">new</span> Color(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        <span class="comment">// 设置绘制选中状态下节点文本的颜色。</span></span><br><span class="line">        cellRender.setTextSelectionColor(<span class="keyword">new</span> Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>));</span><br><span class="line">        tree.setCellRenderer(cellRender);</span><br><span class="line">        <span class="comment">// 设置是否显示根节点的“展开/折叠”图标,默认是false</span></span><br><span class="line">        tree.setShowsRootHandles(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置节点是否可见,默认是true</span></span><br><span class="line">        tree.setRootVisible(<span class="keyword">true</span>);</span><br><span class="line">        jf.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ChangeAllCellRender().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中的粗体字代码创建了一个<code>DefaultTreeCellRenderer</code>对象,并通过该对象改变了<code>JTree</code>中所有节点的字体、颜色和图标。运行上面程序,会看到如图12.44所示的效果。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.4/1.png"><br>从图12.44中可以看出,<code>JTree</code>中的所有节点全部被改变了,相当于完全替代了<code>JTree</code>中所有节点的默认图标、字体和颜色。但所有的叶子节点依然保持相同的外观,所有的非叶子节点也保持相同的外观。这种改变依然不能满足更复杂的需求,例如,<strong>如果需要不同类型的节点呈现出不同的外观,则不能直接使用<code>DefaultTreeCellRenderer</code>来改变节点的外观,可以采用扩展<code>DefaultTreeCellrenderer</code>的方式来实现该需求</strong>。</p>
<h2 id="如何修改展开折叠图标"><a href="#如何修改展开折叠图标" class="headerlink" title="如何修改展开折叠图标"></a>如何修改展开折叠图标</h2><p>不要试图通过<code>TreeCellRenderer</code>来改变表示节点展开/折叠的图标,因为该图标是由<code>Metal</code>风格决定的。如果需要改变该图标,则可以考虑改变该<code>JTree</code>的外观风格</p>
<!-- CrazyJavaHandout4/Chapter12/12.10.4/1 -->

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/55c896e2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/55c896e2/" class="post-title-link" itemprop="url">12.10.3 监听节点事件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-17 06:27:24" itemprop="dateCreated datePublished" datetime="2020-02-17T06:27:24+08:00">2020-02-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/55c896e2/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/55c896e2/" data-xid="/JavaReadingNotes/55c896e2/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-3-监听节点事件"><a href="#12-10-3-监听节点事件" class="headerlink" title="12.10.3 监听节点事件"></a>12.10.3 监听节点事件</h1><p><code>JTree</code>专门提供了一个<code>TreeSelectionModel</code>对象来保存该<code>JTree</code>选中状态的信息。也就是说,<strong><code>JTree</code>组件背后隐藏了两个<code>model</code>对象,其中<code>TreeModel</code>用于保存该<code>JTree</code>的所有节点数据,而<code>TreeSelectionModel</code>用于保存该<code>JTree</code>的所有选中状态的信息</strong></p>
<h2 id="TreeSelectionModel"><a href="#TreeSelectionModel" class="headerlink" title="TreeSelectionModel"></a>TreeSelectionModel</h2><p>对于大部分开发者而言,无须关心<code>TreeSelectionModel</code>的存在,程序可以通过<code>JTree</code>提供的<code>getSelectionPath()</code>方法和<code>getSelectionPaths</code>方法来获取该<code>JTree</code>被选中的<code>TreePath</code>,但实际上这两个方法底层实现依然依赖于<code>TreeSelectionModel</code>,只是普通开发者一般无须关心这些底层细节而已。</p>
<h2 id="改变JTree的选择模式"><a href="#改变JTree的选择模式" class="headerlink" title="改变JTree的选择模式"></a>改变JTree的选择模式</h2><p>程序可以改变<code>JTree</code>的选择模式,但必须先获取该<code>JTree</code>对应的<code>TreeSelectionModel</code>对象,再调用该对象的<code>setSelectionModel()</code>方法来设置该<code>JTree</code>的选择模式。<code>setSelectionMode</code>方法支持如下三个参数。</p>
<ul>
<li><code>TreeSelectionModel_CONTIGUOUS_TREE_SELECTION</code>:可以连续选中多个<code>TreePath</code></li>
<li><code>TreeSelectionModel_DISCONTIGUOUS_TREE_SELECTION</code>:该选项对于选择没有任何限制。</li>
<li><code>TreeSelectionModel_DISCONTIGUOUS_TREE_SELECTION</code>:每次只能选择一个<code>TreePath</code></li>
</ul>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void setSelectionMode(int mode)</code></td>
<td align="left">Sets the selection model, which must be one of SINGLE_TREE_SELECTION, CONTIGUOUS_TREE_SELECTION or DISCONTIGUOUS_TREE_SELECTION.</td>
</tr>
</tbody></table>
<p>与<code>JList</code>操作类似,按下Ctrl辅助键,用于添加选中多个<code>JTree</code>节点:按下<code>Shift</code>辅助键,用于选择连续区域里的所有<code>JTree</code>节点。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void addTreeExpansionListener(TreeExpansionListener tel)</code></td>
<td align="left">添加树节点展开/折叠事件的监听器</td>
</tr>
<tr>
<td align="left"><code>void addTreeSelectionListener(TreeSelectionListener tsl)</code></td>
<td align="left">添加树节点选择事件的监听器</td>
</tr>
</tbody></table>
<h2 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h2><p>下面程序设置<code>JTree</code>只能选择单个<code>TreePath</code>,并为节点选择事件添加事件监听器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelectJTree</span> </span>&#123;</span><br><span class="line">    JFrame jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;监听树的选择事件&quot;</span>);</span><br><span class="line">    JTree tree;</span><br><span class="line">    <span class="comment">// 定义几个初始节点</span></span><br><span class="line">    DefaultMutableTreeNode root = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangdong = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangxi = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广西&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode foshan = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;佛山&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode shantou = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;汕头&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guilin = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;桂林&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode nanning = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;南宁&quot;</span>);</span><br><span class="line">    JTextArea eventTxt = <span class="keyword">new</span> JTextArea(<span class="number">5</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 通过add()方法建立树节点之间的父子关系</span></span><br><span class="line">        guangdong.add(foshan);</span><br><span class="line">        guangdong.add(shantou);</span><br><span class="line">        guangxi.add(guilin);</span><br><span class="line">        guangxi.add(nanning);</span><br><span class="line">        root.add(guangdong);</span><br><span class="line">        root.add(guangxi);</span><br><span class="line">        <span class="comment">// 以根节点创建树</span></span><br><span class="line">        tree = <span class="keyword">new</span> JTree(root);</span><br><span class="line">        <span class="comment">// 设置只能选择一个TreePath</span></span><br><span class="line">        tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);</span><br><span class="line">        <span class="comment">// 添加监听树节点选择事件的监听器</span></span><br><span class="line">        <span class="comment">// 当JTree中被选择节点发生改变时，将触发该方法</span></span><br><span class="line">        tree.addTreeSelectionListener(e -&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (e.getOldLeadSelectionPath() != <span class="keyword">null</span>)</span><br><span class="line">                eventTxt.append(<span class="string">&quot;原选中的节点路径：&quot;</span> + e.getOldLeadSelectionPath().toString() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            eventTxt.append(<span class="string">&quot;新选中的节点路径：&quot;</span> + e.getNewLeadSelectionPath().toString() + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 设置是否显示根节点的“展开/折叠”图标,默认是false</span></span><br><span class="line">        tree.setShowsRootHandles(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 设置根节点是否可见,默认是true</span></span><br><span class="line">        tree.setRootVisible(<span class="keyword">true</span>);</span><br><span class="line">        Box box = <span class="keyword">new</span> Box(BoxLayout.X_AXIS);</span><br><span class="line">        box.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        box.add(<span class="keyword">new</span> JScrollPane(eventTxt));</span><br><span class="line">        jf.add(box);</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SelectJTree().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中设置了该<code>JTree</code>对象采用<code>SINGLE_TREE_SELECTION</code>选择模式,即每次只能选中该<code>JTree</code>的一个<code>TreePath</code>。第二段粗体字代码为该<code>JTree</code>添加了个节点选择事件的监听器,当该<code>JTre</code>中被选择节点发生改变时,该监听器就会被触发。运行上面程序,会看到如图12.43所示的效<br>果。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.3/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.10.3/ -->
<p>不要通过监听鼠标事件来监听所选节点的变化,因为<code>JTree</code>中节点的选择完全可以通过键盘来操作,不通过鼠标单击亦可</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/bca8ecf9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/bca8ecf9/" class="post-title-link" itemprop="url">12.10.2 拖动 编辑树节点</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-17 05:36:46" itemprop="dateCreated datePublished" datetime="2020-02-17T05:36:46+08:00">2020-02-17</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/bca8ecf9/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/bca8ecf9/" data-xid="/JavaReadingNotes/bca8ecf9/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>7.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>7 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-2-拖动-编辑树节点"><a href="#12-10-2-拖动-编辑树节点" class="headerlink" title="12.10.2 拖动 编辑树节点"></a>12.10.2 拖动 编辑树节点</h1><h2 id="JTree默认不可编辑"><a href="#JTree默认不可编辑" class="headerlink" title="JTree默认不可编辑"></a>JTree默认不可编辑</h2><p><code>JTree</code>生成的树默认是不可编辑的,不可以添加、删除节点,也不可以改变节点数据;<br>如果想让某个<code>JTree</code>对象变成可编辑状态,则可以调用<code>JTree</code>的<code>setEditable(boolean b)</code>方法,传入<code>true</code>即可把这棵树变成可编辑的树(可以添加、删除节点,也可以改变节点数据)。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void setEditable(boolean flag)</code></td>
<td align="left">Determines whether the tree is editable.</td>
</tr>
</tbody></table>
<p>一旦将<code>JTree</code>对象设置成可编辑状态后,程序就可以为指定节点添加子节点、兄弟节点,也可以修改、删除指定节点。<br>前面简单提到过,<code>JTree</code>处理节点有两种方式:</p>
<ul>
<li>一种是根据<code>TreePath</code>;</li>
<li>另一种是根据节点的行号.</li>
</ul>
<p>所有<code>JTree</code>显示的节点都有一个唯一的行号(从0开始)。只有那些被显示出来的节点才有行号,这就带来一个潜在的问题:<br><strong>如果该节点之前的节点被展开、折叠或增加、删除后,那么该节点的行号就会发生变化,因此通过行号来识别节点可能有一些不确定的地方</strong>;相反,使用<code>TreePath</code>来识别节点则会更加稳定。</p>
<p>可以使用文件系统来类比<code>JTree</code>,从图12.38中可以看出,实际上<strong>所有的文件系统都采用树状结构</strong>,其中</p>
<ul>
<li><code>Windows</code>的文件系统是森林,因为<code>Windows</code>包含C、D等多个根路径,</li>
<li><code>UNIX</code>、<code>Linux</code>的文件系统是一棵树,只有一个根路径。</li>
</ul>
<p>如果直接给岀<code>abc</code>文件夹(类似于<code>JTree</code>中的节点),系统不能准确地定位该路径;<br>如果给出<code>D:\xyz\abc</code>,系统就可以准确地定位到该路径,这个<code>D:\xyz\abc</code>实际上由三个文件夹组成:<code>D:</code>、<code>xyz</code>、<code>abc</code>,其中<code>D:</code>是该路径的根路径。类似地,<code>TreePath</code>也采用这种方式来唯地标识节点。</p>
<p><code>TreePath</code>保持着从根节点到指定节点的所有节点,<strong><code>TreePath</code>由一系列节点组成</strong>,而不是单独的一个节点。</p>
<h2 id="获取被选中的节点"><a href="#获取被选中的节点" class="headerlink" title="获取被选中的节点"></a>获取被选中的节点</h2><p><code>JTree</code>的很多方法都用于返回一个<code>TreePath</code>对象,当程序得到一个<code>TreePath</code>后,可以调用<code>TreePath</code>的<code>getLastPathComponent​</code>方法获取最后一个节点</p>
<p>例如：需要获得<code>JTree</code>中被选定的节点,则可以通过如下两行代码来实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取选中节点所在的 Treepath</span></span><br><span class="line">TreePath path = tree.getselectionPath();</span><br><span class="line"><span class="comment">//获取指定 Treepath的最后一个节点</span></span><br><span class="line">TreeNode target = (TreeNode) path.getLastPathcomponent();</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left"><code>TreePath</code>方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Object getLastPathComponent()</code></td>
<td align="left">Returns the last element of this path.</td>
</tr>
</tbody></table>
<h2 id="获取选中的节点"><a href="#获取选中的节点" class="headerlink" title="获取选中的节点"></a>获取选中的节点</h2><p>又因为<code>JTree</code>经常需要查询被选中的节点,所以<code>JTree</code>提供了一个<code>getLastSelectedPathComponent</code>方法来获取选中的节点。<br>比如采用下面代码也可以获取选中的节点。</p>
<table>
<thead>
<tr>
<th align="left"><code>JTree</code>方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Object getLastSelectedPathComponent()</code></td>
<td align="left">Returns the last path component of the selected path.</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取选中的节点</span></span><br><span class="line">TreeNode target =(TreeNode) tree.getLastselectedPathComponent();</span><br></pre></td></tr></table></figure>
<p>可能有读者对上面这行代码感到奇怪,<code>getLastSelectedPathComponent()</code>方法返回的不是<code>TreeNode</code>吗?<code>getLastSelectedPathComponent</code>方法返回的不一定是<code>TreeNode</code>,该方法的返回值是<code>Object</code>。因为<code>Swing</code>把<code>JTree</code>设计得非常复杂,<code>JTree</code>把所有的状态数据都交给<code>TreeModel</code>管理,而<code>JTree</code>本身并没有与<code>TreeNode</code>发生关联(从图12.40可以看出这一点),只是因为<code>DefaultTreeModel</code>需要<code>TreeNode</code>而已,如果开发者自己提供一个<code>TreeModel</code>实现类,这个<code>TreeModel</code>实现类完全可以与<code>TreeNode</code>没有任何关系。当然,对于大部分<code>Swing</code>开发者而言,无须理会<code>JTree</code>的这些过于复杂的设计。</p>
<h2 id="TreeNode转成TreePath"><a href="#TreeNode转成TreePath" class="headerlink" title="TreeNode转成TreePath"></a>TreeNode转成TreePath</h2><p>如果已经有了从根节点到当前节点的一系列节点所组成的节点数组,也可以通过<code>TreePath</code>提供的构造器将这些节点转换成<code>TreePath</code>对象,如下代码所示。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将一个节点数组转换成 Treepath对象</span></span><br><span class="line">TreePath tp = <span class="keyword">new</span> TreePath(nodes);</span><br></pre></td></tr></table></figure>
<p>获取了选中的节点之后,即可通过<code>DefaultTreeModel</code>(它是<code>Swing</code>为<code>TreeModel</code>提供的唯一一个实现类)提供的系列方法来插入、删除节点。<code>DefaultTreeModel</code>类有一个非常优秀的设计,当使用<code>DefaultTreeModel</code>插入、删除节点后,该<code>DefaultTreeModel</code>会自动通知对应的<code>JTree</code>重绘所有节点,用户可以立即看到程序所做的修改</p>
<p>也可以直接通过<code>TreeNode</code>提供的方法来添加、删除和修改节点。</p>
<p>但通过<code>TreeNode</code>改变节点时,程序必须显式调用<code>JTree</code>的<code>updateUI()</code>通知<code>JTree</code>重绘所有节点,让用户看到程序所做的修改。</p>
<h2 id="程序-增加-修改-删除节点-拖动节点"><a href="#程序-增加-修改-删除节点-拖动节点" class="headerlink" title="程序 增加 修改 删除节点 拖动节点"></a>程序 增加 修改 删除节点 拖动节点</h2><p>下面程序实现了增加、修改和删除节点的功能,并允许用户通过拖动将一个节点变成另一个节点的子节点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EditJTree</span> </span>&#123;</span><br><span class="line">    JFrame jf;</span><br><span class="line">    JTree tree;</span><br><span class="line">    <span class="comment">// 上面JTree对象对应的model</span></span><br><span class="line">    DefaultTreeModel model;</span><br><span class="line">    <span class="comment">// 定义几个初始节点</span></span><br><span class="line">    DefaultMutableTreeNode root = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangdong = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guangxi = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广西&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode foshan = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;佛山&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode shantou = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;汕头&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode guilin = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;桂林&quot;</span>);</span><br><span class="line">    DefaultMutableTreeNode nanning = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;南宁&quot;</span>);</span><br><span class="line">    <span class="comment">// 定义需要被拖动的TreePath</span></span><br><span class="line">    TreePath movePath;</span><br><span class="line">    JButton addSiblingButton = <span class="keyword">new</span> JButton(<span class="string">&quot;添加兄弟节点&quot;</span>);</span><br><span class="line">    JButton addChildButton = <span class="keyword">new</span> JButton(<span class="string">&quot;添加子节点&quot;</span>);</span><br><span class="line">    JButton deleteButton = <span class="keyword">new</span> JButton(<span class="string">&quot;删除节点&quot;</span>);</span><br><span class="line">    JButton editButton = <span class="keyword">new</span> JButton(<span class="string">&quot;编辑当前节点&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        guangdong.add(foshan);</span><br><span class="line">        guangdong.add(shantou);</span><br><span class="line">        guangxi.add(guilin);</span><br><span class="line">        guangxi.add(nanning);</span><br><span class="line">        root.add(guangdong);</span><br><span class="line">        root.add(guangxi);</span><br><span class="line">        jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;可编辑节点的树&quot;</span>);</span><br><span class="line">        tree = <span class="keyword">new</span> JTree(root);</span><br><span class="line">        <span class="comment">// 获取JTree对应的TreeModel对象</span></span><br><span class="line">        model = (DefaultTreeModel) tree.getModel();</span><br><span class="line">        <span class="comment">// 设置JTree可编辑</span></span><br><span class="line">        tree.setEditable(<span class="keyword">true</span>);</span><br><span class="line">        MouseListener ml = <span class="keyword">new</span> MouseAdapter() &#123;</span><br><span class="line">            <span class="comment">// 按下鼠标时获得被拖动的节点</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mousePressed</span><span class="params">(MouseEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 如果需要唯一确定某个节点，必须通过TreePath来获取。</span></span><br><span class="line">                TreePath tp = tree.getPathForLocation(e.getX(), e.getY());</span><br><span class="line">                <span class="keyword">if</span> (tp != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    movePath = tp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 鼠标松开时获得需要拖到哪个父节点</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mouseReleased</span><span class="params">(MouseEvent e)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// 根据鼠标松开时的TreePath来获取TreePath</span></span><br><span class="line">                TreePath tp = tree.getPathForLocation(e.getX(), e.getY());</span><br><span class="line">                <span class="keyword">if</span> (tp != <span class="keyword">null</span> &amp;&amp; movePath != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">// 阻止向子节点拖动</span></span><br><span class="line">                    <span class="keyword">if</span> (movePath.isDescendant(tp) &amp;&amp; movePath != tp) &#123;</span><br><span class="line">                        JOptionPane.showMessageDialog(jf, <span class="string">&quot;目标节点是被移动节点的子节点，无法移动！&quot;</span>, <span class="string">&quot;非法操作&quot;</span>, JOptionPane.ERROR_MESSAGE);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// 既不是向子节点移动，而且鼠标按下、松开的不是同一个节点</span></span><br><span class="line">                    <span class="keyword">else</span> <span class="keyword">if</span> (movePath != tp) &#123;</span><br><span class="line">                        <span class="comment">// add方法先将该节点从原父节下删除，再添加到新父节点下</span></span><br><span class="line">                        ((DefaultMutableTreeNode) tp.getLastPathComponent())</span><br><span class="line">                                .add((DefaultMutableTreeNode) movePath.getLastPathComponent());</span><br><span class="line">                        movePath = <span class="keyword">null</span>;</span><br><span class="line">                        tree.updateUI();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 为JTree添加鼠标监听器</span></span><br><span class="line">        tree.addMouseListener(ml);</span><br><span class="line">        JPanel panel = <span class="keyword">new</span> JPanel();</span><br><span class="line">        <span class="comment">// 实现添加兄弟节点的监听器</span></span><br><span class="line">        addSiblingButton.addActionListener(event -&gt; &#123;</span><br><span class="line">            <span class="comment">// 获取选中节点</span></span><br><span class="line">            DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();</span><br><span class="line">            <span class="comment">// 如果节点为空，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (selectedNode == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="comment">// 获取该选中节点的父节点</span></span><br><span class="line">            DefaultMutableTreeNode parent = (DefaultMutableTreeNode) selectedNode.getParent();</span><br><span class="line">            <span class="comment">// 如果父节点为空，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (parent == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="comment">// 创建一个新节点</span></span><br><span class="line">            DefaultMutableTreeNode newNode = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;新节点&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取选中节点的选中索引</span></span><br><span class="line">            <span class="keyword">int</span> selectedIndex = parent.getIndex(selectedNode);</span><br><span class="line">            <span class="comment">// 在选中位置插入新节点</span></span><br><span class="line">            model.insertNodeInto(newNode, parent, selectedIndex + <span class="number">1</span>);</span><br><span class="line">            <span class="comment">// --------下面代码实现显示新节点（自动展开父节点）-------</span></span><br><span class="line">            <span class="comment">// 获取从根节点到新节点的所有节点</span></span><br><span class="line">            TreeNode[] nodes = model.getPathToRoot(newNode);</span><br><span class="line">            <span class="comment">// 使用指定的节点数组来创建TreePath</span></span><br><span class="line">            TreePath path = <span class="keyword">new</span> TreePath(nodes);</span><br><span class="line">            <span class="comment">// 显示指定TreePath</span></span><br><span class="line">            tree.scrollPathToVisible(path);</span><br><span class="line">        &#125;);</span><br><span class="line">        panel.add(addSiblingButton);</span><br><span class="line">        <span class="comment">// 实现添加子节点的监听器</span></span><br><span class="line">        addChildButton.addActionListener(event -&gt; &#123;</span><br><span class="line">            <span class="comment">// 获取选中节点</span></span><br><span class="line">            DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();</span><br><span class="line">            <span class="comment">// 如果节点为空，直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (selectedNode == <span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            <span class="comment">// 创建一个新节点</span></span><br><span class="line">            DefaultMutableTreeNode newNode = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;新节点&quot;</span>);</span><br><span class="line">            <span class="comment">// 通过model来添加新节点，则无须通过调用JTree的updateUI方法</span></span><br><span class="line">            <span class="comment">// model.insertNodeInto(newNode, selectedNode</span></span><br><span class="line">            <span class="comment">// , selectedNode.getChildCount());</span></span><br><span class="line">            <span class="comment">// 通过节点添加新节点，则需要调用tree的updateUI方法</span></span><br><span class="line">            selectedNode.add(newNode);</span><br><span class="line">            <span class="comment">// --------下面代码实现显示新节点（自动展开父节点）-------</span></span><br><span class="line">            TreeNode[] nodes = model.getPathToRoot(newNode);</span><br><span class="line">            TreePath path = <span class="keyword">new</span> TreePath(nodes);</span><br><span class="line">            tree.scrollPathToVisible(path);</span><br><span class="line">            tree.updateUI();</span><br><span class="line">        &#125;);</span><br><span class="line">        panel.add(addChildButton);</span><br><span class="line">        <span class="comment">// 实现删除节点的监听器</span></span><br><span class="line">        deleteButton.addActionListener(event -&gt; &#123;</span><br><span class="line">            DefaultMutableTreeNode selectedNode = (DefaultMutableTreeNode) tree.getLastSelectedPathComponent();</span><br><span class="line">            <span class="keyword">if</span> (selectedNode != <span class="keyword">null</span> &amp;&amp; selectedNode.getParent() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 删除指定节点</span></span><br><span class="line">                model.removeNodeFromParent(selectedNode);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        panel.add(deleteButton);</span><br><span class="line">        <span class="comment">// 实现编辑节点的监听器</span></span><br><span class="line">        editButton.addActionListener(event -&gt; &#123;</span><br><span class="line">            TreePath selectedPath = tree.getSelectionPath();</span><br><span class="line">            <span class="keyword">if</span> (selectedPath != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 编辑选中节点</span></span><br><span class="line">                tree.startEditingAtPath(selectedPath);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        panel.add(editButton);</span><br><span class="line">        jf.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        jf.add(panel, BorderLayout.SOUTH);</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> EditJTree().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中实现拖动节点也比较容易:<br>当用户按下鼠标时获取鼠标事件发生位置的树节点,并把该节点赋给<code>movePath</code>变量;<br>当用户松开鼠标时获取鼠标事件发生位置的树节点,作为目标节点需要拖到的父节点,把<code>movePath</code>从原来的节点中删除,添加到新的父节点中即可(<code>TreeNode</code>的<code>add()</code>方法可以同时完成这两个操作)。</p>
<p>运行上面程序,会看到如图12.42所示的效果。</p>
<!-- CrazyJavaHandout4/Chapter12/12.10.2/ -->
<p><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.2/1.png"><br>选中图12.42中的某个节点并双击,或者单击“编辑当前节点”按钮,就可以进入该节点的编辑状态,系统启动默认的单元格编辑器来编辑该节点,<code>JTree</code>的单元格编辑器与<code>JTable</code>的单元格编辑器都实现了相同的<code>CellEditor</code>接口。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/b18e72c0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/b18e72c0/" class="post-title-link" itemprop="url">12.10 使用JTree和TreeModel创建树 12.10.1 创建树</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-16 10:00:36" itemprop="dateCreated datePublished" datetime="2020-02-16T10:00:36+08:00">2020-02-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-10-%E4%BD%BF%E7%94%A8JTree%E5%92%8CTreeModel%E5%88%9B%E5%BB%BA%E6%A0%91/" itemprop="url" rel="index"><span itemprop="name">12.10 使用JTree和TreeModel创建树</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/b18e72c0/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/b18e72c0/" data-xid="/JavaReadingNotes/b18e72c0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>5.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>5 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-10-使用JTree和TreeModel创建树"><a href="#12-10-使用JTree和TreeModel创建树" class="headerlink" title="12.10 使用JTree和TreeModel创建树"></a>12.10 使用JTree和TreeModel创建树</h1><p>树也是图形用户界面中使用非常广泛的<code>GUI</code>组件,例如使用<code>Windows</code>资源管理器时,将看到如图12.38所示的目录树。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.0/2.png"><br>如图12.38所示的树,代表计算机世界里的树,它从自然界实际的树抽象而来。<strong>计算机世界里的树是由一系列具有严格父子关系的节点组成的,每个节点既可以是其上一级节点的子节点,也可以是其下一级节点的父节点,因此同一个节点既可以是父节点,也可以是子节点</strong>(类似于一个人,他既是他儿子的父亲,又是他父亲的儿子)。</p>
<h2 id="节点分类"><a href="#节点分类" class="headerlink" title="节点分类"></a>节点分类</h2><p>如果按节点是否包含子节点来分,节点分为如下两种</p>
<ul>
<li>普通节点:包含子节点的节点。</li>
<li>叶子节点:没有子节点的节点,因此叶子节点不可作为父节点。</li>
</ul>
<p>如果按节点是否具有唯一的父节点来分,节点又可分为如下两种</p>
<ul>
<li><strong>根节点</strong>:没有父节点的节点,根节点不可作为子节点。</li>
<li><strong>普通节点</strong>:具有唯一父节点的节点。</li>
</ul>
<p>棵树只能有一个根节点,如果一棵树有了多个根节点,那它就不是一棵树了,而是多棵树的集合,有时也被称为森林。图12.39显示了计算机世界里树的一些专业术语。<br>使用<code>Swing</code>里的<code>JTree</code>、<code>TreeModel</code>及其相关的辅助类可以很轻松地开发出计算机世界里的树,如图1239所示</p>
<!-- CrazyJavaHandout4/Chapter12/12.10.0/3 -->
<h1 id="12-10-1-创建树"><a href="#12-10-1-创建树" class="headerlink" title="12.10.1 创建树"></a>12.10.1 创建树</h1><p><code>Swing</code>使用<code>JTree</code>对象来代表一棵树(实际上,<code>JTree</code>可以代表森林,因为在使用<code>JTree</code>创建树时可以传入多个根节点),<br><code>JTree</code>树中节点可以使用<code>TreePath</code>来标识,<strong><code>TreePath</code>对象封装了当前节点及其所有的父节点</strong>。必须指出,<strong>节点及其所有的父节点才能唯一地标识一个节点</strong>;也可以使用行数来标识,如图12.39所示,显示区域的每一行都标识一个节点。<br>当一个节点具有子节点时,该节点有两种状态。</p>
<ul>
<li>展开状态:当父节点处于展开状态时,其子节点是可见的。</li>
<li>折叠状态:当父节点处于折叠状态时,其子节点都是不可见的。</li>
</ul>
<p>如果某个节点是可见的,则该节点的父节点(包括直接的、间接的父节点)都必须处于展开状态,只要有任意一个父节点处于折叠状态,该节点就是不可见的。<br>如果希望创建一棵树,则直接使用<code>JTree</code>的构造器创建<code>JTree</code>对象即可。<code>JTree</code>提供了如下几个常用构造器。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>JTree(TreeModel newModel)</code></td>
<td align="left">使用指定的数据模型创建<code>JTree</code>对象,它默认显示根节点。</td>
</tr>
<tr>
<td align="left"><code>JTree(TreeNode root)</code></td>
<td align="left">使用<code>root</code>作为根节点创建<code>JTree</code>对象,它默认显示根节点。</td>
</tr>
<tr>
<td align="left"><code>JTree(TreeNode root, boolean asksAllowsChildren)</code></td>
<td align="left">使用<code>root</code>作为根节点创建<code>JTree</code>对象,它默认显示根节点。**<code>asksAllowsChildren</code>参数控制怎样的节点才算叶子节点**:<ul><li>如果该参数为<code>true</code>,则只有当程序使用<code>setAllowsChildren(false)</code>显式设置某个节点不允许添加子节点时(以后也不会拥有子节点),该节点才会被<code>JTree</code>当成叶子节点;</li><li>如果该参数为<code>false</code>,则只要某个节点当时没有子节点(不管以后是否拥有子节点),该节点都会被<code>JTree</code>当成叶子节点。</li></ul></td>
</tr>
</tbody></table>
<p>上面的第一个构造器需要显式传入一个<code>TreeModel</code>对象,<code>Swing</code>为<code>TreeModel</code>提供了一个<code>DefaultTreeModel</code>实现类,通常可先创建<code>DefaultTreeModel</code>对象,然后利用<code>DefaultTreeModel</code>来创建<code>JTree</code>,但通过<code>DefaultTreeModel</code>的<code>API</code>文档会发现,创建<code>DefaultTreeModel</code>对象依然需要传入根节点,所以直接通过根节点创建<code>JTree</code>更加简洁。<br>为了利用根节点来创建<code>JTree</code>,程序需要创建一个<code>TreeNode</code>对象。<code>TreeNode</code>是一个接口,该接口有个<code>MutableTreeNode</code>子接口,<code>Swing</code>为该接口提供了默认的实现类:<code>DefaultMutableTreeNode</code>,程序可以通过<code>DefaultMutableTreeNode</code>来为树创建节点,并通过<code>DefaultMutableTreeNode</code>提供的<code>add()</code>方法建立各节点之间的父子关系,然后调用<code>JTree</code>的<code>JTree(TreeNodeRoot</code>构造器来创建一棵树。</p>
<p>图12.40显示了<code>JTree</code>相关类的关系,从该图可以看出<code>DefaultTreeModel</code>是<code>TreeModel</code>的默认实现类,当程序通过<code>TreeNode</code>类创建<code>JTree</code>时,其状态数据实际上由<code>DefaultTreeModel</code>对象维护,因为创建<code>JTree</code>时传入的<code>TreeNode</code>对象,实际上传给了<code>DefaultTreeModel</code>对象。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.10.1/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.10.1/ -->
<p><code>DefaultTreeModel</code>也提供了<code>DefaultTreeModel(TreeNode root)</code>构造器,用于接收一个<code>TreeNode</code>根节点来创建一个默认的<code>TreeModel</code>对象;当程序中通过传入一个根节点来创建<code>JTree</code>对象时,实际上是将该节点传入对应的<code>DefaultTreeModel</code>对象,并使用该<code>DefaultTreeModel</code>对象来创建<code>JTree</code>对象</p>
<h2 id="程序-简单Swing数组"><a href="#程序-简单Swing数组" class="headerlink" title="程序 简单Swing数组"></a>程序 简单Swing数组</h2><p>下面程序创建了一棵最简单的<code>Swing</code>树:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.tree.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleJTree</span> </span>&#123;</span><br><span class="line">    JFrame jf = <span class="keyword">new</span> JFrame(<span class="string">&quot;简单树&quot;</span>);</span><br><span class="line">    JTree tree;</span><br><span class="line">    DefaultMutableTreeNode root;</span><br><span class="line">    DefaultMutableTreeNode guangdong;</span><br><span class="line">    DefaultMutableTreeNode guangxi;</span><br><span class="line">    DefaultMutableTreeNode foshan;</span><br><span class="line">    DefaultMutableTreeNode shantou;</span><br><span class="line">    DefaultMutableTreeNode guilin;</span><br><span class="line">    DefaultMutableTreeNode nanning;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 依次创建树中所有节点</span></span><br><span class="line">        root = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;中国&quot;</span>);</span><br><span class="line">        guangdong = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广东&quot;</span>);</span><br><span class="line">        guangxi = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;广西&quot;</span>);</span><br><span class="line">        foshan = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;佛山&quot;</span>);</span><br><span class="line">        shantou = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;汕头&quot;</span>);</span><br><span class="line">        guilin = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;桂林&quot;</span>);</span><br><span class="line">        nanning = <span class="keyword">new</span> DefaultMutableTreeNode(<span class="string">&quot;南宁&quot;</span>);</span><br><span class="line">        <span class="comment">// 通过add()方法建立树节点之间的父子关系</span></span><br><span class="line">        guangdong.add(foshan);</span><br><span class="line">        guangdong.add(shantou);</span><br><span class="line">        guangxi.add(guilin);</span><br><span class="line">        guangxi.add(nanning);</span><br><span class="line">        root.add(guangdong);</span><br><span class="line">        root.add(guangxi);</span><br><span class="line">        <span class="comment">// 以根节点创建树</span></span><br><span class="line">        tree = <span class="keyword">new</span> JTree(root); <span class="comment">// ①</span></span><br><span class="line">        jf.add(<span class="keyword">new</span> JScrollPane(tree));</span><br><span class="line">        jf.pack();</span><br><span class="line">        jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        jf.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> SimpleJTree().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中的粗体字代码创建了一系列的<code>DefaultMutableNode</code>对象,并通过<code>add()</code>方法为这些节点建立了相应的父子关系。程序中①号代码则以一个根节点创建了一个<code>JTree</code>对象。当程序把<code>JTree</code>对象添加到其他容器中后,<code>JTree</code>就会在该容器中绘制出一棵<code>Swing</code>树。运行上面程序,会看到如图12.41所示的窗口。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout/Chapter12/12.10.1/1.png"></p>
<!-- CrazyJavaHandout/Chapter12/12.10.1/1 -->
<p>从图12.41中可以看出,<code>Swing</code>树的默认风格是使用一个特殊图标来表示节点的展开、折叠,而不是使用我们熟悉的“+”、“-”图标来表示节点的展开、折叠。如果希望使用“+”、“-”图标来表示节点的展开、折叠,则可以考虑使用<code>Windows</code>风格。</p>
<h2 id="不显示节点之间的连线"><a href="#不显示节点之间的连线" class="headerlink" title="不显示节点之间的连线"></a>不显示节点之间的连线</h2><p>从图12.41中可以看出,<code>Swing</code>树默认使用连接线来连接所有节点,程序可以使用如下代码来强制<code>JTree</code>不显示节点之间的连接线。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//没有连接线</span></span><br><span class="line">tree.putClientProperty(<span class="string">&quot;JTree.lineStyle&quot;</span>,<span class="string">&quot;None&quot;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="只有水平分割线"><a href="#只有水平分割线" class="headerlink" title="只有水平分割线"></a>只有水平分割线</h2><p>或者使用如下代码来强制节点之间只有水平分隔线。<br>图12.41中显示的根节点前没有绘制表示节点展开、折叠的特殊图标,如果希望根节点也绘制表示节点展开、折叠的特殊图标,则使用如下代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置是否显示根节点的“展开、折叠”图标,默认是fase</span></span><br><span class="line">tree.setShowsRootHandles(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<h2 id="隐藏根节点"><a href="#隐藏根节点" class="headerlink" title="隐藏根节点"></a>隐藏根节点</h2><p><code>JTree</code>甚至允许把整个根节点都隐藏起来,可以通过如下代码来隐藏根节点。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置根节点是否可见,默认是true</span></span><br><span class="line">tree.setRootvisible(<span class="keyword">false</span>);</span><br></pre></td></tr></table></figure>

<h2 id="遍历所有子节点"><a href="#遍历所有子节点" class="headerlink" title="遍历所有子节点"></a>遍历所有子节点</h2><p><code>DefaultMutableTreeNode</code>是<code>JTree</code>默认的树节点,该类提供了大量的方法来访问树中的节点,包括遍历该节点的所有子节点的两个方法。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Enumeration&lt;TreeNode&gt; breadthFirstEnumeration()</code></td>
<td align="left">按广度优先的顺序遍历以此节点为根的子树,并返回所有节点组成的枚举对象。</td>
</tr>
<tr>
<td align="left"><code>Enumeration&lt;TreeNode&gt; preorderEnumeration()</code></td>
<td align="left">Creates and returns an enumeration that traverses the subtree rooted at this node in preorder.</td>
</tr>
<tr>
<td align="left"><code>Enumeration&lt;TreeNode&gt; depthFirstEnumeration()</code></td>
<td align="left">按深度优先的顺序遍历以此节点为根的子树,并返回所有节点组成的枚举对象。</td>
</tr>
<tr>
<td align="left"><code>Enumeration&lt;TreeNode&gt; postorderEnumeration()</code></td>
<td align="left">Creates and returns an enumeration that traverses the subtree rooted at this node in postorder.</td>
</tr>
</tbody></table>
<h2 id="获取节点"><a href="#获取节点" class="headerlink" title="获取节点"></a>获取节点</h2><p>除此之外,<code>DefaultMutableTreeNode</code>也提供了大量的方法来获取指定节点的兄弟节点、父节点节点等,常用的有如下几个方法:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>DefaultMutableTreeNode getNextSibling()</code></td>
<td align="left">返回此节点的下一个兄弟节点</td>
</tr>
<tr>
<td align="left"><code>TreeNode getParent()</code></td>
<td align="left">返回此节点的父节点。如果此节点没有父节点,则返回<code>null</code></td>
</tr>
<tr>
<td align="left"><code>TreeNode[] getPath()</code></td>
<td align="left">返回从根节点到达此节点的所有节点组成的数组。</td>
</tr>
<tr>
<td align="left"><code>protected TreeNode[] getPathToRoot(TreeNode aNode, int depth)</code></td>
<td align="left">返回包含此节点的树的根节点。</td>
</tr>
<tr>
<td align="left"><code>DefaultMutableTreeNode getPreviousSibling()</code></td>
<td align="left">返回此节点的上一个兄弟节点。</td>
</tr>
<tr>
<td align="left"><code>TreeNode getRoot()</code></td>
<td align="left">返回包含此节点的树的根节点</td>
</tr>
<tr>
<td align="left"><code>TreeNode getSharedAncestor(DefaultMutableTreeNode aNode)</code></td>
<td align="left">返回此节点和<code>aNode</code>最近的共同祖先</td>
</tr>
<tr>
<td align="left"><code>int getSiblingCount()</code></td>
<td align="left">返回此节点的兄弟节点数</td>
</tr>
<tr>
<td align="left"><code>boolean isLeaf()</code></td>
<td align="left">返回该节点是否是叶子节点。</td>
</tr>
<tr>
<td align="left"><code>boolean isNodeAncestor(TreeNode anotherNode)</code></td>
<td align="left">判断<code>anotherNode</code>是否是当前节点的祖先节点(包括父节点)。</td>
</tr>
<tr>
<td align="left"><code>boolean isNodeChild(TreeNode aNode)</code></td>
<td align="left">如果<code>aNode</code>是此节点的子节点,则返回<code>true</code></td>
</tr>
<tr>
<td align="left"><code>boolean isNodeDescendant(DefaultMutableTreeNode anotherNode)</code></td>
<td align="left">如果<code>anotherNode</code>是此节点的后代,包括是此节点本身、此节点的子节点或此节点的子节点的后代,都将返回<code>tnue</code>。</td>
</tr>
<tr>
<td align="left"><code>boolean isNodeRelated(DefaultMutableTreeNode aNode)</code></td>
<td align="left">当<code>aNode</code>和当前节点位于同一棵树中时返回<code>true</code>。</td>
</tr>
<tr>
<td align="left"><code>boolean isNodeSibling(TreeNode anotherNode)</code></td>
<td align="left">返回<code>anotherNode</code>是否是当前节点的兄弟节点。</td>
</tr>
<tr>
<td align="left"><code>boolean isRoot()</code></td>
<td align="left">返回当前节点是否是根节点。</td>
</tr>
<tr>
<td align="left"><code>Enumeration&lt;TreeNode&gt; pathFromAncestorEnumeration(TreeNode ancestor)</code></td>
<td align="left">返回从指定祖先节点到当前节点的所有节点组成的枚举对象</td>
</tr>
</tbody></table>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/ac2f3e1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/ac2f3e1/" class="post-title-link" itemprop="url">12.9.4 使用ListCellRenderer改变列表项外观</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-16 05:32:34" itemprop="dateCreated datePublished" datetime="2020-02-16T05:32:34+08:00">2020-02-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-9-%E5%88%9B%E5%BB%BA%E5%88%97%E8%A1%A8%E6%A1%86/" itemprop="url" rel="index"><span itemprop="name">12.9 创建列表框</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/ac2f3e1/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/ac2f3e1/" data-xid="/JavaReadingNotes/ac2f3e1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.2k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-9-4-使用ListCellRenderer改变列表项外观"><a href="#12-9-4-使用ListCellRenderer改变列表项外观" class="headerlink" title="12.9.4 使用ListCellRenderer改变列表项外观"></a>12.9.4 使用ListCellRenderer改变列表项外观</h1><p>前面程序中的<code>JList</code>和<code>JComboBox</code>采用的都是简单的字符串列表项,实际上,<code>JList</code>和<code>JComboBox</code>还可以支持图标列表项,如果在创建<code>JList</code>或<code>JComboBox</code>时传入图标数组,则创建的<code>JList</code>和<code>JCombobox</code>的列表项就是图标。<br>如果希望列表项是更复杂的组件,例如,希望像<code>QQ</code>程序那样每个列表项既有图标,也有字符串,那么可以通过调用<code>JList</code>的<code>setCellRenderer</code>方法来实现,该方法需要接收一个<code>ListCellRenderer</code>对象,该对象代表一个<strong>列表项绘制器</strong></p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void setCellRenderer(ListCellRenderer&lt;? super E&gt; cellRenderer)</code></td>
<td align="left">Sets the delegate that is used to paint each cell in the list.</td>
</tr>
</tbody></table>
<h2 id="ListCellRenderer接口"><a href="#ListCellRenderer接口" class="headerlink" title="ListCellRenderer接口"></a>ListCellRenderer接口</h2><p><code>ListCellRenderer</code>是一个接口,该接口里包含一个方法:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>Component getListCellRendererComponent(JList&lt;? extends E&gt; list, E value, int index, boolean isSelected, boolean cellHasFocus)</code></td>
<td align="left">Return a component that has been configured to display the specified value.</td>
</tr>
</tbody></table>
<p>上面的<code>getListCellRendererComponent()</code>方法返回一个<code>Component</code>组件,该组件就代表了<code>JList</code>或<code>JComboBox</code>的每个列表项</p>
<p>自定义绘制<code>JList</code>和<code>JComboBox</code>的列表项所用的方法相同,所用的列表项绘制器也相同,故本节以<code>JList</code>为例</p>
<p><code>ListCellRenderer</code>只是一个接口,它并未强制指定列表项绘制器属于哪种组件,因此<strong>可扩展任何组件来实现<code>ListCellRenderer</code>接口</strong>。通常<strong>采用扩展其他容器(如<code>JPanel</code>)的方式来实现列表项绘制器</strong>,实现列表项绘制器时可通过重写<code>paintComponent()</code>的方法来改变单元格的外观行为。</p>
<h2 id="程序-列表项绘制器"><a href="#程序-列表项绘制器" class="headerlink" title="程序 列表项绘制器"></a>程序 列表项绘制器</h2><p>例如下面程序,重写<code>paintComponent</code>方法时先绘制好友图像,再绘制好友名字。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListRenderingTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JFrame mainWin = <span class="keyword">new</span> JFrame(<span class="string">&quot;好友列表&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> String[] friends = <span class="keyword">new</span> String[]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;李清照&quot;</span>,</span><br><span class="line">        <span class="string">&quot;苏格拉底&quot;</span>,</span><br><span class="line">        <span class="string">&quot;李白&quot;</span>,</span><br><span class="line">        <span class="string">&quot;弄玉&quot;</span>,</span><br><span class="line">        <span class="string">&quot;虎头&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// 定义一个JList对象</span></span><br><span class="line">    <span class="keyword">private</span> JList&lt;String&gt; friendsList = <span class="keyword">new</span> JList&lt;&gt;(friends);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 设置该JList使用ImageCellRenderer作为列表项绘制器</span></span><br><span class="line">        friendsList.setCellRenderer(<span class="keyword">new</span> ImageCellRenderer());</span><br><span class="line">        mainWin.add(<span class="keyword">new</span> JScrollPane(friendsList));</span><br><span class="line">        mainWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        mainWin.pack();</span><br><span class="line">        mainWin.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ListRenderingTest().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageCellRenderer</span> <span class="keyword">extends</span> <span class="title">JPanel</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">ListCellRenderer</span>&lt;<span class="title">String</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ImageIcon icon;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">// 定义绘制单元格时的背景色</span></span><br><span class="line">    <span class="keyword">private</span> Color background;</span><br><span class="line">    <span class="comment">// 定义绘制单元格时的前景色</span></span><br><span class="line">    <span class="keyword">private</span> Color foreground;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Component <span class="title">getListCellRendererComponent</span><span class="params">(JList list</span></span></span><br><span class="line"><span class="params"><span class="function">        , String value , <span class="keyword">int</span> index</span></span></span><br><span class="line"><span class="params"><span class="function">        , <span class="keyword">boolean</span> isSelected , <span class="keyword">boolean</span> cellHasFocus)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        icon = <span class="keyword">new</span> ImageIcon(<span class="string">&quot;ico/&quot;</span> + value + <span class="string">&quot;.gif&quot;</span>);</span><br><span class="line">        name = value;</span><br><span class="line">        background = isSelected ? list.getSelectionBackground()</span><br><span class="line">            : list.getBackground();</span><br><span class="line">        foreground = isSelected ? list.getSelectionForeground()</span><br><span class="line">            : list.getForeground();</span><br><span class="line">        <span class="comment">// 返回该JPanel对象作为列表项绘制器</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 重写paintComponent方法，改变JPanel的外观</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paintComponent</span><span class="params">(Graphics g)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> imageWidth = icon.getImage().getWidth(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">int</span> imageHeight = icon.getImage().getHeight(<span class="keyword">null</span>);</span><br><span class="line">        g.setColor(background);</span><br><span class="line">        g.fillRect(<span class="number">0</span>, <span class="number">0</span>, getWidth(), getHeight());</span><br><span class="line">        g.setColor(foreground);</span><br><span class="line">        <span class="comment">// 绘制好友图标</span></span><br><span class="line">        g.drawImage(icon.getImage() , getWidth() / <span class="number">2</span></span><br><span class="line">            - imageWidth / <span class="number">2</span> , <span class="number">10</span> , <span class="keyword">null</span>);</span><br><span class="line">        g.setFont(<span class="keyword">new</span> Font(<span class="string">&quot;SansSerif&quot;</span> , Font.BOLD , <span class="number">18</span>));</span><br><span class="line">        <span class="comment">// 绘制好友用户名</span></span><br><span class="line">        g.drawString(name, getWidth() / <span class="number">2</span></span><br><span class="line">            - name.length() * <span class="number">10</span> , imageHeight + <span class="number">30</span> );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过该方法来设置该ImageCellRenderer的最佳大小</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Dimension <span class="title">getPreferredSize</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Dimension(<span class="number">60</span>, <span class="number">80</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中指定了该<code>JList</code>对象使用<code>ImageCellRenderer</code>作为列表项绘制器,<code>ImageCellRenderer</code>重写了<code>paintComponent()</code>方法来绘制单元格内容。除此之外,<code>ImageCellRenderer</code>还重写了<code>getPreferredSize()</code>方法,该方法返回一个<code>Dimension</code>对象,用于描述该列表项绘制器的最佳大小。<br>运行上面程序,会看到如图12.37所示的窗口。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.9.4/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.9.4/ -->
<h2 id="定义列表项绘制器有什么用"><a href="#定义列表项绘制器有什么用" class="headerlink" title="定义列表项绘制器有什么用"></a>定义列表项绘制器有什么用</h2><p><strong>通过使用自定义的列表项绘制器,可以让<code>JList</code>和<code>JComboBox</code>的列表项是任意组件,并且可以在该组件上任意添加内容</strong>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/e57073fb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/e57073fb/" class="post-title-link" itemprop="url">12.9.3 强制存储列表项的DefaultListModel和DefaultComboBoxModel</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-15 03:18:27" itemprop="dateCreated datePublished" datetime="2020-02-15T03:18:27+08:00">2020-02-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-9-%E5%88%9B%E5%BB%BA%E5%88%97%E8%A1%A8%E6%A1%86/" itemprop="url" rel="index"><span itemprop="name">12.9 创建列表框</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/e57073fb/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/e57073fb/" data-xid="/JavaReadingNotes/e57073fb/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-9-3-强制存储列表项的DefaultListModel和DefaultComboBoxModel"><a href="#12-9-3-强制存储列表项的DefaultListModel和DefaultComboBoxModel" class="headerlink" title="12.9.3 强制存储列表项的DefaultListModel和DefaultComboBoxModel"></a>12.9.3 强制存储列表项的DefaultListModel和DefaultComboBoxModel</h1><p>前面只是介绍了如何创建<code>JList</code>、<code>JComboBox</code>对象,当调用<code>JList</code>和<code>JComboBox</code>构造器时传入数组或<code>Vector</code>作为参数,这些数组元素或集合元素将会作为列表项。当使用<code>JList</code>或<code>JComboBox</code>时常常还需要动态地增加、删除列表项。</p>
<h2 id="JComboBox列表项的增加-插入-删除"><a href="#JComboBox列表项的增加-插入-删除" class="headerlink" title="JComboBox列表项的增加 插入 删除"></a>JComboBox列表项的增加 插入 删除</h2><p>对于<code>JComboBox</code>类,它提供了如下几个方法来增加、插入和删除列表项:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void addItem(E item)</code></td>
<td align="left">向<code>JComboBox</code>中的添加一个列表项。</td>
</tr>
<tr>
<td align="left"><code>void insertItemAt(E item, int index)</code></td>
<td align="left">向<code>JComboBox</code>的指定索引处插入一个列表项。</td>
</tr>
<tr>
<td align="left"><code>void removeAllItems()</code></td>
<td align="left">删除<code>JComboBox</code>中的所有列表项。</td>
</tr>
<tr>
<td align="left"><code>void removeItem(Object anObject)</code></td>
<td align="left">删除<code>JComboBox</code>中的指定列表项。</td>
</tr>
<tr>
<td align="left"><code>void removeItemAt(int anIndex)</code></td>
<td align="left">删除<code>JComboBox</code>指定索引处的列表项</td>
</tr>
</tbody></table>
<p>上面这些方法的参数类型是E,这是由于<code>Java7</code>为<code>JComboBox</code>、<code>JList</code>、<code>ListModel</code>都増加了泛型支持,这些接口都有形如<code>JComboBox&lt;E&gt;</code>、<code>JList&lt;E&gt;</code>、<code>ListModel&lt;E&gt;</code>的泛型声明,因此它们里面的方法可使用E作为参数或返回值的类型<br>通过这些方法就可以增加、插入和删除<code>JComboBox</code>中的列表项。</p>
<h2 id="JList没有提供增加-删除列表项的方法"><a href="#JList没有提供增加-删除列表项的方法" class="headerlink" title="JList没有提供增加 删除列表项的方法"></a>JList没有提供增加 删除列表项的方法</h2><p>但<code>JList</code>并没有提供这些类似的方法。实际上,对于直接通过数组或<code>Vector</code>创建的<code>JList</code>对象,则很难向该<code>JList</code>中添加或删除列表项。</p>
<p>如果需要创建一个可以增加、删除列表项的<code>JList</code>对象,则应该在创建<code>JList</code>时显式使用<code>DefaultListModel</code>作为构造参数:</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>JList(ListModel&lt;E&gt; dataModel)</code></td>
<td align="left">Constructs a JList that displays elements from the specified, non-null, model.</td>
</tr>
</tbody></table>
<h2 id="通过DefaultListModel来实现向JList中添加-插入-删除元素"><a href="#通过DefaultListModel来实现向JList中添加-插入-删除元素" class="headerlink" title="通过DefaultListModel来实现向JList中添加 插入 删除元素"></a>通过DefaultListModel来实现向JList中添加 插入 删除元素</h2><p>因为<code>DefaultListModel</code>作为<code>JList</code>的<code>Model</code>,它负责维护<code>JList</code>组件的所有列表数据,所以<strong>可以通过向<code>DefaultListModel</code>中添加、删除元素来实现向<code>JList</code>对象中增加、删除列表项</strong></p>
<p><code>DefaultListModel</code>提供了如下几个方法来添加、插入 删除元素。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>void add(int index, E element)</code></td>
<td align="left">在该<code>ListModel</code>的指定位置处插入指定元素。</td>
</tr>
<tr>
<td align="left"><code>void addElement(E element)</code></td>
<td align="left">将指定元素添加到该<code>ListModel</code>的末尾。</td>
</tr>
<tr>
<td align="left"><code>void insertElementAt(E element, int index)</code></td>
<td align="left">在该<code>ListModel</code>的指定位置处插入指定元素</td>
</tr>
<tr>
<td align="left"><code>E remove(int index)</code></td>
<td align="left">删除该<code>ListModel</code>中指定位置处的元素。</td>
</tr>
<tr>
<td align="left"><code>void removeAllElements()</code></td>
<td align="left">删除该<code>ListModel</code>中的所有元素,并将其的大小设置为零。</td>
</tr>
<tr>
<td align="left"><code>boolean removeElement(Object obj)</code></td>
<td align="left">删除该<code>ListModel</code>中第一个与参数匹配的元素。</td>
</tr>
<tr>
<td align="left"><code>void removeElementAt(int index)</code></td>
<td align="left">删除该<code>ListModel</code>中指定索引处的元素。</td>
</tr>
</tbody></table>
<p>上面这些方法有些功能是重复的,这是由于<code>Java</code>的历史原因造成的。如果通过<code>DefaultListModel</code>来创建<code>JList</code>组件,则就可以通过调用上面的这些方法来添加、删除<code>DefaultListModel</code>中的元素,从而实现对<code>JList</code>里列表项的增加、删除。下面程序示范了如何向<code>JList</code>中添加、删除列表项。</p>
<h2 id="程序-使用DefaultListModel给JList-增加-插入-删除-列表项"><a href="#程序-使用DefaultListModel给JList-增加-插入-删除-列表项" class="headerlink" title="程序 使用DefaultListModel给JList 增加 插入 删除 列表项"></a>程序 使用DefaultListModel给JList 增加 插入 删除 列表项</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DefaultListModelTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JFrame mainWin = <span class="keyword">new</span> JFrame(<span class="string">&quot;测试DefaultListModel&quot;</span>);</span><br><span class="line">    <span class="comment">// 定义一个JList对象</span></span><br><span class="line">    <span class="keyword">private</span> JList&lt;String&gt; bookList;</span><br><span class="line">    <span class="comment">// 定义一个DefaultListModel对象</span></span><br><span class="line">    <span class="keyword">private</span> DefaultListModel&lt;String&gt; bookModel = <span class="keyword">new</span> DefaultListModel&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> JTextField bookName = <span class="keyword">new</span> JTextField(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">private</span> JButton removeBn = <span class="keyword">new</span> JButton(<span class="string">&quot;删除选中图书&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> JButton addBn = <span class="keyword">new</span> JButton(<span class="string">&quot;添加指定图书&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 向bookModel中添加元素</span></span><br><span class="line">        bookModel.addElement(<span class="string">&quot;疯狂Java讲义&quot;</span>);</span><br><span class="line">        bookModel.addElement(<span class="string">&quot;轻量级Java EE企业应用实战&quot;</span>);</span><br><span class="line">        bookModel.addElement(<span class="string">&quot;疯狂Android讲义&quot;</span>);</span><br><span class="line">        bookModel.addElement(<span class="string">&quot;疯狂Ajax讲义&quot;</span>);</span><br><span class="line">        bookModel.addElement(<span class="string">&quot;经典Java EE企业应用实战&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据DefaultListModel对象创建一个JList对象</span></span><br><span class="line">        bookList = <span class="keyword">new</span> JList&lt;&gt;(bookModel);</span><br><span class="line">        <span class="comment">// 设置最大可视高度</span></span><br><span class="line">        bookList.setVisibleRowCount(<span class="number">4</span>);</span><br><span class="line">        <span class="comment">// 只能单选</span></span><br><span class="line">        bookList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);</span><br><span class="line">        <span class="comment">// 为添加按钮添加事件监听器</span></span><br><span class="line">        addBn.addActionListener(evt -&gt; &#123;</span><br><span class="line">            <span class="comment">// 当bookName文本框的内容不为空。</span></span><br><span class="line">            <span class="keyword">if</span> (!bookName.getText().trim().equals(<span class="string">&quot;&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 向bookModel中添加一个元素，</span></span><br><span class="line">                <span class="comment">// 系统自动会向JList中添加对应的列表项</span></span><br><span class="line">                bookModel.addElement(bookName.getText());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 为删除按钮添加事件监听器</span></span><br><span class="line">        removeBn.addActionListener(evt -&gt; &#123;</span><br><span class="line">            <span class="comment">// 如果用户已经选中的一项</span></span><br><span class="line">            <span class="keyword">if</span> (bookList.getSelectedIndex() &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// 从bookModel中删除指定索引处的元素，</span></span><br><span class="line">                <span class="comment">// 系统自动会删除JList对应的列表项</span></span><br><span class="line">                bookModel.removeElementAt(bookList.getSelectedIndex());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.add(bookName);</span><br><span class="line">        p.add(addBn);</span><br><span class="line">        p.add(removeBn);</span><br><span class="line">        <span class="comment">// 添加bookList组件</span></span><br><span class="line">        mainWin.add(<span class="keyword">new</span> JScrollPane(bookList));</span><br><span class="line">        <span class="comment">// 将p面板添加到窗口中</span></span><br><span class="line">        mainWin.add(p, BorderLayout.SOUTH);</span><br><span class="line">        mainWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        mainWin.pack();</span><br><span class="line">        mainWin.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> DefaultListModelTest().init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中通过一个<code>DefaultListModel</code>创建了一个<code>JList</code>对象,然后在两个按钮的事件监听器中分别向<code>DefaultListModel</code>对象中添加、删除元素,从而实现了向<code>JList</code>对象中添加、删除列表项。<br>运行上面程序,会看到如图12.36所示的窗口。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.9.3/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.9.3/ -->
<h2 id="为什么JComboBox提供添加删除列表项的方法-JList不提供"><a href="#为什么JComboBox提供添加删除列表项的方法-JList不提供" class="headerlink" title="为什么JComboBox提供添加删除列表项的方法 JList不提供"></a>为什么JComboBox提供添加删除列表项的方法 JList不提供</h2><p>学生提问:为什么<code>JComboBox</code>提供了添加、删除列表项的方法?而<code>JList</code>没有提供添加、删除列表项的方法呢?<br>答:因为直接使用数组、<code>Vector</code>创建的<code>JList</code>和<code>JComboBox</code>所对应的<code>Model</code>实规类不同。</p>
<ul>
<li>使用数组、<code>Vector</code>创建的<code>JComboBox</code>的<code>Model</code>类是<code>DefaultComboBoxModel</code>,<ul>
<li><code>DefaultComboBoxModel</code>是一个元素可变的集合类,所以使用数组、<code>Vector</code>创建的<code>JComboBox</code>可以直接派加、删除列表项,因此<code>JComboBox</code>提供了添加、删除列表项的方法;</li>
</ul>
</li>
<li>但使用数组、<code>Vector</code>创建的<code>JList</code>所对应的<code>Model</code>类分别是<code>JList$1(JList</code>的第一个匿名内部类)、<code>JList$2(JList</code>的第二个匿名内部类)<ul>
<li>这两个匿名内部类都是元素不可变的集合类,所以使用数组、<code>Vector</code>创建的<code>JList</code>不可以直接添加、删除列表项,因此<code>JList</code>没有提供添加、删除列表项的方法。</li>
<li>如果想创建列表项可变的<code>JList</code>对象,则要显式使用<code>DefaultListModel</code>对象作为<code>Model</code>,而<code>DefaultListModel</code>才是元素可变的集合类,才可以直接通过修改<code>DefaultListModel</code>里的元素来改变<code>JList</code>里的列表项。</li>
</ul>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><code>DefaultListModel</code>和<code>DefaultComboBoxModel</code>是两个强制保存所有列表项的<code>Model</code>类,它们使用<code>Vector</code>来保存所有的列表项。<br>从<code>DefaultListModelTest</code>程序中可以看出,<code>DefaultListModel</code>的用法和<code>Vector</code>的用法非常相似。实际上,<code>DefaultListModel</code>和<code>DefaultComboBoxModel</code>从功能上来看,与一个<code>Vector</code>并没有太大的区别。如果要创建列表项可变的<code>JList</code>组件,使用<code>DefaultListModel</code>作为构造方法的参数即可</p>
<p>创建列表项可变的<code>JComboBox</code>组件,当然也可以显式使用<code>DefaultComboBoxModel</code>作为参数,但这并不是必需的,因为<code>JComboBox</code>已经默认使用<code>DefaultComboBoxModel</code>作为对应的<code>model</code>对象。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/9327aa87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/9327aa87/" class="post-title-link" itemprop="url">12.9.2 不强制存储列表项的ListModel和ComboBoxModel</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-02-15 02:36:01" itemprop="dateCreated datePublished" datetime="2020-02-15T02:36:01+08:00">2020-02-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-03-03 04:57:54" itemprop="dateModified" datetime="2020-03-03T04:57:54+08:00">2020-03-03</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">1 疯狂Java讲义 (第4版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">第12章 Swing编程</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/1-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89-%E7%AC%AC4%E7%89%88/%E7%AC%AC12%E7%AB%A0-Swing%E7%BC%96%E7%A8%8B/12-9-%E5%88%9B%E5%BB%BA%E5%88%97%E8%A1%A8%E6%A1%86/" itemprop="url" rel="index"><span itemprop="name">12.9 创建列表框</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/9327aa87/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/9327aa87/" data-xid="/JavaReadingNotes/9327aa87/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="12-9-2-不强制存储列表项的ListModel和ComboBoxModel"><a href="#12-9-2-不强制存储列表项的ListModel和ComboBoxModel" class="headerlink" title="12.9.2 不强制存储列表项的ListModel和ComboBoxModel"></a>12.9.2 不强制存储列表项的ListModel和ComboBoxModel</h1><p>正如前面提到的,<code>Swing</code>的绝大部分组件都采用了<code>MVC</code>的设计模式,其中<code>JList</code>和<code>JComboBox</code>都只负责组件的外观显示,而组件底层的状态数据维护则由对应的<code>Model</code>负责。<br><code>JList</code>对应的<code>Model</code>是<code>ListModel</code>接口,<br><code>JCombobox</code>对应的<code>Model</code>是<code>ComboBoxModel</code>接口.</p>
<p>这两个接口负责维护<code>JList</code>和<code>JCombobox</code>组件里的列表项。</p>
<h2 id="ListModel接口"><a href="#ListModel接口" class="headerlink" title="ListModel接口"></a>ListModel接口</h2><p><code>ListModel</code>接口的代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.swing;</span><br><span class="line"><span class="keyword">import</span> javax.swing.event.ListDataListener;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ListModel</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//返回列表项的数量</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">// 返回指定索引处的列表项</span></span><br><span class="line">    <span class="function">E <span class="title">getElementAt</span><span class="params">(<span class="keyword">int</span> index)</span></span>;</span><br><span class="line">    <span class="comment">// 为列表项添加一个监听器,当列表项发生变化时将触发该监听器</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addListDataListener</span><span class="params">(ListDataListener l)</span></span>;</span><br><span class="line">    <span class="comment">// 删除列表项上的指定监听器</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">removeListDataListener</span><span class="params">(ListDataListener l)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上面接口来看,这个<code>ListModel</code>不管<code>JList</code>里的所有列表项的存储形式,它甚至不强制存储所有的列表项,只要<code>ListModel</code>的实现类提供了<code>getSize()</code>和<code>getElementAt()</code>两个方法,<code>JList</code>就可以根据该<code>ListModel</code>对象来生成列表框</p>
<h2 id="ComboBoxModel接口"><a href="#ComboBoxModel接口" class="headerlink" title="ComboBoxModel接口"></a>ComboBoxModel接口</h2><p><code>ComboBoxModel</code>继承了<code>ListModel</code>,它添加了“选择项”的概念,选择项代表<code>JComboBox</code>显示区域内可见的列表项。<code>ComboBoxModel</code>为“选择项”提供了两个方法,下面是<code>ComboModel</code>接口的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> javax.swing;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ComboBoxModel</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">ListModel</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 设置选中“选择项”</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setSelectedItem</span><span class="params">(Object anItem)</span></span>;</span><br><span class="line">    <span class="comment">// 获取“选择项”的值</span></span><br><span class="line">    <span class="function">Object <span class="title">getSelectedItem</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="创建ListModel实现类"><a href="#创建ListModel实现类" class="headerlink" title="创建ListModel实现类"></a>创建ListModel实现类</h2><p>因为<code>ListModel</code>不强制保存所有的列表项,因此可以为它创建一个实现类:<code>NumberListModel</code>,这个实现类只需要传入数字上限、数字下限和步长,程序就可以自动为之实现上面的<code>getsize()</code>方法和<code>getElementAt()</code>方法,从而允许直接使用一个数字范围来创建<code>JList</code>对象。</p>
<h3 id="实现getSize-方法"><a href="#实现getSize-方法" class="headerlink" title="实现getSize()方法"></a>实现<code>getSize()</code>方法</h3><p>实现<code>getSize()</code>方法的代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getsize</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>) Math.floor(end.subtract(start).divide(step).doublevalue())+ <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用“**(上限-下限)÷步长+1**”即得到该<code>ListModel</code>中包含的列表项的个数<br>程序使用<code>BigDecimal</code>变量来保存上限、下限和步长,而不是直接使用<code>double</code>变量来保存这三个属性,主要是为了实现对数值的精确计算,所以上面程序中的<code>end</code>、<code>start</code>和<code>step</code>都是<code>BigDecimal</code>类型的变量。</p>
<h3 id="实现getElementAt方法"><a href="#实现getElementAt方法" class="headerlink" title="实现getElementAt方法"></a>实现getElementAt方法</h3><p>实现<code>getElementAt()</code>方法也很简单,“<strong>下限+步长×索引</strong>”就是指定索引处的元素,该方法的具体实现请参考<code>ListModelTest.java</code></p>
<h2 id="程序-创建ListModel的实现类-创建ComboBoxModel的实现类"><a href="#程序-创建ListModel的实现类-创建ComboBoxModel的实现类" class="headerlink" title="程序 创建ListModel的实现类 创建ComboBoxModel的实现类"></a>程序 创建ListModel的实现类 创建ComboBoxModel的实现类</h2><p>下面程序为<code>ListModel</code>提供了<code>NumberListModel</code>实现类,并为<code>ComboBoxModel</code>提供了<code>NumberComboBoxModel</code>实现类,这两个实现类允许程序使用数值范围来创建<code>JList</code>和<code>JComboBox</code>对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListModelTest</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JFrame mainWin = <span class="keyword">new</span> JFrame(<span class="string">&quot;测试ListModel&quot;</span>);</span><br><span class="line">    <span class="comment">// 根据NumberListModel对象来创建一个JList对象</span></span><br><span class="line">    <span class="keyword">private</span> JList&lt;BigDecimal&gt; numScopeList = <span class="keyword">new</span> JList&lt;&gt;(<span class="keyword">new</span> NumberListModel(<span class="number">1</span>, <span class="number">21</span>, <span class="number">2</span>));</span><br><span class="line">    <span class="comment">// 根据NumberComboBoxModel对象来创建JComboBox对象</span></span><br><span class="line">    <span class="keyword">private</span> JComboBox&lt;BigDecimal&gt; numScopeSelector = <span class="keyword">new</span> JComboBox&lt;&gt;(<span class="keyword">new</span> NumberComboBoxModel(<span class="number">0.1</span>, <span class="number">1.2</span>, <span class="number">0.1</span>));</span><br><span class="line">    <span class="keyword">private</span> JTextField showVal = <span class="keyword">new</span> JTextField(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// JList的可视高度可同时显示4个列表项</span></span><br><span class="line">        numScopeList.setVisibleRowCount(<span class="number">4</span>);</span><br><span class="line">        <span class="comment">// 默认选中第三项到第五项（第一项的索引是0）</span></span><br><span class="line">        numScopeList.setSelectionInterval(<span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">        <span class="comment">// 设置每个列表项具有指定的高度和宽度。</span></span><br><span class="line">        numScopeList.setFixedCellHeight(<span class="number">30</span>);</span><br><span class="line">        numScopeList.setFixedCellWidth(<span class="number">90</span>);</span><br><span class="line">        <span class="comment">// 为numScopeList添加监听器</span></span><br><span class="line">        numScopeList.addListSelectionListener(e -&gt; &#123;</span><br><span class="line">            <span class="comment">// 获取用户所选中的所有数字</span></span><br><span class="line">            List&lt;BigDecimal&gt; nums = numScopeList.getSelectedValuesList();</span><br><span class="line">            showVal.setText(<span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="comment">// 把用户选中的数字添加到单行文本框中</span></span><br><span class="line">            <span class="keyword">for</span> (BigDecimal num : nums) &#123;</span><br><span class="line">                showVal.setText(showVal.getText() + num.toString() + <span class="string">&quot;, &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 设置列表项的可视高度可显示5个列表项</span></span><br><span class="line">        numScopeSelector.setMaximumRowCount(<span class="number">5</span>);</span><br><span class="line">        Box box = <span class="keyword">new</span> Box(BoxLayout.X_AXIS);</span><br><span class="line">        box.add(<span class="keyword">new</span> JScrollPane(numScopeList));</span><br><span class="line">        JPanel p = <span class="keyword">new</span> JPanel();</span><br><span class="line">        p.add(numScopeSelector);</span><br><span class="line">        box.add(p);</span><br><span class="line">        <span class="comment">// 为numScopeSelector添加监听器</span></span><br><span class="line">        numScopeSelector.addItemListener(e -&gt; &#123;</span><br><span class="line">            <span class="comment">// 获取JComboBox中选中的数字</span></span><br><span class="line">            Object num = numScopeSelector.getSelectedItem();</span><br><span class="line">            showVal.setText(num.toString());</span><br><span class="line">        &#125;);</span><br><span class="line">        JPanel bottom = <span class="keyword">new</span> JPanel();</span><br><span class="line">        bottom.add(<span class="keyword">new</span> JLabel(<span class="string">&quot;您选择的值是：&quot;</span>));</span><br><span class="line">        bottom.add(showVal);</span><br><span class="line">        mainWin.add(box);</span><br><span class="line">        mainWin.add(bottom, BorderLayout.SOUTH);</span><br><span class="line">        mainWin.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        mainWin.pack();</span><br><span class="line">        mainWin.setVisible(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> ListModelTest().init();</span><br><span class="line">        <span class="comment">// ComboBoxModel</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumberListModel</span> <span class="keyword">extends</span> <span class="title">AbstractListModel</span>&lt;<span class="title">BigDecimal</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> BigDecimal start;</span><br><span class="line">    <span class="keyword">protected</span> BigDecimal end;</span><br><span class="line">    <span class="keyword">protected</span> BigDecimal step;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumberListModel</span><span class="params">(<span class="keyword">double</span> start, <span class="keyword">double</span> end, <span class="keyword">double</span> step)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.start = BigDecimal.valueOf(start);</span><br><span class="line">        <span class="keyword">this</span>.end = BigDecimal.valueOf(end);</span><br><span class="line">        <span class="keyword">this</span>.step = BigDecimal.valueOf(step);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回列表项的个数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) Math.floor(end.subtract(start).divide(step).doubleValue()) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回指定索引处的列表项</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">getElementAt</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> BigDecimal.valueOf(index).multiply(step).add(start);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumberComboBoxModel</span> <span class="keyword">extends</span> <span class="title">NumberListModel</span> <span class="keyword">implements</span> <span class="title">ComboBoxModel</span>&lt;<span class="title">BigDecimal</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 用于保存用户选中项的索引</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> selectId = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NumberComboBoxModel</span><span class="params">(<span class="keyword">double</span> start, <span class="keyword">double</span> end, <span class="keyword">double</span> step)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(start, end, step);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置选中“选择项”</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSelectedItem</span><span class="params">(Object anItem)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (anItem <span class="keyword">instanceof</span> BigDecimal) &#123;</span><br><span class="line">            BigDecimal target = (BigDecimal) anItem;</span><br><span class="line">            <span class="comment">// 根据选中的值来修改选中项的索引</span></span><br><span class="line">            selectId = target.subtract(<span class="keyword">super</span>.start).divide(step).intValue();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取“选择项”的值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">getSelectedItem</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 根据选中项的索引来取得选中项</span></span><br><span class="line">        <span class="keyword">return</span> BigDecimal.valueOf(selectId).multiply(step).add(start);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面程序中分别使用<code>NumberListModel</code>和<code>NumberComboBoxModel</code>创建了一个<code>JList</code>和<code>JComboBox</code>对象,<strong>创建这两个列表框时无须指定每个列表项,只需给出数值的上限、下限和步长即可</strong>。运行上面程序,会看到如图12.35所示的窗口。<br><img data-src="https://raw.githubusercontent.com/lanlan2017/images/master/CrazyJavaHandout4/Chapter12/12.9.2/1.png"></p>
<!-- CrazyJavaHandout4/Chapter12/12.9.2/ -->

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/JavaReadingNotes/page/72/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/JavaReadingNotes/">1</a><span class="space">&hellip;</span><a class="page-number" href="/JavaReadingNotes/page/72/">72</a><span class="page-number current">73</span><a class="page-number" href="/JavaReadingNotes/page/74/">74</a><span class="space">&hellip;</span><a class="page-number" href="/JavaReadingNotes/page/188/">188</a><a class="extend next" rel="next" href="/JavaReadingNotes/page/74/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">5.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">88:01</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/comments.js"></script><script src="/JavaReadingNotes/js/utils.js"></script><script src="/JavaReadingNotes/js/motion.js"></script><script src="/JavaReadingNotes/js/next-boot.js"></script><script src="/JavaReadingNotes/js/bookmark.js"></script><script src="/JavaReadingNotes/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/third-party/search/local-search.js"></script>



  <script src="/JavaReadingNotes/js/third-party/fancybox.js"></script>

  <script src="/JavaReadingNotes/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/JavaReadingNotes/js/third-party/math/mathjax.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://lanlan2017.github.io/JavaReadingNotes/page/73/"}</script>
  <script src="/JavaReadingNotes/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":null,"enable":true,"serverURL":"https://waline-test-mzjszagu6-lanlan2017.vercel.app","placeholder":"填写邮箱可接收回复通知 填写个人网址可为您引流","avatar":"mm","pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"meta":["nick","mail","link"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/JavaReadingNotes/page/73/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
</body>
</html>
