<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0">

<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="apple-touch-icon" sizes="180x180" href="/JavaReadingNotes/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/JavaReadingNotes/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/JavaReadingNotes/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/JavaReadingNotes/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="_Sly-yzHYmALHXzjFpPWsodMrjBSphw7bfRbMUH80Qc">
  <meta name="msvalidate.01" content="B1CFD346B8DEBBFE0C983C2AF8955531">
  <meta name="baidu-site-verification" content="vkMTwK56xr">

<link rel="stylesheet" href="/JavaReadingNotes/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"lanlan2017.github.io","root":"/JavaReadingNotes/","images":"/JavaReadingNotes/images","scheme":"Gemini","darkmode":true,"version":"8.8.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/JavaReadingNotes/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/JavaReadingNotes/js/config.js"></script>
<meta name="description" content="好好学习，天天向上">
<meta property="og:type" content="website">
<meta property="og:title" content="蓝蓝站点">
<meta property="og:url" content="https://lanlan2017.github.io/JavaReadingNotes/page/128/index.html">
<meta property="og:site_name" content="蓝蓝站点">
<meta property="og:description" content="好好学习，天天向上">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="蓝蓝">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://lanlan2017.github.io/JavaReadingNotes/page/128/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/128/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>蓝蓝站点</title>
  

  <script src="/JavaReadingNotes/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?dadeb188eb14ccde0b25a19230c429b5"></script>


<link rel="dns-prefetch" href="https://waline-test-lanlan2017.vercel.app">
  <noscript>
    <link rel="stylesheet" href="/JavaReadingNotes/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/JavaReadingNotes/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">蓝蓝站点</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Java读书笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/JavaReadingNotes/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-dir"><a href="/JavaReadingNotes/dir/" rel="section"><i class="fa fa-sitemap fa-fw"></i>目录</a></li>
        <li class="menu-item menu-item-categories"><a href="/JavaReadingNotes/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/JavaReadingNotes/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-tags"><a href="/JavaReadingNotes/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="蓝蓝"
      src="/JavaReadingNotes/images/avatar.gif">
  <p class="site-author-name" itemprop="name">蓝蓝</p>
  <div class="site-description" itemprop="description">好好学习，天天向上</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/JavaReadingNotes/archives/">
          <span class="site-state-item-count">1871</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/JavaReadingNotes/categories/">
        <span class="site-state-item-count">626</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/todo/" title="todo → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;todo&#x2F;"><i class="fa fa-check-square fa-fw"></i>todo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://lanlan2017.github.io/links/" title="links → https:&#x2F;&#x2F;lanlan2017.github.io&#x2F;links&#x2F;"><i class="fa fa-link fa-fw"></i>links</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/5948c7f1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/5948c7f1/" class="post-title-link" itemprop="url">10.4.3 业务逻辑组件的异常处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 22:37:53" itemprop="dateCreated datePublished" datetime="2019-08-10T22:37:53+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-4-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%E5%AE%9E%E7%8E%B0/" itemprop="url" rel="index"><span itemprop="name">10.4 业务逻辑层实现</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/5948c7f1/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/5948c7f1/" data-xid="/JavaReadingNotes/5948c7f1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>757</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-4-3-业务逻辑组件的异常处理"><a href="#10-4-3-业务逻辑组件的异常处理" class="headerlink" title="10.4.3 业务逻辑组件的异常处理"></a>10.4.3 业务逻辑组件的异常处理</h1><p><code>Spring</code>的异常处理哲学简化了异常的处理:所有的数据库访问异常都被包装成了<code>Runtime</code>异常,在<code>DAO</code>组件中无须显式捕捉异常,所有的异常都被推迟到业务逻辑组件中捕捉。<br>在业务逻辑组件中捕捉系统抛出的原始异常,这种原始异常不应该被客户端看到,甚至不应该在服务器端暴露出来。为了达到这个目的,可以使用<code>log4j</code> 的日志功能:系统使用<code>log4j</code>记录业务逻辑方法中原始的异常信息,然后再抛出自定义异常。下面是本系统中自定义异常类的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuctionException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">// 定义一个无参数的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AuctionException</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 定义一个带message参数的构造参数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AuctionException</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>系统业务逻辑方法采用如下方式来处理逻辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//完成业务逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//捕捉异常</span></span><br><span class="line"><span class="keyword">catch</span> (Exception e)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//通过日志记录异常</span></span><br><span class="line">    log.debug(e.getMessage());</span><br><span class="line">    <span class="comment">//抛出新异常</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> AuctionException(<span class="string">&quot;底层业务异常,请重试&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>业务层抛出的业务异常会传播到控制器层,而控制器则负责将该异常封装成<code>JSON</code>数据响应传给浏览器端的JS脚本。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/3c0fb3c9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/3c0fb3c9/" class="post-title-link" itemprop="url">10.4 业务逻辑层实现 10.4.1 设计业务逻辑组件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 22:33:32" itemprop="dateCreated datePublished" datetime="2019-08-10T22:33:32+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-4-%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82%E5%AE%9E%E7%8E%B0/" itemprop="url" rel="index"><span itemprop="name">10.4 业务逻辑层实现</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/3c0fb3c9/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/3c0fb3c9/" data-xid="/JavaReadingNotes/3c0fb3c9/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-4-业务逻辑层实现"><a href="#10-4-业务逻辑层实现" class="headerlink" title="10.4 业务逻辑层实现"></a>10.4 业务逻辑层实现</h1><p>本系统的规模不大,只涉及5个<code>DAO</code>组件,分别用于对5个持久化对象进行增、删、改、查操作。本系统使用一个业务逻辑对象即可封装5个<code>DAO</code>组件。</p>
<h1 id="10-4-1-设计业务逻辑组件"><a href="#10-4-1-设计业务逻辑组件" class="headerlink" title="10.4.1 设计业务逻辑组件"></a>10.4.1 设计业务逻辑组件</h1><p>业务逻辑组件同样采用<code>面向接口编程</code>的原则,让系统中的控制器不是依赖于业务逻辑组件的实现类,而是依赖于业务逻辑组件的接口类,从而降低了系统重构的代价。<br>该业务逻辑组件接口的类图如图10.9所示。</p>
<p><code>AuctionService</code> 接口里定义了大量业务方法,这些业务方法的实现依赖于<code>DAO</code> 组件。为了达到高层次的解耦,这里推荐<strong>使用接口分离的规则,将业务逻辑组件分成接口和相应的实现类两个部分</strong>。<br><code>AuctionServiceImpl</code> 实现类实现了<code>AuctionService</code> 接口,并实现了该接口中的所有方法。此外,<code>AuctionServiceImpl</code>实现类中比接口中多了如下5个依赖注入的方法。</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>setUserDao(AuctionUserDao dao)</code></td>
<td align="left">为业务逻辑组件依赖注入<code>AuctionUserDao</code>的方法。</td>
</tr>
<tr>
<td align="left"><code>setBidDao(BidDao dao)</code></td>
<td align="left">为业务逻辑组件依赖注入<code>BidDao</code>的方法。</td>
</tr>
<tr>
<td align="left"><code>setItemDao(ItemDao dao)</code></td>
<td align="left">为业务逻辑组件依赖注入<code>ItemDao</code>的方法。</td>
</tr>
<tr>
<td align="left"><code>setKindDao(KindDao dao)</code></td>
<td align="left">为业务逻辑组件依赖注入<code>KindDao</code>的方法。</td>
</tr>
<tr>
<td align="left"><code>setStateDao(StateDao dao)</code></td>
<td align="left">为业务逻辑组件依赖注入<code>StateDao</code>的方法。</td>
</tr>
<tr>
<td align="left">该接口的作用同样是定义一种规范,规定该业务逻辑组件应该实现的方法。下面是该接口的代码:</td>
<td align="left"></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.business.BidBean;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.business.ItemBean;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.business.KindBean;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.Bid;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.Item;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.Kind;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.exception.AuctionException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AuctionService</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据赢取者查询物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> winerId 赢取者的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 赢取者获得的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ItemBean&gt; <span class="title">getItemByWiner</span><span class="params">(Integer winerId)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询流拍的全部物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 全部流拍物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ItemBean&gt; <span class="title">getFailItems</span><span class="params">()</span><span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户名，密码验证登录是否成功</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username 登录的用户名</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> pass 登录的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 登录成功返回用户ID，否则返回-1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">validLogin</span><span class="params">(String username , String pass)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询用户的全部出价</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId 竞价用户的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 用户的全部出价</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;BidBean&gt; <span class="title">getBidByUser</span><span class="params">(Integer userId)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户查找目前仍在拍卖中的全部物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId 所属者的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 属于当前用户的、处于拍卖中的全部物品。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ItemBean&gt; <span class="title">getItemsByOwner</span><span class="params">(Integer userId)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询全部种类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 系统中全部全部种类</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;KindBean&gt; <span class="title">getAllKind</span><span class="params">()</span> <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item 新增的物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> avail 有效天数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kindId 物品种类ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId 添加者的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 新增物品的主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addItem</span><span class="params">(Item item, <span class="keyword">int</span> avail , <span class="keyword">int</span> kindId , Integer userId)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加种类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kind 新增的种类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 新增种类的主键</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addKind</span><span class="params">(Kind kind)</span> <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据产品分类，获取处于拍卖中的全部物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kindId 种类id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该类的全部产品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;ItemBean&gt; <span class="title">getItemsByKind</span><span class="params">(<span class="keyword">int</span> kindId)</span> <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据种类id获取种类名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kindId 种类id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该种类的名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">getKind</span><span class="params">(<span class="keyword">int</span> kindId)</span> <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据物品id，获取物品</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> itemId 物品id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定id对应的物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">ItemBean <span class="title">getItem</span><span class="params">(<span class="keyword">int</span> itemId)</span> <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 增加新的竞价，并对竞价用户发邮件通知</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> itemId 物品id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> bid 竞价</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId 竞价用户的ID</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回新增竞价记录的ID</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addBid</span><span class="params">(<span class="keyword">int</span> itemId , Bid bid ,Integer userId)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据时间来修改物品的赢取者</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateWiner</span><span class="params">()</span><span class="keyword">throws</span> AuctionException</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在该接口里定义了大量的业务逻辑方法,实际上,这些业务逻辑方法通常对应一次客户请求。这些业务逻辑方法当然不会被直接暴露出来,这些业务逻辑方法只是供前端<code>MVC</code> 控制器调用,而<code>MVC</code> 控制器并不直接与业务逻辑组件的实现类耦合,而仅仅只是依赖于系统的业务逻辑组件接口。当需要重构系统业务逻辑组件时,只要该组件的接口不变,则系统的功能不变,系统的控制器层也无须改变,从而把系统的业务逻辑层的改变阻止在该层以内,避免了向上扩散。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/518d23e1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/518d23e1/" class="post-title-link" itemprop="url">10.3.3 部署DAO组件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 22:08:50" itemprop="dateCreated datePublished" datetime="2019-08-10T22:08:50+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-3-DAO%E5%B1%82%E5%AE%9E%E7%8E%B0/" itemprop="url" rel="index"><span itemprop="name">10.3 DAO层实现</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/518d23e1/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/518d23e1/" data-xid="/JavaReadingNotes/518d23e1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.6k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>3 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-3-3-部署DAO组件"><a href="#10-3-3-部署DAO组件" class="headerlink" title="10.3.3 部署DAO组件"></a>10.3.3 部署DAO组件</h1><p>对于所有继承<code>BaseDaoHibernate4</code> 的<code>DAO</code>实现类必须为其提供<code>SessionFactory</code>的引用,<code>Spring</code>的<code>IoC</code>容器可以将<code>SessionFactory</code>注入到<code>DAO</code>组件中。<br>下面是在本系统中部署<code>DAO</code>组件的配置代码,本系统以单独配置文件来部署<code>DAO</code>组件,这样可以将不同组件放在不同配置文件中分开管理,从而避免<code>Spring</code> 配置文件过于庞大。下面是部署<code>DAO</code>组件的配置文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Spring配置文件的根元素，并指定Schema信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 定义数据源Bean，使用C3P0数据源实现 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注意修改这里的数据库密码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:jdbcUrl</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/auction&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:user</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:password</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:maxPoolSize</span>=<span class="string">&quot;200&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:minPoolSize</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:initialPoolSize</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:maxIdleTime</span>=<span class="string">&quot;2000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 定义Hibernate的SessionFactory </span></span><br><span class="line"><span class="comment">        并为它注入数据源，设置Hibernate配置属性等。--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sessionFactory&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:dataSource-ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;annotatedClasses&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.AuctionUser<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Bid<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Item<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Kind<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.State<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 定义Hibernate的SessionFactory的属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hibernateProperties&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 指定数据库方言 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.dialect&quot;</span>&gt;</span></span><br><span class="line">                    org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 显示Hibernate持久化操作所生成的SQL --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.show_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 将SQL脚本进行格式化后再输出 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.format_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.hbm2ddl.auto&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置daoTemplate，作为所有DAO组件的模板，</span></span><br><span class="line"><span class="comment">        为DAO组件注入SessionFactory引用 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1号代码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">abstract</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:sessionFactory-ref</span>=<span class="string">&quot;sessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置stateDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stateDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.StateDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置kindDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;kindDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.KindDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置auctionDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;auctionUserDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.AuctionUserDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置bidDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bidDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.BidDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置itemDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;itemDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.ItemDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里在粗体字代码中配置了一个<code>daoTemplate</code>抽象<code>Bean</code>,它将作为系统中其他<code>DAO</code>组件的模板,这样就可将<code>daoTemplate</code>的配置属性传递给其他<code>DAO Bean</code>。<br>为了让其他<code>DAO</code>组件获得<code>daoTemplate</code> 的配置属性,必须将其他<code>DAO</code> 组件配置成<code>daoTemplate</code>的子<code>Bean</code>,子<code>Bean</code>通过<code>parent</code>属性指定其父<code>Bean</code>,正如在上面的配置文件中,在每个<code>DAO Bean</code>的粗体字代码中都指定了<code>parent=&quot;daoTemplate&quot;</code>,这表明这些<code>DAO</code>组件将以<code>daoTemplate</code>作为模板。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/fba18617/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/fba18617/" class="post-title-link" itemprop="url">10.3.2 实现DAO组件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 21:17:52" itemprop="dateCreated datePublished" datetime="2019-08-10T21:17:52+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-3-DAO%E5%B1%82%E5%AE%9E%E7%8E%B0/" itemprop="url" rel="index"><span itemprop="name">10.3 DAO层实现</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/fba18617/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/fba18617/" data-xid="/JavaReadingNotes/fba18617/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>4.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-3-2-实现DAO组件"><a href="#10-3-2-实现DAO组件" class="headerlink" title="10.3.2 实现DAO组件"></a>10.3.2 实现DAO组件</h1><p>为了实现<code>DAO</code>模式,系统至少需要具有如下三个部分:</p>
<ul>
<li><code>DAO</code>接口</li>
<li><code>DAO</code>接口的实现类</li>
<li><code>DAO</code>工厂</li>
</ul>
<p>对于采用<code>Spring</code>框架的应用而言,无须额外提供<code>DAO</code>工厂,因为<code>Spring</code>容器本身就是<code>DAO</code>工厂。此外,<strong>开发者需要提供<code>DAO</code>接口和<code>DAO</code>实现类</strong>。每个<code>DAO</code>组件都应该提供标准的<code>新增</code>、<code>加载</code>、<code>更新</code>和<code>删除</code>等方法,此外还需提供数量不等的<code>查询方法</code>。<br>如下是<code>AuctionUserDao</code>接口的源代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.AuctionUser;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.common.dao.BaseDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AuctionUserDao</span> <span class="keyword">extends</span> <span class="title">BaseDao</span>&lt;<span class="title">AuctionUser</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户名，密码查找用户</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username 查询所需的用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pass     查询所需的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户名、密码对应的用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">AuctionUser <span class="title">findByNameAndPass</span><span class="params">(String username, String pass)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据物品id、出价查询用户</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> itemId 物品id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> price  出价的价格</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定物品、指定竞价对应的用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">AuctionUser <span class="title">findByItemAndPrice</span><span class="params">(Integer itemId, Double price)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从表面上看,在该<code>AuctionUserDao</code> 接口中只定义了2 个方法,但由于该接口继承了<code>BaseDao&lt;AuctionUser&gt;</code>,因此该接口其实也包含了增加、修改,根据主键加载、删除等通用的<code>DAO</code> 方法。在该接口中额外定义的<code>findUserByNameAndPass()</code>方法,可根据用户名、密码查询<code>AuctionUser</code>,由于本系统在映射<code>AuctionUser</code>的<code>username</code>属性时指定了<code>unique=&quot;true&quot;</code>,因此根据<code>username</code>、<code>pass</code>查询时不会返回<code>List</code>,最多只会返回一个<code>AuctionUser</code>实例。<br>定义了<code>AuctionUserDao</code>接口之后,下面就可以为该接口提供实现类了,代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.dao.AuctionUserDao;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.AuctionUser;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.common.dao.impl.BaseDaoHibernate4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuctionUserDaoHibernate</span> <span class="keyword">extends</span> <span class="title">BaseDaoHibernate4</span>&lt;<span class="title">AuctionUser</span>&gt;</span></span><br><span class="line"><span class="class">        <span class="keyword">implements</span></span></span><br><span class="line"><span class="class">            <span class="title">AuctionUserDao</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据用户名，密码查找用户</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     *            查询所需的用户名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pass</span></span><br><span class="line"><span class="comment">     *            查询所需的密码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户名、密码对应的用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuctionUser <span class="title">findByNameAndPass</span><span class="params">(String username, String pass)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 执行HQL查询</span></span><br><span class="line">        <span class="comment">// 1号方法</span></span><br><span class="line">        List&lt;AuctionUser&gt; ul = (List&lt;AuctionUser&gt;) find(</span><br><span class="line">                <span class="string">&quot;from AuctionUser au where au.username=?0 and au.userpass=?1&quot;</span>,</span><br><span class="line">                username, pass);</span><br><span class="line">        <span class="comment">// 返回查询得到的第一个AuctionUser对象</span></span><br><span class="line">        <span class="keyword">if</span> (ul != <span class="keyword">null</span> &amp;&amp; ul.size() == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> (AuctionUser) ul.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据物品id、出价查询用户</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> itemId</span></span><br><span class="line"><span class="comment">     *            物品id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> price</span></span><br><span class="line"><span class="comment">     *            竞价的价格</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定物品、指定竞价对应的用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuctionUser <span class="title">findByItemAndPrice</span><span class="params">(Integer itemId, Double price)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 执行HQL查询</span></span><br><span class="line">        List&lt;AuctionUser&gt; userList = (List&lt;AuctionUser&gt;) find(</span><br><span class="line">                <span class="string">&quot;select user from AuctionUser user inner join user.bids bid&quot;</span></span><br><span class="line">                        + <span class="string">&quot; where bid.bidItem.id=?0 and bid.bidPrice=?1&quot;</span>,</span><br><span class="line">                itemId, price);</span><br><span class="line">        <span class="comment">// 返回查询得到的第一个Bid对象关联的AuctionUser对象</span></span><br><span class="line">        <span class="keyword">if</span> (userList != <span class="keyword">null</span> &amp;&amp; userList.size() == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> userList.get(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>AuctionUserDaoHibernate</code>类中的方法稍稍复杂一些,该方法用于根据用户名、密码查找用户。<br><code>ItemDao</code>比<code>AuctionUserDao</code>稍微复杂一点,下面是<code>ItemDao</code>接口的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.Item;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.common.dao.BaseDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ItemDao</span> <span class="keyword">extends</span> <span class="title">BaseDao</span>&lt;<span class="title">Item</span>&gt;</span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据产品分类，获取当前拍卖的全部商品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kindId</span></span><br><span class="line"><span class="comment">     *            种类id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该类的全部产品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Item&gt; <span class="title">findByKind</span><span class="params">(Integer kindId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据所有者查找处于拍卖中的物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> useId</span></span><br><span class="line"><span class="comment">     *            所有者Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户处于拍卖中的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Item&gt; <span class="title">findByOwner</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据赢取者查找物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     *            赢取者Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户赢取的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Item&gt; <span class="title">findByWiner</span><span class="params">(Integer userId)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据物品状态查找物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stateId</span></span><br><span class="line"><span class="comment">     *            状态Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该状态下的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">List&lt;Item&gt; <span class="title">findByState</span><span class="params">(Integer stateId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样,让<code>ItemDaoHibernate</code>继承<code>BaseDaoHibernate4</code>就能用简单的代码来实现该<code>DAO</code>组件的全部方法了,下面是<code>ItemDaoHibernate</code>类的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.dao.ItemDao;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.auction.domain.Item;</span><br><span class="line"><span class="keyword">import</span> org.crazyit.common.dao.impl.BaseDaoHibernate4;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemDaoHibernate</span> <span class="keyword">extends</span> <span class="title">BaseDaoHibernate4</span>&lt;<span class="title">Item</span>&gt; <span class="keyword">implements</span> <span class="title">ItemDao</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据产品分类，获取当前拍卖的全部商品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> kindId</span></span><br><span class="line"><span class="comment">     *            种类id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该类的全部产品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Item&gt; <span class="title">findByKind</span><span class="params">(Integer kindId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(<span class="string">&quot;from Item as i where i.kind.id=?0 and i.itemState.id=1&quot;</span>,</span><br><span class="line">                kindId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据所有者查找处于拍卖中的物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> useId</span></span><br><span class="line"><span class="comment">     *            所有者Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户处于拍卖中的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Item&gt; <span class="title">findByOwner</span><span class="params">(Integer userId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;Item&gt;) find(</span><br><span class="line">                <span class="string">&quot;from Item as i where i.owner.id=?0 and i.itemState.id=1&quot;</span>,</span><br><span class="line">                userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据赢取者查找物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> userId</span></span><br><span class="line"><span class="comment">     *            赢取者Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 指定用户赢取的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Item&gt; <span class="title">findByWiner</span><span class="params">(Integer userId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(</span><br><span class="line">                <span class="string">&quot;from Item as i where i.winer.id =?0&quot;</span> + <span class="string">&quot; and i.itemState.id=2&quot;</span>,</span><br><span class="line">                userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据物品状态查找物品</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> stateId</span></span><br><span class="line"><span class="comment">     *            状态Id;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 该状态下的全部物品</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Item&gt; <span class="title">findByState</span><span class="params">(Integer stateId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> find(<span class="string">&quot;from Item as i where i.itemState.id = ?0&quot;</span>, stateId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>与<code>AuctionUserDaoHiberante</code>类相似,<code>ItemDaoHibernate</code>类也非常简单,几乎所有方法都只要一行代码即可实现。<br>借助于<code>Spring+Hibernate</code>的简化结构,开发者可以非常简便地实现所有<code>DAO</code>组件。系统中的<code>KindDao</code>、<code>BidDao</code>、<code>StateDao</code>类都非常简单,故这里不再给出它们的实现。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/ec581a32/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/ec581a32/" class="post-title-link" itemprop="url">10.3 DAO层实现 10.3.1 DAO的基础配置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 21:09:03" itemprop="dateCreated datePublished" datetime="2019-08-10T21:09:03+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-3-DAO%E5%B1%82%E5%AE%9E%E7%8E%B0/" itemprop="url" rel="index"><span itemprop="name">10.3 DAO层实现</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/ec581a32/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/ec581a32/" data-xid="/JavaReadingNotes/ec581a32/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>3.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>4 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-3-DAO层实现"><a href="#10-3-DAO层实现" class="headerlink" title="10.3 DAO层实现"></a>10.3 DAO层实现</h1><p>本系统的后台完全采用轻量级<code>Java EE</code>应用的架构,系统持久层访问使用<code>DAO</code>组件完成。<code>DAO</code>组件抽象出底层的数据访问,业务逻辑组件无须理会数据库访问的细节,只需专注于业务逻辑的实现即可。<code>DAO</code> 将数据访问集中在独立的一层,所有的数据访问都由<code>DAO</code>对象完成,从而使系统具有更好的可维护性。<br><code>DAO</code> 组件还有助于提升系统的可移植性。独立的<code>DAO</code>层使得系统能在不同的数据库之间轻易切换,底层的数据库实现对于业务逻辑组件完全透明,移植数据库仅仅影响<code>DAO</code>层,切换不同的数据库不会影响业务逻辑组件,因此提高了系统的可移植性。<br>前面介绍的<code>BaseDao</code>接口、<code>BaseDaoHibernate4</code>接口可以极大地简化<code>DAO</code>组件的开发,因此本系统的<code>DAO</code>组件同样会继承<code>BaseDao</code>和<code>BaseDaoHibernate4</code>接口。</p>
<h1 id="10-3-1-DAO的基础配置"><a href="#10-3-1-DAO的基础配置" class="headerlink" title="10.3.1 DAO的基础配置"></a>10.3.1 DAO的基础配置</h1><p>对于<code>BaseDaoHibernate4</code>需要容器注入一个<code>SessionFactory</code>引用,该类也为依赖注入提供了<code>setSessionFactory()</code>方法。<code>BaseDaoHibernate4</code> 基类一旦获得<code>SessionFactory</code> 的引用,就可以完成大部分通用的增、删、改、查操作。<br><code>Spring</code>为整合<code>Hibernate</code>提供了<code>LocalSessionFactoryBean</code> 类,这样可以将<code>Hibernate</code> 的<code>SessionFactory</code>纳入其<code>IoC</code>容器内。在使用<code>LocalSessionFactoryBean</code>配置<code>SessionFactory</code>之前,必须为其提供对应的数据源。<code>SessionFactory</code>的相关配置片段如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Spring配置文件的根元素，并指定Schema信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 定义数据源Bean，使用C3P0数据源实现 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 注意修改这里的数据库密码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:jdbcUrl</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/auction&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:user</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:password</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:maxPoolSize</span>=<span class="string">&quot;200&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:minPoolSize</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:initialPoolSize</span>=<span class="string">&quot;2&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:maxIdleTime</span>=<span class="string">&quot;2000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 定义Hibernate的SessionFactory </span></span><br><span class="line"><span class="comment">        并为它注入数据源，设置Hibernate配置属性等。--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sessionFactory&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:dataSource-ref</span>=<span class="string">&quot;dataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;annotatedClasses&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.AuctionUser<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Bid<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Item<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.Kind<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.crazyit.auction.domain.State<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 定义Hibernate的SessionFactory的属性 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hibernateProperties&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 指定数据库方言 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.dialect&quot;</span>&gt;</span></span><br><span class="line">                    org.hibernate.dialect.MySQL5InnoDBDialect<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 显示Hibernate持久化操作所生成的SQL --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.show_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 将SQL脚本进行格式化后再输出 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.format_sql&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;hibernate.hbm2ddl.auto&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置daoTemplate，作为所有DAO组件的模板，</span></span><br><span class="line"><span class="comment">        为DAO组件注入SessionFactory引用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">abstract</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">p:sessionFactory-ref</span>=<span class="string">&quot;sessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置stateDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;stateDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.StateDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置kindDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;kindDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.KindDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置auctionDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;auctionUserDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.AuctionUserDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置bidDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;bidDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.BidDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置itemDao组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;itemDao&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">parent</span>=<span class="string">&quot;daoTemplate&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;org.crazyit.auction.dao.impl.ItemDaoHibernate&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以将<code>Hibernate</code>属性直接放在<code>LocalSessionFactoryBean</code>内配置,也可以放在<code>hibernate.cfg.xml</code>文件中配置。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/2a2326a3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/2a2326a3/" class="post-title-link" itemprop="url">10.2.2 实现Domain Object</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 13:35:13" itemprop="dateCreated datePublished" datetime="2019-08-10T13:35:13+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-2-%E5%AE%9E%E7%8E%B0Hibernate%E6%8C%81%E4%B9%85%E5%8C%96%E7%B1%BB/" itemprop="url" rel="index"><span itemprop="name">10.2 实现Hibernate持久化类</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/2a2326a3/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/2a2326a3/" data-xid="/JavaReadingNotes/2a2326a3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-2-2-实现Domain-Object"><a href="#10-2-2-实现Domain-Object" class="headerlink" title="10.2.2 实现Domain Object"></a>10.2.2 实现Domain Object</h1><p>各<code>Domain Object</code>之间存在的关联关系,由图10.8可以清楚地看到,其中<code>AuctionUser</code>和<code>Item</code>两个持久化类之间的关系尤为复杂,它们之间存在<strong>两种1对N</strong>的关系,分别是<code>所属</code>和<code>赢取</code>两种关系。<br>下面是<code>AuctionUser</code>类的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Column;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.OneToMany;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name=&quot;auction_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuctionUser</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 标识属性</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;user_id&quot;)</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy=GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">// 用户名成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">// 密码成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String userpass;</span><br><span class="line">    <span class="comment">// 电子邮件成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据属主关联的物品实体</span></span><br><span class="line">    <span class="meta">@OneToMany(targetEntity=Item.class ,</span></span><br><span class="line"><span class="meta">        mappedBy=&quot;owner&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Item&gt; itemsByOwner = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="comment">// 根据赢取者关联的物品实体</span></span><br><span class="line">    <span class="meta">@OneToMany(targetEntity=Item.class ,</span></span><br><span class="line"><span class="meta">        mappedBy=&quot;winer&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Item&gt; itemsByWiner = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 该用户所参与的全部竞价</span></span><br><span class="line">    <span class="meta">@OneToMany(targetEntity=Bid.class ,</span></span><br><span class="line"><span class="meta">        mappedBy=&quot;bidUser&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Bid&gt; bids = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参数的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AuctionUser</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化全部成员变量的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AuctionUser</span><span class="params">(Integer id , String username</span></span></span><br><span class="line"><span class="params"><span class="function">        , String userpass , String email)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">        <span class="keyword">this</span>.userpass = userpass;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// id的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// username的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// userpass的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserpass</span><span class="params">(String userpass)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.userpass = userpass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUserpass</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.userpass;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// email的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmail</span><span class="params">(String email)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEmail</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemsByOwner的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemsByOwner</span><span class="params">(Set&lt;Item&gt; itemsByOwner)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemsByOwner = itemsByOwner;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Item&gt; <span class="title">getItemsByOwner</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemsByOwner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemsByWiner的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemsByWiner</span><span class="params">(Set&lt;Item&gt; itemsByWiner)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemsByWiner = itemsByWiner;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Item&gt; <span class="title">getItemsByWiner</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemsByWiner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bids的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBids</span><span class="params">(Set&lt;Bid&gt; bids)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bids = bids;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Bid&gt; <span class="title">getBids</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.bids;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>AuctionUser</code> 类里保留了两个<code>Set&lt;Item&gt;</code>属性:<code>itemsByOwner</code>和<code>itemsByWiner</code>,其中<code>itemsByOwner</code>用于访问属于该用户的全部拍卖物品,而<code>itemsByWiner</code>用于访问该用户赢取的全部拍卖物品,这两个属性的关联实体都是<code>Item</code>。此外,<code>AuctionUser</code>类里还有一个<code>bids</code>属性,该属性用于访问该用户参与的全部竞价记录。<br>本示例没有使用映射文件来管理<code>Hibernate</code>实体,而是采用<code>Annotation</code>来管理持久化实体。在该程序中,在定义<code>AuctionUser</code>类时使用了<code>@Entity</code>修饰,该<code>Annotation</code>可将该类映射成持久化实体。除此之外,<code>AuctionUser</code>实体和3个关联实体存在1对N的关系,因此需要在<code>AuctionUser</code>类的<code>itemsByOwner</code>、<code>itemsByWiner</code>和<code>bids</code>属性上使用<code>@OneToMany</code>修饰。<br>本系统将把所有1对N关联都映射成双向关联,因此我们为3个<code>@OneToMany</code>元素都指定了<code>mappedBy</code>属性,这表明<code>AuctionUser</code>实体(1的一端)不控制关联关系。根据<code>Hibernate</code>的建议:<strong>对于双向1对N关联,不要让1的一端控制关系,而应该让N的一端控制关联关系</strong>,这样可以保证更好的性能。<br><code>Item</code>类除了和<code>AuctionUser</code>之间存在两种N对1的关联关系外,还和<code>Bid</code>之间存在1对N的关联关系,和<code>Kind</code>之间存在N对1的关联关系,和<code>State</code>之间存在N对1的关联关系。下面是<code>Item</code>类的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.crazyit.auction.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.persistence.Column;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.JoinColumn;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.ManyToOne;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.OneToMany;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name=&quot;item&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 标识属性</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;item_id&quot;)</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy=GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">// 物品Remark</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;item_remark&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String itemRemark;</span><br><span class="line">    <span class="comment">// 物品名称</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;item_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String itemName;</span><br><span class="line">    <span class="comment">// 物品描述</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;item_desc&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String itemDesc;</span><br><span class="line">    <span class="comment">// 物品添加时间</span></span><br><span class="line">    <span class="keyword">private</span> Date addtime;</span><br><span class="line">    <span class="comment">// 物品结束拍卖时间</span></span><br><span class="line">    <span class="keyword">private</span> Date endtime;</span><br><span class="line">    <span class="comment">// 物品的起拍价</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;init_price&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> initPrice;</span><br><span class="line">    <span class="comment">// 物品的最高价</span></span><br><span class="line">    <span class="meta">@Column(name=&quot;max_price&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> maxPrice;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 该物品的所有者</span></span><br><span class="line">    <span class="meta">@ManyToOne(targetEntity=AuctionUser.class)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name=&quot;owner_id&quot;, nullable=false)</span></span><br><span class="line">    <span class="keyword">private</span> AuctionUser owner;</span><br><span class="line">    <span class="comment">// 该物品的赢取者</span></span><br><span class="line">    <span class="meta">@ManyToOne(targetEntity=AuctionUser.class)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name=&quot;winer_id&quot;, nullable=true)</span></span><br><span class="line">    <span class="keyword">private</span> AuctionUser winer;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 该物品所属的种类</span></span><br><span class="line">    <span class="meta">@ManyToOne(targetEntity=Kind.class)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name=&quot;kind_id&quot;, nullable=false)</span></span><br><span class="line">    <span class="keyword">private</span> Kind kind;</span><br><span class="line">    <span class="comment">// 该物品所处的状态</span></span><br><span class="line">    <span class="meta">@ManyToOne(targetEntity=State.class)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name=&quot;state_id&quot;, nullable=false)</span></span><br><span class="line">    <span class="keyword">private</span> State itemState;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 该物品对应的全部竞价记录</span></span><br><span class="line">    <span class="meta">@OneToMany(targetEntity=Bid.class ,</span></span><br><span class="line"><span class="meta">        mappedBy=&quot;bidItem&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Bid&gt; bids = <span class="keyword">new</span> HashSet&lt;Bid&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 无参数的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Item</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化全部成员变量的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Item</span><span class="params">(Integer id , String itemRemark , String itemName ,</span></span></span><br><span class="line"><span class="params"><span class="function">        String itemDesc , Date addtime , Date endtime ,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">double</span> initPrice , <span class="keyword">double</span> maxPrice , AuctionUser owner)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.itemRemark = itemRemark;</span><br><span class="line">        <span class="keyword">this</span>.itemName = itemName;</span><br><span class="line">        <span class="keyword">this</span>.itemDesc = itemDesc;</span><br><span class="line">        <span class="keyword">this</span>.addtime = addtime;</span><br><span class="line">        <span class="keyword">this</span>.endtime = endtime;</span><br><span class="line">        <span class="keyword">this</span>.initPrice = initPrice;</span><br><span class="line">        <span class="keyword">this</span>.maxPrice = maxPrice;</span><br><span class="line">        <span class="keyword">this</span>.owner = owner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// id的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemRemark的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemRemark</span><span class="params">(String itemRemark)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemRemark = itemRemark;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItemRemark</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemRemark;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemName的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemName</span><span class="params">(String itemName)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemName = itemName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItemName</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemDesc的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemDesc</span><span class="params">(String itemDesc)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemDesc = itemDesc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getItemDesc</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemDesc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// addtime的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddtime</span><span class="params">(Date addtime)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.addtime = addtime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getAddtime</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.addtime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// endtime的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEndtime</span><span class="params">(Date endtime)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.endtime = endtime;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Date <span class="title">getEndtime</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.endtime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// initPrice的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInitPrice</span><span class="params">(<span class="keyword">double</span> initPrice)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.initPrice = initPrice;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getInitPrice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.initPrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// maxPrice的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaxPrice</span><span class="params">(<span class="keyword">double</span> maxPrice)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.maxPrice = maxPrice;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getMaxPrice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.maxPrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// owner的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOwner</span><span class="params">(AuctionUser owner)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.owner = owner;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuctionUser <span class="title">getOwner</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.owner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// kind的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKind</span><span class="params">(Kind kind)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.kind = kind;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Kind <span class="title">getKind</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.kind;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// winer的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWiner</span><span class="params">(AuctionUser winer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.winer = winer;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> AuctionUser <span class="title">getWiner</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.winer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// itemState的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItemState</span><span class="params">(State itemState)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.itemState = itemState;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> State <span class="title">getItemState</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.itemState;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bids的setter和getter方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBids</span><span class="params">(Set&lt;Bid&gt; bids)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bids = bids;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Bid&gt; <span class="title">getBids</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.bids;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的5行粗体字代码为<code>Item</code>类映射了它关联的4个关联实体,其中</p>
<ul>
<li><code>owner</code>引用该物品的所属者,</li>
<li><code>winer</code> 引用该物品的赢取者,这两个属性都引用到<code>AuctionUser</code> 实体。</li>
</ul>
<p><code>Item</code> 类和<code>AuctionUser</code>、<code>Kind</code>、<code>State</code>之间存在<code>N对1</code>的关联,因此需要使用<code>@ManyToOne</code>来修饰这些属性;<br><code>Item</code>类和<code>Bid</code>之间存在<code>1对N</code>的关联,因此需要使用<code>@OneToMany</code>来修饰该属性。</p>
<p><code>@ManyToOne</code>的<code>fetch</code>属性<strong>默认</strong>为<code>FetchType.EAGER</code>,该属性将会取消延迟加载。对于N对1的关联映射,N的一端的实体只有一个关联实体,<strong>如果取消了延迟加载,那么系统加载N的一端的实体时,1的一端的实体同时也会被加载</strong>—这不会有太大的问题,因为只是额外多加载了一条记录。<br>在<code>@ManyToOne</code>中取消延迟加载不会有太大的性能下降。但对于<code>@OneToMany</code>等修饰集合的<code>Annotation</code>则尽量不要取消延迟加载。一旦为修饰集合属性的<code>Annotation</code>取消延迟加载,则意味着加载主表记录时,引用该记录的所有从表记录也会同时被加载,这会产生一个问题:我们无法预料有多少条从表记录引用该主表记录,同时加载这些从表记录可能引起巨大的性能下降。</p>
<p>本系统中还有<code>Bid</code>、<code>State</code>和<code>Kind</code>三个实体,但这三个实体都比<code>Item</code>和<code>AuctionUser</code>实体更简单。理解了<code>Item</code>和<code>AuctionUser</code>的映射关系,自然也就掌握了<code>Bid</code>、<code>State</code>和<code>Kind</code>实体的实现方法,故此处不再赘述。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/40916623/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/40916623/" class="post-title-link" itemprop="url">5.2 Hibernate入门</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 12:16:14" itemprop="dateCreated datePublished" datetime="2019-08-10T12:16:14+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">2 轻量级Java EE企业应用实战(第5版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">第5章 Hibernate的基本用法</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/5-2-Hibernate%E5%85%A5%E9%97%A8/" itemprop="url" rel="index"><span itemprop="name">5.2 Hibernate入门</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/40916623/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/40916623/" data-xid="/JavaReadingNotes/40916623/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>273</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="5-2-Hibernate入门"><a href="#5-2-Hibernate入门" class="headerlink" title="5.2 Hibernate入门"></a>5.2 Hibernate入门</h1><p><code>Hibernate</code> 的用法非常简单,只要在<code>Java</code>项目中引入<code>Hibernate</code> 框架,就能<strong>以面向对象的方式操作关系数据库</strong>。</p>
<h1 id="5-2-2-Hibernate的数据库操作"><a href="#5-2-2-Hibernate的数据库操作" class="headerlink" title="5.2.2 Hibernate的数据库操作"></a>5.2.2 Hibernate的数据库操作</h1><p>在所有的<code>ORM</code> 框架中有一个非常重要的媒介:<code>PO</code>对象(持久化对象)。通过持久化对象可对数据执行增、删、改的操作,也就是以面向对象的方式操作数据库。<br><strong>应用程序只需创建、修改、删除持久化对象即可</strong>,<code>Hibernate</code> 则负责把这种操作转换为对指定数据表的操作。<br><code>Hibernate</code>完全采用普通的<code>Java</code>对象作为持久化对象使用,看下面的<code>POJO</code>(普通的、传统的<code>Java</code> 对象类。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/b5299766/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/b5299766/" class="post-title-link" itemprop="url">5.1.4 Hibernate概述</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 12:07:40" itemprop="dateCreated datePublished" datetime="2019-08-10T12:07:40+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">2 轻量级Java EE企业应用实战(第5版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">第5章 Hibernate的基本用法</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/5-1-ORM%E5%92%8CHibeniate/" itemprop="url" rel="index"><span itemprop="name">5.1 ORM和Hibeniate</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/b5299766/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/b5299766/" data-xid="/JavaReadingNotes/b5299766/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>403</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="5-1-4-Hibernate概述"><a href="#5-1-4-Hibernate概述" class="headerlink" title="5.1.4 Hibernate概述"></a>5.1.4 Hibernate概述</h1><ul>
<li><code>Hibernate</code> 是一个面向<code>Java</code>环境的对象/关系数据库映射工具,用于把面向对象模型表示的对象映射到基于<code>SQL</code> 的关系模型的数据结构中。</li>
<li><code>Hibernate</code> 能消除那些针对特定数据库厂商的<code>SQL</code>代码,并且<strong>把结果集从<code>表格式的形式</code>转换成<code>值对象</code>的形式</strong>。</li>
<li><code>Hibernate</code>不仅仅<strong>管理<code>Java</code>类到数据库表的映射</strong>(包括<code>Java</code>数据类型到<code>SQL</code>数据类型的映射),还提供<code>数据查询</code>和<code>获取数据</code>的方法,可以大幅度减少开发时人工使用<code>SQL</code>和<code>JDBC</code>处理数据的时间。</li>
</ul>
<p><code>Hibernate</code> 能在众多的<code>ORM</code> 框架中脱颖而出,因为<code>Hibernate</code> 与其他<code>ORM</code> 框架对比具有如下优势。</p>
<ol>
<li>开源和免费的<code>License</code> ,方便需要时研究源代码,改写源代码,进行功能定制。</li>
<li>轻量级封装,避免引入过多复杂的问题,调试容易,减轻程序员负担。</li>
<li>有可扩展性, <code>API</code> 开放。 功能不够用的时候,自己编码进行扩展。</li>
<li>开发者活跃,产品有稳定的发展保障。</li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/65210d41/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/65210d41/" class="post-title-link" itemprop="url">5.1.2 基本映射方式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 12:00:07" itemprop="dateCreated datePublished" datetime="2019-08-10T12:00:07+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/" itemprop="url" rel="index"><span itemprop="name">2 轻量级Java EE企业应用实战(第5版)</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">第5章 Hibernate的基本用法</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/2-%E8%BD%BB%E9%87%8F%E7%BA%A7Java-EE%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%AE%9E%E6%88%98-%E7%AC%AC5%E7%89%88/%E7%AC%AC5%E7%AB%A0-Hibernate%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/5-1-ORM%E5%92%8CHibeniate/" itemprop="url" rel="index"><span itemprop="name">5.1 ORM和Hibeniate</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/65210d41/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/65210d41/" data-xid="/JavaReadingNotes/65210d41/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>428</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="5-1-2-基本映射方式"><a href="#5-1-2-基本映射方式" class="headerlink" title="5.1.2 基本映射方式"></a>5.1.2 基本映射方式</h1><ol>
<li><strong>数据<code>表</code>映射<code>类</code></strong>:持久化类被映射到一个数据表。程序使用这个持久化类来创建实例、修改属性、删除实例时,系统自动会转换为对这个表进行<code>CRUD</code> 操作。受<code>ORM</code> 管理的持久化类对应一个数据表,<strong>只要程序对这个持久化类进行操作,系统就可以转换成对对应数据表的操作</strong>。</li>
<li><strong>数据表的<code>行</code>映射<code>对象</code></strong>:持久化类会生成很多实例,<strong>每个实例就对应数据表中的一行记录</strong>。当程序在应用中修改持久化类的某个实例时, <code>ORM</code> 工具将会转换成对对应数据表中特定行的操作。</li>
<li><strong>数据表的<code>列</code>(字段)映射<code>对象的属性</code></strong>: 当程序修改某个持久化对象的指定属性时(持久化实例映射到数据行) , <code>ORM</code> 将会转换成对对应数据表中指定数据行、指定列的操作。</li>
</ol>
<p>基于这种基本的映射方式,<code>ORM</code>工具可完成对象模型和关系模型之间的相互映射。在<code>ORM</code>框架中,持久化对象是一种中间媒介,<strong>应用程序只需操作持久化对象</strong>,<strong><code>ORM</code>框架则负责将这种操作转换为底层数据库操作</strong>,从而将开发者从关系模型中释放出来,<strong>使得开发者能以面向对象的思维操作关系数据库</strong>.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://lanlan2017.github.io/JavaReadingNotes/59f974a0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/JavaReadingNotes/images/avatar.gif">
      <meta itemprop="name" content="蓝蓝">
      <meta itemprop="description" content="好好学习，天天向上">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蓝蓝站点">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/JavaReadingNotes/59f974a0/" class="post-title-link" itemprop="url">10.2 实现Hibernate持久化类 10.2.1 设计Domain Object</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-08-10 00:08:21" itemprop="dateCreated datePublished" datetime="2019-08-10T00:08:21+08:00">2019-08-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-02-07 01:34:57" itemprop="dateModified" datetime="2020-02-07T01:34:57+08:00">2020-02-07</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">5 疯狂前端开发讲义JQuery AngularJS Bootstrap前端开发实战</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">第10章 jQuery+Bootstrap整合开发 电子拍卖系统</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/JavaReadingNotes/categories/5-%E7%96%AF%E7%8B%82%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B2%E4%B9%89JQuery-AngularJS-Bootstrap%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/%E7%AC%AC10%E7%AB%A0-jQuery-Bootstrap%E6%95%B4%E5%90%88%E5%BC%80%E5%8F%91-%E7%94%B5%E5%AD%90%E6%8B%8D%E5%8D%96%E7%B3%BB%E7%BB%9F/10-2-%E5%AE%9E%E7%8E%B0Hibernate%E6%8C%81%E4%B9%85%E5%8C%96%E7%B1%BB/" itemprop="url" rel="index"><span itemprop="name">10.2 实现Hibernate持久化类</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
    <span class="post-meta-item-icon">
      <i class="far fa-comment"></i>
    </span>
    <span class="post-meta-item-text">Waline：</span>
  
    <a title="waline" href="/JavaReadingNotes/59f974a0/#waline-comments" itemprop="discussionUrl">
      <span class="post-comments-count waline-comment-count" id="/JavaReadingNotes/59f974a0/" data-xid="/JavaReadingNotes/59f974a0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="10-2-实现Hibernate持久化类"><a href="#10-2-实现Hibernate持久化类" class="headerlink" title="10.2 实现Hibernate持久化类"></a>10.2 实现Hibernate持久化类</h1><p>本系统打算使用<code>贫血模型</code>定义<code>Domain Object</code>,系统<code>Domain``Object</code>类就是持久化类,这些持久化类仅仅为各属性提供必需的<code>setter</code>和<code>getter</code>方法,并未包含业务逻辑方法。<strong>所有的业务逻辑方法都由业务逻辑组件提供实现</strong>。</p>
<h1 id="10-2-1-设计Domain-Object"><a href="#10-2-1-设计Domain-Object" class="headerlink" title="10.2.1 设计Domain Object"></a>10.2.1 设计Domain Object</h1><p>本系统的开发并未完全按<code>OOA</code>、<code>OOD</code>的过程进行,而是采用了**传统的信息化系统开发过程,<code>先设计系统的数据库</code>**。因此在系统建模期间,已经得到了系统的<code>E/R</code>图,根据<code>E/R</code>图可以创建数据库的表,数据库表结构建立以后,可以根据表结构编写持久化对象。<br>虽然这个过程并不完全符合面向对象的设计过程,但因为数据库的建立对于企业信息应用非常重要,往往难以放弃分析系统的<code>E/R</code>关系图,因此<code>E/R</code>图的建立也是非常基础的部分。实际上<code>E/R</code>图也可用于辅助设计<code>Domain Object</code>。<br>本系统一共有如下5个<code>Domain Object</code>对象。</p>
<table>
<thead>
<tr>
<th align="left">对象</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>AuctionUser</code></td>
<td align="left">对应注册<code>用户</code>,包括用户名、密码、<code>Email</code>地址等信息。</td>
</tr>
<tr>
<td align="left"><code>Kind</code></td>
<td align="left">对应<code>物品种类</code>,包括种类名、种类描述等信息。</td>
</tr>
<tr>
<td align="left"><code>State</code></td>
<td align="left">对应<code>物品的状态信息,</code>包含状态名等信息。</td>
</tr>
<tr>
<td align="left"><code>Item</code></td>
<td align="left">对应<code>物品</code>,包含物品名、物品描述、物品备注、物品种类、物品状态等信息。</td>
</tr>
<tr>
<td align="left"><code>Bid</code></td>
<td align="left">对应<code>竞价信息</code>,包含竞价物品、参与竞价的用户、竞价价格等信息。</td>
</tr>
</tbody></table>
<p>不仅如此,5个<code>Domain Object</code>之间的关联关系也比较多,它们之间存在着如下关联关系。</p>
<ul>
<li><code>AuctionUser</code>(用户)与<code>Item</code>(物品)之间存在两种关系:所有者关系和赢取者关系。这两种关系都是<code>1对N</code>的关系,即<code>AuctionUser</code>可以访问他所赢取的全部物品,也可以访问他所拥有的全部物品,因为<code>AuctionUser</code>通过<code>Set</code>类型的变量来分别保存他的赢取物品和所有物品。而<code>Item</code>里则保存<code>AuctionUser</code>的变量,分别是它对应的所有者和赢取者。</li>
<li><code>Kind</code>(物品种类)和<code>Item</code>(物品)之间存在<code>1对N</code>的关系,<ul>
<li><code>Kind</code>里以<code>Set</code>类型属性保存该种类下的全部物品,</li>
<li><code>Item</code>里以<code>Kind</code>类型属性保存它所在的种类。</li>
</ul>
</li>
<li><code>State</code>(物品状态信息)和<code>Item</code>(物品)之间存在<code>1对N</code>的关系,<ul>
<li><code>State</code>以<code>Set</code>类型属性保存该状态下的全部物品,</li>
<li><code>Item</code>以<code>State</code>类型属性保存它所处的状态。</li>
</ul>
</li>
<li><code>Item</code>(物品)和<code>Bid</code>(竞价信息)之间存在<code>1对N</code>的关系,<ul>
<li><code>Item</code>以<code>Set</code>类型属性保存该物品的全部竞价,</li>
<li><code>Bid</code>以<code>Item</code>类型属性保存它对应的物品。</li>
</ul>
</li>
<li><code>AuctionUser</code>(用户)和<code>Bid</code>(竞价信息)之间也存在<code>1对N</code>的关系,<ul>
<li><code>AuctionUser</code>以<code>Set</code>类型属性保存该用户参与的全部竞价,</li>
<li><code>Bid</code>以<code>User</code>类型属性保存参与竞价的用户。</li>
</ul>
</li>
</ul>
<p>图10.8显示了5个实体之间的关联关系。<br><img data-src="https://image-1257720033.cos.ap-shanghai.myqcloud.com/blog/readbooknote/FengKuangQianDuanKaiFaJiangYi/chapter10/3.png" alt="这里有一张图片"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/JavaReadingNotes/page/127/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/JavaReadingNotes/">1</a><span class="space">&hellip;</span><a class="page-number" href="/JavaReadingNotes/page/127/">127</a><span class="page-number current">128</span><a class="page-number" href="/JavaReadingNotes/page/129/">129</a><span class="space">&hellip;</span><a class="page-number" href="/JavaReadingNotes/page/188/">188</a><a class="extend next" rel="next" href="/JavaReadingNotes/page/129/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">蓝蓝</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">5.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span>站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">88:01</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/comments.js"></script><script src="/JavaReadingNotes/js/utils.js"></script><script src="/JavaReadingNotes/js/motion.js"></script><script src="/JavaReadingNotes/js/next-boot.js"></script><script src="/JavaReadingNotes/js/bookmark.js"></script><script src="/JavaReadingNotes/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/JavaReadingNotes/js/third-party/search/local-search.js"></script>



  <script src="/JavaReadingNotes/js/third-party/fancybox.js"></script>

  <script src="/JavaReadingNotes/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/JavaReadingNotes/js/third-party/math/mathjax.js"></script>


  <script src="https://cdn.jsdelivr.net/npm/quicklink@2.2.0/dist/quicklink.umd.js" integrity="sha256-4kQf9z5ntdQrzsBC3YSHnEz02Z9C1UeW/E9OgnvlzSY=" crossorigin="anonymous"></script>
  <script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"https://lanlan2017.github.io/JavaReadingNotes/page/128/"}</script>
  <script src="/JavaReadingNotes/js/third-party/quicklink.js"></script>
<script class="next-config" data-name="waline" type="application/json">{"lang":null,"enable":true,"serverURL":"https://waline-test-lanlan2017.vercel.app","placeholder":"填写邮箱可接收回复通知 填写个人网址可为您引流","avatar":"mm","pageSize":10,"visitor":false,"comment_count":true,"requiredFields":[],"meta":["nick","mail","link"],"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js","el":"#waline-comments","path":"/JavaReadingNotes/page/128/"}</script>
<script>
document.addEventListener('page:loaded', () => {
  NexT.utils.loadComments(CONFIG.waline.el).then(() => 
    NexT.utils.getScript(CONFIG.waline.libUrl, { condition: window.Waline })
  ).then(() => {
    new Waline(CONFIG.waline);
  });
});
</script>
</body>
</html>
