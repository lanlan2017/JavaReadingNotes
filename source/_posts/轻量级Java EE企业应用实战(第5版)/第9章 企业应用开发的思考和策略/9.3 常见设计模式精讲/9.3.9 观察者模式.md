---
title: 9.3.9 观察者模式
categories: 
  - 轻量级Java EE企业应用实战(第5版)
  - 第9章 企业应用开发的思考和策略
  - 9.3 常见设计模式精讲
date: 2019-09-13 15:11:58
updated: 2019-11-02 01:39:03
abbrlink: f47337e3
---
- [9.3.9 观察者模式](/ReadingNotes/f47337e3/#9-3-9-观察者模式)
- [程序示例](/ReadingNotes/f47337e3/#程序示例)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
# 9.3.9 观察者模式 #
观察者模式定义了对象间的一对多依赖关系,让一个或多个观察者对象观察一个主题对象。当主题对象的状态发生变化时,系统能通知所有的依赖于此对象的观察者对象,从而使得观察者对象能够自动更新。
在观察者模式中,被观察的对象常常也被称为目标或主题(`Subject`),依赖的对象被称为观察者(`Observer`)。
# 程序示例 #
下面以一个简单的示例来示范观察者模式,程序先提供一个观察者接口。





上面`Observer`接口是一个观察者接口,程序中所有观察者都应该实现该接口。在该接口的`update`方法中包含了一个`Observable`类型的参数,该参数代表被观察对象,也就是前面介绍的目标或主题。此处的`Observable`是一个抽象基类,程序中被观察者应该继承该抽象基类。 `Observable`类的代码如下。





该`Observable`抽象类是所有被观察者的基类,它主要提供了`registObserver()`方法用于注册一个新的观察者:并提供了一个`removeObserver()`方法用于删除一个已注册的观察者;当具体被观察对象的状态发生改变时,具体被观察对象会调用`notifyObservers()`方法来通知所有观察者。
下面提供一个具体的被观察者类:`Product`,该产品有两个属性,它继承了`Observable`抽象基类





正如程序中两行粗体字代码所示,当程序调用`Product`对象的`setName()`、 `setPrice()`方法来改变`Product`的`name`、 `price`成员变量时,这两个方法将自动触发`Observable`基类的`notifyObservers`方法。
接着主程序创建一个`Product`对象(被观察的目标对象),然后向该被观察对象上注册两个观察者对象,当主程序调用`Product`对象的`sete`方法来改变该对象的状态时,注册在`Product`对象上的两个观察者将被触发。主程序代码如下。
运行上面的程序,可以看到当`Product`的成员变量值发生改变时,注册在该`Product`上的`Name Observer`和`PriceObserver`将被触发。
纵观上面介绍的观察者模式,发现观察者模式通常包含如下4个角色。





