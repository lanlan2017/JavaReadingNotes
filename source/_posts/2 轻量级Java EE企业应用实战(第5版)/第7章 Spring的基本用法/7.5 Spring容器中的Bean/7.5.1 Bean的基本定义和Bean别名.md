---
title: 7.5.1 Bean的基本定义和Bean别名
categories: 
  - 2 轻量级Java EE企业应用实战(第5版)
  - 第7章 Spring的基本用法
  - 7.5 Spring容器中的Bean
abbrlink: 59bb5897
date: 2019-08-26 12:08:43
updated: 2022-04-03 01:21:16
---
# 7.5.1 Bean的基本定义和Bean别名 #
## beans元素 ##
**`<beans>`元素是`Spring`配置文件的根元素**,该元素可以指定如下属性

|`<beans>`元素的属性|描述|
|:---|:---|
|`default-lazy-init`|指定该`<beans>`元素下配置的所有`Bean`**默认的延迟初始化行为**。|
|`default-merge`|指定该`<beans>`元素下配置的所有`Bean`**默认的`merge`行为**.|
|`default- autowire`|指定该`<beans>`元素下配置的所有`Bean`**默认的自动装配行为**。|
|`default-autowire-candidates`|指定该`<beans>`元素下配置的所有`Bean`**默认是否作为自动装配的候选`Bean`**。|
|`default-init-method`|指定该`<beans>`元素下配置的所有`Bean`**默认的初始化方法**。|
|`default-destroy-method`|指定该`< beans.>`元素下配置的所有`Bean`**默认的回收方法**。|

`<beans>`元素下所能指定的属性都可以在每个`<bean>`子元素中指定,只要将属性名去掉`default`即可。也就是`bean`元素上可以指定`lazy-init`属性,来配置该`Bean`的默认延迟初始化行为。
在`<beans>`元素上指定和在`<bean>`上指定的区别是:
- 如果为`<bean>`元素指定这些属性,只对特定`Bean`起作用;
- 如果为`<beans>`元素指定这些属性,这些属性将会对`<beans>`包含的所有`Bean`都起作用。

当二者所指定的属性不一致时,`<bean>`下指定的属性会覆盖`<beans>`下指定的属性。
## bean元素 ##
`<bean>`元素是`<beans>`元素的子元素,`<beans>`元素可以包含多个`<bean>`子元素,每个`<bean>`子元素定义一个`Bean`,每个`Bean`对应`Spring`容器里的一个`Java`实例。
### bean元素常用属性 ###
定义`Bean`时,通常需要指定两个属性。

|`<bean>`元素常用属性|描述|
|:---|:---|
|`id`|确定该`Bean`的唯一标识,**容器对`Bean`的管理、访问,以及该`Bean`的依赖关系,都通过`id`属性完成**。`Bean`的`id`属性在`Spring`容器中应该是唯一的.|
|`class`|指定该`Bean`的具体`实现类`,这里不能是接口。`Spring`容器必须知道创建`Bean`的实现类,而不能是接口。在通常情况下, `Spring`会直接使用`new`关键字创建该`Bean`的实例,因此,这里必须提供`Bean`实现类的类名。|
在一些特殊的情况下, `Spring`会采用其他方式创建`Bean`实例,例如工厂方法等,则**可能不再需要`class`属性**。这些内容需要参考后面的介绍。
### 通过name属性在定义Bean是给Bean指定别名 ###
`id`属性是容器中`Bean`的唯一标识,这个`id`属性必须遵循`XML`文档的i属性规则,因此有一些特殊要求,例如不能以`"/"`等特殊字符作为属性值。但在某些特殊的情况下,`Bean`的标识必须包含这些特殊符号,此时**可以采用`name`属性,用于指定`Bean`的别名,通过访问`Bean`别名也可访问`Bean`实例**。

除了可以为`<bean>`元素指定一个`id`属性之外,还可以为`<bean>`元素指定`name`属性,用于为`Bean`实例指定`别名`。

`<bean>`元素的`id`属性具有唯一性,而且是一个真正的`XML ID`属性,因此其他`XML`元素在引用该`id`时,可以利用`XML`解析器的验证功能。
### id属性命名规范 ###
由于`XML`规范规定了`XML ID`标识符必须由`字母`和`数字`组成,且`只能以字母开头`。
### 为什么要使用别名 ###
在一些特殊的情况下(例如与`Struts 1`整合过程中),必须为某些`Bean`指定`特殊标识名`,此时就必须为控制器`Bean`指定别名。

## 在其他地方为一个已经存在的Bean实例指定别名 ##
在一些极端的情况下,程序无法在定义`Bean`时就指定所有的别名,而是需要**在其他地方为一个已经存在的`Bean`实例指定别名**,则可使用`<alias>`元素来完成,该元素可指定如下两个属性。

|`<alias>`元素的属性|描述|
|:---|:---|
|`name`|该属性指定一个`Bean`实例的标识名,表明将为该`Bean`实例指定别名。|
|`alias`|指定一个别名。|

例如以下示例配置:
```xml
<!-- 面代码为该Bean指定三个别名：#abc，@123，abc* -->
<bean id="person" class="..." name="#abc,@123,abc*"/>
<alias name="person" alias="jack"/>
<alias name="jack" alias="jackee">
```
- 上面第一行代码的`name`属性为该`Bean`指定了三个别名`#abc`，`@123`，`abc*` ,这些别名中包含了些特殊字符,由此可见,作为别名的字符可以很随意。
- 上面配置的后两行代码则用于为已有的`person`这个`Bean`指定别名。



