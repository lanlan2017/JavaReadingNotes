---
title: 7.3.4 两种注入方式的对比
categories: 
  - 2 轻量级Java EE企业应用实战(第5版)
  - 第7章 Spring的基本用法
  - 7.3 Spring的核心机制 依赖注入
abbrlink: 4725d881
date: 2019-08-25 10:57:22
updated: 2022-04-03 01:21:16
---
# 7.3.4 两种注入方式的对比 #
在过去的开发过程中,这两种注入方式都是非常常用的。 `Spring`也同时支持两种依赖注入方式:`设值注入`和`构造注入`。这两种依赖注入方式并没有绝对的好坏,只是适应的场景有所不同。
## 设值注入的优点 ##
相比之下,设值注入具有如下的优点。
1. 与传统的`Javabean`的写法更相似,程序开发人员更容易理解、接受。通过`setter`方法设定依赖关系显得更加直观、自然。
2. 对于复杂的依赖关系,如果采用构造注入,会导致构造器过于臃肿,难以阅读。 `Spring`在创建`Bean`实例时,需要同时实例化其依赖的全部实例,因而导致性能下降。而使用设值注入,则能避免这些问题。
3. 尤其是在某些成员变量可选的情况下,多参数的构造器更加笨重。
## 构造注入的优点 ##
构造注入也不是绝对不如设值注入,在某些特定的场景下,构造注入比设值注入更优秀。构造注入也有如下优势:
1. 构造注入可以在构造器中决定依赖关系的注入顺序,优先依赖的优先注入。例如,组件中其他依赖关系的注入,常常需要依赖于`Datasource`的注入。采用构造注入,可以在代码中清晰地决定注入顺序。
2. 对于依赖关系无须变化的`Bean`,构造注入更有用处。因为没有`setter`方法,所有的依赖关系全部在构造器内设定。因此,无须担心后续的代码对依赖关系产生破坏。
3. 依赖关系只能在构造器中设定,则只有组件的创建者才能改变组件的依赖关系。对组件的调用者而言,组件内部的依赖关系完全透明,更符合高内聚的原则。

## 设值注入为主,构造注入为辅 ##
建议采用以**设值注入为主,构造注入为辅**的注入策略。
对于依赖关系无须变化的注入,尽量采用构造注入;
而其他依赖关系的注入,则考虑采用设值注入。


