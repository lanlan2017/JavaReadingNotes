---
title: 6.10 对象与垃圾回收 6.10.1 对象在内存中的状态
categories: 
  - 疯狂Java讲义 (第4版)
  - 第6章 面向对象(下)
  - 6.10 对象与垃圾回收
date: 2019-09-28 12:43:24
updated: 2019-11-02 01:39:01
abbrlink: 18730d82
---
- [6.10 对象与垃圾回收](/ReadingNotes/18730d82/#6-10-对象与垃圾回收)
    - [垃圾回收机制特征](/ReadingNotes/18730d82/#垃圾回收机制特征)
    - [6.10.1 对象在内存中的状态](/ReadingNotes/18730d82/#6-10-1-对象在内存中的状态)

<!--more-->
<script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.slim.min.js"></script>
<script>$(document).ready(function () {$(".post-body > ul:nth-child(1)").hide();});</script>

<!--end-->
<!--SSTStart-->
# 6.10 对象与垃圾回收 #

`Java`的垃圾回收是`Java`语言的重要功能之一。当程序创建`对象`、`数组`等`引用类型实体`时,系统都会在`堆内存`中为之分配一块内存区,对象就保存在这块内存区中,当这块内存不再被任何引用变量引用时,这块内存就变成垃圾,等待垃圾回收机制进行回收。
## 垃圾回收机制特征 ##
垃圾回收机制具有如下特征:
1. 垃圾回收机制`只负责回收堆内存中的对象`,不会回收任何物理资源(例如`数据库连接`、`网络IO`等资源)。
2. 程序`无法精确控制垃圾回收的运行`,垃圾回收会在合适的时候进行。当对象永久性地失去引用后,系统就会在合适的时候回收它所占的内存。
3. 在垃圾回收机制回收任何对象之前,总会先调用它的`finalize()`方法,该方法可能使该对象重新复活,从而`取消垃圾回收`

## 6.10.1 对象在内存中的状态 ##
当一个对象在堆内存中运行时,根据它被引用变量所引用的状态,可以把它所处的状态分成如下三种。
1. **可达状态**:当一个对象被创建后,**若有`一个以上`的引用变量引用它,则这个对象在程序中处于可达状态**,程序可通过引用变量来调用该对象的实例变量和方法。
2. **可恢复状态**:**如果程序中某个对象不再有任何引用变量引用它,它就进入了可恢复状态**。在这种状态下,系统的垃圾回收机制准备回收该对象所占用的内存,在回收该对象之前,系统会调用所有可恢复状态对象的`finalize()`方法进行资源清理。
    - 如果系统在调用`finalize()`方法时重新让一个引用变量引用该对象,则这个对象会再次变为可达状态;否则该对象将进入不可达状态。
3. **不可达状态**:当对象与所有引用变量的关联都被切断,且系统已经调用所有对象的`finalize`方法后依然没有使该对象变成可达状态,那么这个对象将永久性地失去引用,最后变成不可达状态。
    - 只有当一个对象处于不可达状态时,系统才会真正回收该对象所占有的资源。

![这里有一张图片](https://image-1257720033.cos.ap-shanghai.myqcloud.com/blog/readbooknote/FangKuangJavaJiangYi4/ch6/4.png)

一个对象可以被一个方法的`局部变量引用`,也可以被其他类的`类变量`引用,或被其他对象的`实例变量`引用。
当某个对象被其他类的类变量引用时,只有该类被销毁后,该对象才会进入可恢复状态;
当某个对象被其他对象的实例变量引用时,只有当该对象被销毁后,该对象才会进入可恢复状态。
<!--SSTStop-->

