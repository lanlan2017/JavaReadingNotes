---
title: 24.3 备忘录模式的应用
<<<<<<< HEAD
categories:
=======
categories: 
>>>>>>> 4ed4de8f07c69857a05fa9fda8014b55c4291ca0
  - 8 设计模式之禅(第2版)
  - 2 第二部分 真刀实枪 23种设计模式完美演绎
  - 第24章 备忘录模式
abbrlink: dc3e8bee
date: 2021-09-30 00:00:40
<<<<<<< HEAD
updated: 2021-09-30 15:39:03
=======
updated: 2022-04-03 01:21:19
>>>>>>> 4ed4de8f07c69857a05fa9fda8014b55c4291ca0
---
# 24.3 备忘录模式的应用
由于备忘录模式有太多的变形和处理方式，每种方式都有它自己的优点和缺点，标准的备忘录模式很难在项目中遇到，基本上都有一些变换处理方式。因此，我们在使用备忘录模式时主要了解如何应用以及需要注意哪些事项就成了。

## 24.3.1 备忘录模式的使用场景
- 需要保存和恢复数据的相关状态场景。
- 提供一个可回滚（rollback）的操作；比如Word中的CTRL+Z组合键，IE浏览器中的后 退按钮，文件管理器上的backspace键等。
- 需要监控的副本场景中。例如要监控一个对象的属性，但是监控又不应该作为系统的 主业务来调用，它只是边缘应用，即使出现监控不准、错误报警也影响不大，因此一般的做 法是备份一个主线程中的对象，然后由分析程序来分析。
- 数据库连接的事务管理就是用的备忘录模式，想想看，如果你要实现一个JDBC驱 动，你怎么来实现事务？还不是用备忘录模式嘛！

## 24.3.2 备忘录模式的注意事项
- 备忘录的生命期

备忘录创建出来就要在“最近”的代码中使用，要主动管理它的生命周期，建立就要使用，不使用就要立刻删除其引用，等待垃圾回收器对它的回收处理。

- 备忘录的性能

不要在频繁建立备份的场景中使用备忘录模式（比如一个for循环中），原因有二：一是控制不了备忘录建立的对象数量；二是大对象的建立是要消耗资源的，系统的性能需要考虑。因此，如果出现这样的代码，设计师就应该好好想想怎么修改架构了。

