---
title: 1.1 我是牛类 我可以担任多职吗
categories: 
  - 8 设计模式之禅(第2版)
  - 1 第一部分 大旗不挥，谁敢冲锋 ——6大设计原则全新解读
  - 第1章 单一职责原则
abbrlink: 31f94edd
date: 2019-09-16 00:04:17
updated: 2022-04-03 01:21:19
---
# 1.1 我是“牛”类，我可以担任多职吗
单一职责原则的英文名称是Single Responsibility Principle，简称是SRP。这个设计原则备受争议，只要你想和别人争执、怄气或者是吵架，这个原则是屡试不爽的。如果你是老大， 看到一个接口或类是这样或那样设计的，你就问一句：“你设计的类符合SRP原则吗？”保准对方立马“萎缩”掉，而且还一脸崇拜地看着你，心想：“老大确实英明”。这个原则存在争议之处在哪里呢？就是对职责的定义，什么是类的职责，以及怎么划分类的职责。我们先举个例子来说明什么是单一职责原则。

只要做过项目，肯定要接触到用户、机构、角色管理这些模块，基本上使用的都是RBAC模型（Role-Based Access Control，基于角色的访问控制，通过分配和取消角色来完成用户权限的授予和取消，使动作主体（用户）与资源的行为（权限）分离），确实是一个很好的解决办法。我们这里要讲的是用户管理、修改用户的信息、增加机构（一个人属于多个机构）、增加角色等，用户有这么多的信息和行为要维护，我们就把这些写到一个接口中， 都是用户管理类嘛，我们先来看它的类图，如图1-1所示。

![image-20210926110405399](https://gitee.com/XiaoLan223/images/raw/master/Blog/Sum/20210926110412.png)

<center>图1-1 用户信息维护类图</center>

太Easy的类图了，我相信，即使是一个初级的程序员也可以看出这个接口设计得有问题，用户的属性和用户的行为没有分开，这是一个严重的错误！这个接口确实设计得一团糟，应该把用户的信息抽取成一个BO（Business Object，业务对象），把行为抽取成一个Biz（Business Logic，业务逻辑），按照这个思路对类图进行修正，如图1-2所示。

![image-20210926110541704](https://gitee.com/XiaoLan223/images/raw/master/Blog/Sum/20210926110541.png)
<center>图1-2 职责划分后的类图</center>

重新拆封成两个接口，IUserBO负责用户的属性，简单地说，IUserBO的职责就是收集和反馈用户的属性信息；IUserBiz负责用户的行为，完成用户信息的维护和变更。各位可能要说了，这个与我实际工作中用到的User类还是有差别的呀！别着急，我们先来看一看分拆成两个接口怎么使用。OK，我们现在是面向接口编程，所以产生了这个UserInfo对象之后，当然可以把它当IUserBO接口使用。也可以当IUserBiz接口使用，这要看你在什么地方使用了。 要获得用户信息，就当是IUserBO的实现类；要是希望维护用户的信息，就把它当作IUserBiz 的实现类就成了，如代码清单1-1所示。

代码清单1-1 分清职责后的代码示例
```java
IUserInfo userInfo = new UserInfo(); 
//我要赋值了，我就认为它是一个纯粹的BO 
IUserBO userBO = (IUserBO)userInfo; userBO.setPassword("abc"); 
//我要执行动作了，我就认为是一个业务逻辑类 
IUserBiz userBiz = (IUserBiz)userInfo; userBiz.deleteUser();
```
确实可以如此，问题也解决了，但是我们来分析一下刚才的动作，为什么要把一个接口拆分成两个呢？其实，在实际的使用中，我们更倾向于使用两个不同的类或接口：一个是IUserBO，一个是IUserBiz，类图如图1-3所示。

![image-20210926110726201](https://gitee.com/XiaoLan223/images/raw/master/Blog/Sum/20210926110726.png)

<center>图1-3 项目中经常采用的SRP类图</center>

以上我们把一个接口拆分成两个接口的动作，就是依赖了单一职责原则，那什么是单一职责原则呢？单一职责原则的定义是：**应该有且仅有一个原因引起类的变更**。

